define.alias("@glimmer/component/-private/ember-component-manager","msg-overlay/component-managers/glimmer")
define("msg-overlay/components/-dynamic-element-alt",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define("msg-overlay/components/-dynamic-element",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define.alias("artdeco-button/components/artdeco-button","msg-overlay/components/artdeco-button")
define.alias("artdeco-datepicker/components/artdeco-calendar","msg-overlay/components/artdeco-calendar")
define.alias("artdeco-card/components/artdeco-card-image","msg-overlay/components/artdeco-card-image")
define.alias("artdeco-card/components/artdeco-card","msg-overlay/components/artdeco-card")
define.alias("artdeco-carousel/components/artdeco-carousel-item","msg-overlay/components/artdeco-carousel-item")
define.alias("artdeco-carousel/components/artdeco-carousel-slider","msg-overlay/components/artdeco-carousel-slider")
define.alias("artdeco-carousel/components/artdeco-carousel-title","msg-overlay/components/artdeco-carousel-title")
define.alias("artdeco-carousel/components/artdeco-carousel","msg-overlay/components/artdeco-carousel")
define.alias("artdeco-completeness-meter-linear/components/artdeco-completeness-meter-linear","msg-overlay/components/artdeco-completeness-meter-linear")
define.alias("artdeco-modal/components/artdeco-confirmation-dialog","msg-overlay/components/artdeco-confirmation-dialog")
define.alias("artdeco-datepicker/components/artdeco-datepicker-embedded-cal","msg-overlay/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-datepicker","msg-overlay/components/artdeco-datepicker")
define.alias("artdeco-datepicker/components/artdeco-daterange-embedded-cal","msg-overlay/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-daterange","msg-overlay/components/artdeco-daterange")
define.alias("artdeco-dropdown/components/artdeco-dropdown-content","msg-overlay/components/artdeco-dropdown-content")
define.alias("artdeco-dropdown/components/artdeco-dropdown-header","msg-overlay/components/artdeco-dropdown-header")
define.alias("artdeco-dropdown/components/artdeco-dropdown-item","msg-overlay/components/artdeco-dropdown-item")
define.alias("artdeco-dropdown/components/artdeco-dropdown-trigger","msg-overlay/components/artdeco-dropdown-trigger")
define.alias("artdeco-dropdown/components/artdeco-dropdown","msg-overlay/components/artdeco-dropdown")
define.alias("artdeco-empty-state/components/artdeco-empty-state","msg-overlay/components/artdeco-empty-state")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-badge","msg-overlay/components/artdeco-entity-lockup-badge")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-caption","msg-overlay/components/artdeco-entity-lockup-caption")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-content","msg-overlay/components/artdeco-entity-lockup-content")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-image","msg-overlay/components/artdeco-entity-lockup-image")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-metadata","msg-overlay/components/artdeco-entity-lockup-metadata")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-subtitle","msg-overlay/components/artdeco-entity-lockup-subtitle")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-title","msg-overlay/components/artdeco-entity-lockup-title")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup","msg-overlay/components/artdeco-entity-lockup")
define.alias("artdeco-entity-pile/components/artdeco-entity-pile","msg-overlay/components/artdeco-entity-pile")
define.alias("artdeco-hoverables/components/artdeco-hoverable-content","msg-overlay/components/artdeco-hoverable-content")
define.alias("artdeco-hoverables/components/artdeco-hoverable-trigger","msg-overlay/components/artdeco-hoverable-trigger")
define.alias("artdeco-inline-feedback/components/artdeco-inline-feedback","msg-overlay/components/artdeco-inline-feedback")
define.alias("artdeco-loader/components/artdeco-loader","msg-overlay/components/artdeco-loader")
define.alias("artdeco-modal/components/container","msg-overlay/components/artdeco-modal-container")
define.alias("artdeco-modal/components/artdeco-modal-content","msg-overlay/components/artdeco-modal-content")
define.alias("artdeco-modal/components/artdeco-modal-footer","msg-overlay/components/artdeco-modal-footer")
define.alias("artdeco-modal/components/artdeco-modal-header","msg-overlay/components/artdeco-modal-header")
define.alias("artdeco-modal/components/artdeco-modal","msg-overlay/components/artdeco-modal")
define.alias("artdeco-notification-badge/components/artdeco-notification-badge","msg-overlay/components/artdeco-notification-badge")
define.alias("artdeco-pagination/components/artdeco-pagination-ellipsis","msg-overlay/components/artdeco-pagination-ellipsis")
define.alias("artdeco-pagination/components/artdeco-pagination-indicator","msg-overlay/components/artdeco-pagination-indicator")
define.alias("artdeco-pagination/components/artdeco-pagination","msg-overlay/components/artdeco-pagination")
define.alias("artdeco-pill/components/artdeco-pill-choice-group","msg-overlay/components/artdeco-pill-choice-group")
define.alias("artdeco-pill/components/artdeco-pill-choice","msg-overlay/components/artdeco-pill-choice")
define.alias("artdeco-pill/components/artdeco-pill-dismiss","msg-overlay/components/artdeco-pill-dismiss")
define.alias("artdeco-pill/components/artdeco-pill-input","msg-overlay/components/artdeco-pill-input")
define.alias("artdeco-pill/components/artdeco-pill-link","msg-overlay/components/artdeco-pill-link")
define.alias("artdeco-pill/components/artdeco-pill-toggle","msg-overlay/components/artdeco-pill-toggle")
define.alias("artdeco-slider/components/artdeco-slider","msg-overlay/components/artdeco-slider")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tab","msg-overlay/components/artdeco-spotlight-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tablist","msg-overlay/components/artdeco-spotlight-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tab","msg-overlay/components/artdeco-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tablist","msg-overlay/components/artdeco-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabpanel","msg-overlay/components/artdeco-tabpanel")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabs","msg-overlay/components/artdeco-tabs")
define.alias("artdeco-text-input/components/artdeco-text-input-multi","msg-overlay/components/artdeco-text-input-multi")
define.alias("artdeco-text-input/components/artdeco-text-input-single","msg-overlay/components/artdeco-text-input-single")
define.alias("artdeco-text-input/components/artdeco-text-input","msg-overlay/components/artdeco-text-input")
define.alias("artdeco-toast/components/artdeco-toast-item","msg-overlay/components/artdeco-toast-item")
define.alias("artdeco-toast/components/artdeco-toasts","msg-overlay/components/artdeco-toasts")
define.alias("artdeco-toggle/components/artdeco-toggle","msg-overlay/components/artdeco-toggle")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-input","msg-overlay/components/artdeco-typeahead-input")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-result","msg-overlay/components/artdeco-typeahead-result")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-results-list","msg-overlay/components/artdeco-typeahead-results-list")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead","msg-overlay/components/artdeco-typeahead")
define("msg-overlay/components/audio-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/service","@ember/object","@glimmer/component","@glimmer/tracking"],(function(e,t,n,i,a,o,r,s,l,c,u){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var d,m,p,g
const b=(0,r.createTemplateFactory)({id:"5c22H7FS",block:'[[[11,0],[16,1,[29,[[30,1]]]],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-bubble msg-overlay-audio-bubble\\n    ",[52,[30,2],"msg-overlay-audio-bubble--is-minimized"],"\\n    ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n    ",[52,[30,3],"msg-overlay-audio-bubble--is-hidden-at-md"]]]],[4,[38,1],null,null],[4,[38,2],["transitioned",[28,[37,3],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n  "],[8,[39,4],null,[["@bundle"],["rooms"]],[["default"],[[[[1,"\\n"],[41,[30,4,["state","fulfilled"]],[[[1,"      "],[8,[39,5],null,[["@onGoLive","@room","@ugcPostUrn","@autoJoin","@onLeaveCall","@isMinimized","@toggleMinimize"],[[30,5,["onGoLive"]],[30,5,["room"]],[30,5,["ugcPostUrn"]],[30,5,["autoJoin"]],[30,0,["closeBubble"]],[30,2],[30,6]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"msg-overlay-audio-bubble__loading-section"],[12],[1,"\\n        "],[8,[39,6],null,null,null],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"  "]],[4]]]]],[1,"\\n"],[13]],["@bubbleId","@isMinimized","@hideAudioBubbleAtMdBreakPoint","assetLoader","@bubble","@toggleMinimize"],false,["if","msg-shared@block-scrolling","on","ember-set-helper@set","asset-loader@deferred-asset-loader","rooms@rooms-call-container","artdeco-loader@artdeco-loader"]]',moduleName:"msg-overlay/components/audio-bubble.hbs",isStrictMode:!1})
let h=(d=(0,s.inject)("msg-overlay-manager@msg-overlay-manager"),m=class extends c.default{constructor(){super(...arguments);(0,t.default)(this,"msgOverlayService",p,this);(0,t.default)(this,"isInMinimizeTransition",g,this)}closeBubble(){var e,t,n,i
null===(e=(t=this.args.bubble).onCloseBubble)||void 0===e||e.call(t)
null===(n=(i=this.args).closeBubble)||void 0===n||n.call(i)}},p=(0,i.default)(m.prototype,"msgOverlayService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,i.default)(m.prototype,"isInMinimizeTransition",[u.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(m.prototype,"closeBubble",[l.action],Object.getOwnPropertyDescriptor(m.prototype,"closeBubble"),m.prototype),m)
e.default=h;(0,o.setComponentTemplate)(b,h)}))
define.alias("ember-semaphore/components/block-profile","msg-overlay/components/block-profile")
define.alias("ember-semaphore/components/cleared-content-modal-v2","msg-overlay/components/cleared-content-modal-v2")
define.alias("ember-semaphore/components/cleared-content-modal","msg-overlay/components/cleared-content-modal")
define("msg-overlay/components/connection-search-result-item-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a=(0,n.createTemplateFactory)({id:"GLs9KSYH",block:'[[[11,0],[24,0,"display-flex align-items-center overflow-hidden"],[24,"tabindex","-1"],[17,1],[4,[38,0],["mousemove",[30,2]],null],[4,[38,0],["click",[30,3]],null],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-search-result-picture circle display-flex flex-shrink-zero"],[12],[1,"\\n    "],[8,[39,1],null,[["@classNames","@image","@alt","@ghostType","@desiredWidth"],["msg-overlay-search-result-picture__background-img full-width full-height round",[30,4,["entityWithPresenceViewData","image"]],[30,4,["recipientName"]],"person",100]],null],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"display-flex overflow-hidden pv1 pl2"],[12],[1,"\\n    "],[10,"h4"],[14,0,"msg-overlay-search-result-name t-12 t-black t-bold flex-shrink-zero truncate"],[12],[1,"\\n      "],[1,[30,4,["recipientName"]]],[1,"\\n    "],[13],[1,"\\n"],[41,[30,4,["subtext"]],[[[1,"      "],[10,1],[14,0,"t-12 t-black--light t-normal flex-shrink-zero ph1 truncate"],[12],[1,"\\n        "],[1,[28,[35,3],["dot","msg-overlay/components/connection-search-result-item-presenter"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,2],[14,0,"t-12 t-black--light t-normal truncate"],[12],[1,"\\n        "],[1,[30,4,["subtext"]]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["&attrs","@onMouseMove","@onClick","@viewData"],false,["on","ember-vector-images@lazy-image","if","t"]]',moduleName:"msg-overlay/components/connection-search-result-item-presenter.hbs",isStrictMode:!1})
var o=(0,t.setComponentTemplate)(a,(0,i.default)())
e.default=o}))
define("msg-overlay/components/contextual-recommendation-list-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","@ember/service","@ember/object","msg-shared/utils/constants","msg-overlay/utils/recommendation-helpers","@glimmer/tracking"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v,f
const y=(0,r.createTemplateFactory)({id:"75MmbdF2",block:'[[[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual msg-overlay-list-bubble__contextual--redesigned mb2 mh2\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble__contextual--minimized "],"\\n    ",[30,1]]]],[12],[1,"\\n"],[1,"  "],[11,0],[24,0,"msg-conversation-listitem__link display-flex msg-overlay-list-bubble__contextual--redesigned m1"],[4,[38,1],["click",[30,0,["toggleRemainingSuggestedRecipients"]]],null],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-preview-entity\\n        ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual-preview--fade-in"]]]],[12],[1,"\\n      "],[8,[39,2],null,[["@viewData","@entitySize","@iconSize"],[[30,2,["facepileViewData"]],0,"small"]],null],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__contextual-header overflow-hidden"],[12],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,"h5"],[15,0,[29,["msg-overlay-list-bubble__contextual-header-title t-bold\\n              ",[52,[30,0,["showRemainingSuggestions"]],"pl1"]]]],[12],[1,"\\n"],[41,[30,0,["isFeedContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_article_v2_expanded","i18n_connection_to_context_article_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count"],[[30,2,["suggestedRecipientsLength"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["isProfileContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_member_v2_expanded","i18n_connection_to_context_actor_member_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count","memberName"],[[30,2,["suggestedRecipientsLength"]],[28,[37,4],[[30,0,["msgOverlayService","contextActor"]]],null]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_company_v2_expanded","i18n_connection_to_context_actor_company_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count","companyName"],[[30,2,["suggestedRecipientsLength"]],[30,0,["msgOverlayService","contextActor"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n          "],[10,0],[14,0,"t-12 t-black--light t-bold"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__view-more-suggestions display-flex justify-center full-width"],[12],[1,"\\n              "],[8,[39,5],[[24,0,"ml1"]],[["@name","@size","@type"],[[52,[30,0,["showRemainingSuggestions"]],"chevron-up","chevron-down"],"small","system"]],null],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-subheader\\n              ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual--fade-in"]]]],[12],[1,"\\n"],[41,[28,[37,6],[[30,2,["suggestedRecipientsLength"]],1],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_single","msg-overlay/components/contextual-recommendation-list-presenter"],[["name"],[[30,2,["firstMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[41,[28,[37,6],[[30,2,["suggestedRecipientsLength"]],2],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_double","msg-overlay/components/contextual-recommendation-list-presenter"],[["firstMember","secondMember"],[[30,2,["firstMutualConnectionName"]],[30,2,["secondMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_more","msg-overlay/components/contextual-recommendation-list-presenter"],[["firstMember","secondMember"],[[30,2,["firstMutualConnectionName"]],[30,2,["secondMutualConnectionName"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n  "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n    "],[1,[28,[35,3],["i18n_a11y_infinite_scroll","msg-overlay/components/contextual-recommendation-list-presenter"],null]],[1,"\\n  "],[13],[1,"\\n  "],[10,"ul"],[14,0,"msg-conversations-container__conversations-list msg-overlay-list-bubble__conversations-list msg-overlay-list-bubble__contextual-expended"],[12],[1,"\\n"],[42,[28,[37,8],[[28,[37,8],[[28,[37,9],[[30,2,["recommendationCardViewDataItems"]],0,[30,0,["suggestedRecipientsDisplayCount"]]],null]],null]],null],null,[[[1,"      "],[8,[39,10],null,[["@viewData","@actor","@impressionTrackingHandler","@interactionTrackingHandler","@messageRecommendation","@isFeedContext"],[[30,3],[30,0,["msgOverlayService","contextActor"]],[28,[37,11],[[30,0,["contextualRecommandationCardImpressionTracking"]],[30,3],[30,4]],null],[28,[37,11],[[30,0,["contextualRecommandationCardInteractionTracking"]],[30,3],"EXPAND"],null],[28,[37,11],[[30,0,["messageRecommendation"]],[30,3]],null],[30,0,["isFeedContext"]]]],null],[1,"\\n"]],[3,4]],null],[1,"  "],[13],[1,"\\n"],[13]],["@classNames","@viewData","recommendationsCardViewData","index"],false,["if","on","msg-facepile-grid@facepile-presenter","t","global-helpers@name","hue-web-icons@icon","global-helpers@eq","each","-track-array","global-helpers@slice","msg-overlay@recommendation-card-presenter","fn"]]',moduleName:"msg-overlay/components/contextual-recommendation-list-presenter.hbs",isStrictMode:!1}),{OVERLAY:{CONTEXT_TYPES:{FEED_CONTEXT:_,PROFILE_CONTEXT:w}}}=u.default
let C=(p=(0,l.inject)("tracking"),g=(0,l.inject)("msg-overlay-manager@msg-overlay-manager"),b=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"tracking",h,this);(0,t.default)(this,"msgOverlayService",v,this);(0,t.default)(this,"showRemainingSuggestions",f,this)}get isFeedContext(){return this.msgOverlayService.contextType===_}get isProfileContext(){return this.msgOverlayService.contextType===w}get suggestedRecipientsDisplayCount(){return this.showRemainingSuggestions?this.args.viewData.suggestedRecipientsLength:0}toggleRemainingSuggestedRecipients(){this.showRemainingSuggestions=!this.showRemainingSuggestions}messageRecommendation(e){this.args.openNewConversation({recipients:e.recipientProfile,messageActions:{afterSendTracking:()=>this.contextualRecommandationCardInteractionTracking(e,"MESSAGE",{controlUrn:this.tracking.generateControlUrn("overlay.message_recommendation")})}})}contextualRecommandationCardInteractionTracking(e,t,n){let{controlUrn:i}=n,a={}
this.isDestroyed||(a={name:"MessagingRecommendationActionEvent",body:{actionCategory:t,controlUrn:i,recommendationTrackingId:e.trackingId,usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions)}})
return a}contextualRecommandationCardImpressionTracking(e,t,n){let{duration:i,visibleTime:a}=n
return{name:"MessagingRecommendationImpressionEvent",body:{recommendedEntity:{recommendedEntityUrn:e.profileObjectUrn,recommendationTrackingId:e.trackingId,referenceEntityTrackingObject:{objectUrn:this.msgOverlayService.contextEntityUrn,trackingId:e.trackingId},listPosition:{index:t},usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions),visibleTime:a,duration:i}}}}},h=(0,i.default)(b.prototype,"tracking",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,i.default)(b.prototype,"msgOverlayService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,i.default)(b.prototype,"showRemainingSuggestions",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(b.prototype,"toggleRemainingSuggestedRecipients",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"toggleRemainingSuggestedRecipients"),b.prototype),(0,i.default)(b.prototype,"messageRecommendation",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"messageRecommendation"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardInteractionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardInteractionTracking"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardImpressionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardImpressionTracking"),b.prototype),b)
e.default=C;(0,o.setComponentTemplate)(y,C)}))
define("msg-overlay/components/conversation-bubble-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/classPrivateFieldSet","@babel/runtime/helpers/esm/classPrivateFieldGet","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@ember/debug","@ember/runloop","@ember/service","ember-batcher","ember-lifeline","@ember/object","@glimmer/component","@glimmer/tracking","global-utils/utils/is-browser","msg-shared/utils/custom-tracking","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/constants","urn-utils","msg-data/utils/msg-reactions-helper","msg-shared/utils/document-is-hidden","global-utils/utils/keyboard-utils","global-utils/utils/a11y-focus-element","msg-shared/utils/get-participant-presence-statuses","msg-overlay/viewdata/sdk-conversation-bubble-viewdata","msg-shared/utils/view-data-helpers","data-layer/utils/profile/get-profile","msg-shared/utils/sdk-view-data-helpers"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g,b,h,v,f,y,_,w,C,M,S,O,k,D,x,I,P,R){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var E,T,N,A,j,z,B,U,L,F,V,q,Y,K,H,W,G,J,X,$,Q,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue,de,me,pe,ge,be
const he=(0,l.createTemplateFactory)({id:"gjyYWhz1",block:'[[[11,0],[16,1,[29,[[30,1,["id"]]]]],[24,"data-feedback-redacted",""],[24,"tabindex","-1"],[16,0,[29,["msg-convo-wrapper msg-overlay-conversation-bubble msg-overlay-conversation-bubble--default-inactive ml4\\n    ",[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble--is-compose"],"\\n    ",[52,[30,1,["isActive"]],"msg-overlay-conversation-bubble--is-active"],"\\n    ",[52,[30,1,["isMinimized"]],"msg-overlay-conversation-bubble--is-minimized"],"\\n    ",[52,[30,1,["isJumbo"]],"msg-overlay-conversation-bubble--jumbo","msg-overlay-conversation-bubble--petite"]]]],[24,"role","dialog"],[16,"aria-label",[28,[37,1],["a11y_message_dialog","msg-overlay/components/conversation-bubble-feature"],null]],[4,[38,2],["keyup",[30,0,["handlekeyUp"]]],null],[4,[38,2],["keydown",[30,0,["handlekeyDown"]]],null],[4,[38,3],[[30,0,["handleDidInsert"]]],null],[4,[38,4],[[30,0,["impressionEventPayload"]]],[["routeName","currentRoute"],[[28,[37,5],[[53,"outletState"],"render.name"],null],[28,[37,5],[[53,"outletState"],"render"],null]]]],[4,[38,7],null,null],[12],[1,"\\n  "],[8,[39,8],null,[["@controlUrn","@referringModuleKey","@recipientUrns","@messageComposeFlowTrackingId","@sourceType"],[[30,1,["entryPointData","controlUrn"]],[30,1,["entryPointData","referringModuleKey"]],[30,1,["entryPointData","recipientUrns"]],[30,1,["entryPointData","messageComposeFlowTrackingId"]],"OVERLAY"]],null],[1,"\\n"],[1,"\\n"],[1,"  "],[8,[39,9],null,[["@hasBadge","@toggleMinimize","@bubble","@conversation","@messageRecipients","@isCompanySender","@presenceStatus","@headerReactionNotification","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],[[30,0,["hasBadge"]],[30,0,["toggleMinimize"]],[30,1],[30,0,["conversation"]],[30,1,["messageRecipients"]],[30,0,["isCompanySender"]],[30,0,["presenceStatus"]],[30,0,["headerReactionNotification"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["toggleShowRenameConversation"]],[30,0,["enableReportingSponsoredConversation"]],[30,0,["toggleConversationMute"]],[30,0,["trackingModuleName"]],[30,0,["actionTrackingPrefix"]],[30,0,["showVideoMeetingButtonInHeader"]],[30,0,["updateMessageCompose"]],[30,0,["toggleJumboSize"]],[30,0,["handleCloseBubble"]]]],null],[1,"\\n"],[1,"  "],[11,0],[16,0,[29,["msg-overlay-conversation-bubble__content-wrapper relative display-flex flex-column\\n      ",[52,[30,0,["showRenameConversationForm"]]," msg-overlay-conversation-bubble__content-wrapper--disabled"]]]],[4,[38,2],["mouseup",[30,0,["onActive"]]],null],[4,[38,2],["focusin",[30,0,["onActive"]]],null],[12],[1,"\\n"],[41,[30,1,["isDeprecatedLinkToJoin"]],[[[1,"      "],[10,0],[14,0,"display-flex flex-column align-items-center full-height pt7"],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-conversation-bubble__link-to-join-deprecation-illustration"],[12],[13],[1,"\\n        "],[10,0],[14,0,"mt4 ph6 t-14 text-align-center"],[12],[1,[28,[35,1],["i18n_link_to_join_deprecated_text","msg-overlay/components/conversation-bubble-feature"],null]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","isSponsoredConversation"]],[[[1,"        "],[8,[39,10],null,[["@viewData","@renderThread","@isOverlay"],[[30,0,["viewData","sponsoredConversationThreadViewData"]],[30,0,["viewData","sponsoredConversationThreadViewData","conversation"]],true]],null],[1,"\\n"]],[]],[[[41,[30,0,["viewData","isSponsoredInMail"]],[[[1,"        "],[8,[39,11],null,[["@viewData","@actionTrackingPrefix","@isCompanySender"],[[30,0,["viewData","spinmailThreadViewData"]],[30,0,["actionTrackingPrefix"]],[30,0,["isCompanySender"]]]],null],[1,"\\n"]],[]],[[[1,"        "],[8,[39,12],null,[["@actionTrackingPrefix","@addParticipantsPageKey","@bubbleId","@composeModuleKey","@composeToNonConnection","@composeViewContext","@conversation","@conversationDetailModuleKey","@customTrackingObject","@customPlaceholderText","@didSubmitMessage","@dragAndDropTrackingKeys","@fileUploadControlName","@forwardedEvent","@handleSuccessfulDiscardRequest","@hasDraft","@setHasDraft","@hasPrefilledConversationName","@imagePasteControlName","@imageUploadControlName","@invitationUrn","@isInMailCompose","@isNew","@isOpenedFromMsgButton","@isOriginalSize","@isOverlay","@messageContext","@messageActions","@messageRecipients","@msgAdapterOptions","@entryPointData","@muteConversationControlName","@mutePageKey","@openConversation","@prefilledAttachments","@prefilledMessage","@quickRepliesUseCase","@renamePageKey","@sendMessageControlName","@showRenameConversationForm","@subject","@targetUrl","@toggleShowRenameConversation","@update","@smpContent","@is1on1Compose","@recipientSuggestionEnabled","@setFocusToRenameConversationForm","@showPremiumUpsell","@isJumboBubble","@shouldShowExpandedTypeahead","@contextWidth","@onConversationFetched","@recipientsChanged","@contextByRecipients","@conversationName","@inmailReplyDeepLink","@messageComposeFlowTrackingId","@uiSenderContext"],[[30,0,["CONTROL_NAMES","OVERLAY_PREFIX"]],"flagship3_messaging_overlay_participant_detail_screen_displayed",[30,1,["id"]],[30,0,["MODULE_KEYS","OVERLAY_COMPOSE"]],[30,0,["composeToNonConnection"]],[30,0,["composeViewContext"]],[30,0,["conversation"]],[30,0,["MODULE_KEYS","OVERLAY_CONVERSATION_DETAIL"]],[30,1,["trackingObject"]],[30,1,["placeholderText"]],[30,0,["didSubmitMessage"]],[30,0,["dragAndDropTrackingKeys"]],[30,0,["CONTROL_NAMES","OVERLAY","FILE_UPLOAD"]],[30,1,["forwardedEvent"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,1,["hasDraft"]],[30,0,["setHasDraft"]],[30,1,["groupConversationName"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_PASTE"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_UPLOAD"]],[30,1,["invitationUrn"]],[30,1,["isInMailCompose"]],[30,1,["isNew"]],[30,1,["isOpenedFromMsgButton"]],[28,[37,13],[[30,1,["isJumbo"]]],null],true,[30,1,["messageContext"]],[30,1,["messageActions"]],[30,1,["messageRecipients"]],[30,1,["msgAdapterOptions"]],[30,1,["entryPointData"]],[30,0,["CONTROL_NAMES","OVERLAY","MUTE"]],"flagship3_messaging_overlay_conversation_window_muted.page",[30,0,["openConversation"]],[30,1,["attachments"]],[30,1,["message"]],"QUICK_REPLY_OVERLAY","flagship3_messaging_overlay_conversation_window_rename.page",[30,0,["CONTROL_NAMES","OVERLAY","SEND"]],[30,0,["showRenameConversationForm"]],[30,1,["subject"]],[30,1,["targetUrl"]],[30,0,["toggleShowRenameConversation"]],[30,1,["update"]],[30,1,["smpContent"]],[30,1,["is1on1Compose"]],true,[30,0,["setFocusToRenameConversationForm"]],[30,1,["showPremiumUpsell"]],[30,1,["isJumbo"]],[30,0,["shouldShowExpandedTypeahead"]],[30,0,["width"]],[30,0,["onConversationFetched"]],[30,0,["recipientsChanged"]],[30,0,["contextByRecipients"]],[30,1,["groupConversationName"]],[30,1,["inmailReplyDeepLink"]],[30,2],[30,1,["uiSenderContext"]]]],null],[1,"\\n      "]],[]]]],[]]]],[]]],[1,"  "],[13],[1,"\\n\\n  "],[8,[39,14],null,[["@isOpen","@title","@content","@primaryActionText","@secondaryActionText","@onPrimary","@onSecondary","@onEscape"],[[30,0,["showMessageDiscardModal"]],[28,[37,1],["i18n_discard_message","msg-overlay/components/conversation-bubble-feature"],null],[28,[37,1],["i18n_discard_body","msg-overlay/components/conversation-bubble-feature"],null],[28,[37,1],["i18n_discard","msg-overlay/components/conversation-bubble-feature"],null],[28,[37,1],["i18n_cancel","msg-overlay/components/conversation-bubble-feature"],null],[30,0,["closeBubble"]],[30,0,["closeDiscardModal"]],[30,0,["closeDiscardModal"]]]],null],[1,"\\n"],[13]],["@bubble","@messageComposeFlowTrackingId"],false,["if","t","on","did-insert","ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","msg-shared@block-scrolling","message-button@mcie-tracking-beacon","msg-overlay@conversation-bubble-header-feature","msg-spinmail@sponsored-conversation-thread-feature","msg-spinmail@spinmail-thread-presenter","msg-ui@compose-feature","global-helpers@not","artdeco-modal@artdeco-confirmation-dialog"]]',moduleName:"msg-overlay/components/conversation-bubble-feature.hbs",isStrictMode:!1}),{ACTION_TYPES:ve,CONTROL_NAMES:fe,IMPRESSION_KEYS:{CONVERSATION_DETAIL_IMPRESSION:ye,DISPLAY_ITEM_TYPE:_e},KEYCODES:{ESC:we},MODULE_KEYS:Ce,OVERLAY:{BUBBLE_ACTIONS:{TOGGLE_JUMBO:Me,TOGGLE_MINIMIZED:Se}},PAGEVIEW_KEYS:Oe,ATTACHMENT_DRAG_AND_DROP_TRACKING_KEYS:ke}=w.default,De=".msg-form__contenteditable"
let xe=(E=(0,m.inject)("i18n"),T=(0,m.inject)("lix"),N=(0,m.inject)("profile-services@identity-store"),A=(0,m.inject)("msg-data@data-manager"),j=(0,m.inject)("msg-overlay-manager@msg-overlay-manager"),z=(0,m.inject)("rum"),B=(0,m.inject)("jet"),U=(0,m.inject)("tracking"),L=(0,m.inject)("persistent-toast-manager@persistent-toast-manager"),F=(0,m.inject)("authentication@authenticated-user"),V=(0,m.inject)("presence@presence-api-dash"),q=(0,m.inject)("msg-ui@update-message-compose"),Y=(0,m.inject)("store-shim"),K=(be=new WeakMap,class extends h.default{get conversation(){this.conversationUrn
return this.msgOverlayManager.getConversationFromBubble(this.args.bubble)}onConversationUpdate(e){this.conversationUrn=e}get hasBadge(){return this.args.bubble.hasUnseenMessages&&!this.msgOverlayManager.forcedMinimizedAtRoute&&this.viewData.isUnread}get isCompanySender(){return this.viewData.isCompanyProfile}get headerReactionNotification(){const{reactionNotification:e}=this.msgDataManager.messageReactionsHelper,{conversation:t}=this.args.bubble
if(e&&t&&(0,M.shouldDisplayReactionNotificationInHeader)(e.messageEvent,this.viewData.conversationId,(0,a.default)(this,be),this.authenticatedUser))return e}get presenceStatus(){const{participantUrn:e}=this.viewData
if(e)return this.presenceAPI.getPresenceStatus(this.viewData.participantUrn)}get showVideoMeetingButtonInHeader(){var e,t
return!(null!==(e=this.args)&&void 0!==e&&null!==(t=e.bubble)&&void 0!==t&&t.isMinimized)&&this.conversation&&this.viewData.isVideoMeetingEnabled&&!this.isCompanySender}get viewData(){var e
return new x.default({conversation:this.conversation,msgDataManager:this.msgDataManager,authenticatedUserProfile:null===(e=this.authenticatedUser.miniProfile)||void 0===e?void 0:e.content,presenceAPI:this.presenceAPI,messageRecipients:this.args.bubble.messageRecipients,lix:this.lix})}_fetchAndSetComposeContext(e,t,n){return this.msgDataManager.fetchComposeContext({recipients:e,composeOptionType:t,context:n}).then((e=>{if(!this.isDestroying){this.composeViewContext=e
n&&("MESSAGE_REQUEST"===t||"HIGH_INTENT"===t)&&(0,b.set)(this.args.bubble,"messageContext",{contextEntityUrn:n,contextText:e.contextText,composeOptionType:t})}}))}constructor(){var e,i,a,o,r,s
super(...arguments);(0,t.default)(this,"i18n",H,this);(0,t.default)(this,"lix",W,this);(0,t.default)(this,"identityStore",G,this);(0,t.default)(this,"msgDataManager",J,this);(0,t.default)(this,"msgOverlayManager",X,this);(0,t.default)(this,"rum",$,this);(0,t.default)(this,"jet",Q,this);(0,t.default)(this,"tracking",Z,this);(0,t.default)(this,"persistentToastManager",ee,this);(0,t.default)(this,"authenticatedUser",te,this);(0,t.default)(this,"presenceAPI",ne,this);(0,t.default)(this,"updateMessageComposeService",ie,this);(0,t.default)(this,"storeShim",ae,this);(0,n.default)(this,"CONTROL_NAMES",fe);(0,n.default)(this,"MODULE_KEYS",Ce);(0,n.default)(this,"actionTrackingPrefix",fe.OVERLAY_PREFIX);(0,n.default)(this,"trackingModuleName",Ce.OVERLAY_CONVERSATION_DETAIL);(0,t.default)(this,"composeViewContext",oe,this);(0,t.default)(this,"enableReportingSponsoredConversation",re,this);(0,t.default)(this,"messageIndexToBeAnchored",se,this);(0,t.default)(this,"shouldShowExpandedTypeahead",le,this);(0,t.default)(this,"showMessageDiscardModal",ce,this);(0,t.default)(this,"showRenameConversationForm",ue,this);(0,t.default)(this,"width",de,this);(0,t.default)(this,"contextByRecipients",me,this);(0,t.default)(this,"setFocusToRenameConversationForm",pe,this)
be.set(this,{writable:!0,value:void 0});(0,n.default)(this,"dragAndDropTrackingKeys",ke.OVERLAY);(0,n.default)(this,"shouldProcessHeaderFocusEvents",!1);(0,t.default)(this,"conversationUrn",ge,this)
this.conversationEntryTime||(this.conversationEntryTime=Date.now())
const{conversation:l}=this.args.bubble
l&&null!=l&&l.entityUrn&&this.msgDataManager.setConversationAsActive(l);(0,b.set)(this,"enableReportingSponsoredConversation",this.viewData.enableReportingSponsoredConversation)
if(void 0===this.args.bubble.isJumbo){const{isSponsoredInMail:e,isSponsoredConversation:t,events:n}=this.viewData;(0,b.set)(this.args.bubble,"isJumbo",this.args.bubble.isInMail||this.args.bubble.isInMailCompose||e||t&&1===n.length)}let c,u,d
if(l&&!this.args.bubble.isNew){c=this.viewData.participantUrns
u="REPLY"
d=this.viewData.hostConversationUrn}const{messageRecipients:m,composeOptionType:h}=this.args.bubble,v=this.args.bubble.context||this.args.bubble.invitationUrn||(null===(e=this.args.bubble.messageContext)||void 0===e?void 0:e.contextEntityUrn)||(null===(i=this.args.bubble.inMailComposeViewContext)||void 0===i?void 0:i.contextEntityUrn)||(null===(a=this.args.bubble.msgAdapterOptions)||void 0===a?void 0:a.jobApplication)||(null===(o=this.args.bubble.msgAdapterOptions)||void 0===o?void 0:o.groupUrn)
if((!l||this.args.bubble.isNew)&&null!=m&&m.length){c=this.viewData.recipientUrns
u=h||(null!=v&&v.toLowerCase().includes("group")?"MESSAGE_REQUEST":null!=v&&v.toLowerCase().includes("jobapplication")?"CONNECTION_MESSAGE":this.args.bubble.isInMailCompose?"PREMIUM_INMAIL":"CONNECTION_MESSAGE")
d=v}const y=this.args.bubble.isNew&&((null==m?void 0:m.length)||h),_=!this.args.bubble.isNew
null!==(r=this.args.bubble)&&void 0!==r&&null!==(s=r.entryPointData)&&void 0!==s&&s.composeOptionOverride||!y&&!_||(this.composeViewContext=this._fetchAndSetComposeContext(c,u,d))
if(f.default){(0,g.addEventListener)(this,window,"focus",(()=>{(0,p.readDOM)((()=>{this.shouldProcessHeaderFocusEvents=!0}))}));(0,g.addEventListener)(this,window,"blur",(()=>{this.shouldProcessHeaderFocusEvents=!1}))}}impressionEventPayload(e){var t
let{visibleTime:n,duration:i}=e
const a=this.args.bubble.isNew?Ce.OVERLAY_COMPOSE:Ce.OVERLAY_CONVERSATION_DETAIL
let o=this.viewData.recipientObjectUrns
o=null!==(t=o)&&void 0!==t&&t.length?o:null
return{name:ye,body:{moduleKey:a,participantUrns:o,conversation:{objectUrn:"",trackingId:(0,_.generateTrackingId)()},displayItem:{type:_e.MESSAGE_COMPOSE,visibleTime:n,duration:i,trackingObject:{objectUrn:"",trackingId:(0,_.generateTrackingId)()}}}}}handleDidInsert(e){this._element=e;(0,i.default)(this,be,e.querySelector(".msg-s-message-list"))
if((0,S.default)())this.args.bubble.isMinimized||(this.isPageViewEventPending=!0)
else{this._fireBubblePVE()
this.shouldProcessHeaderFocusEvents=!0}this._handleInitialFocus();(0,g.addEventListener)(this,this._element,"transitionend",(e=>{"width"===e.propertyName&&(0,p.readDOM)((()=>{this.isDestroying||(this.width=this._element.offsetWidth)}))}))
if(f.default){(0,g.addEventListener)(this,document,"mousedown",(e=>{this._element&&!this._element.contains(e.target)&&this._updateActiveState(!1)}));(0,g.addEventListener)(this,window,"visibilitychange",this._handleVisibilityChange.bind(this))
this.lix.getTreatmentIsEnabled("voyager.web.messaging-consistent-discard-draft-dialog")&&(0,g.addEventListener)(this,window,"beforeunload",(e=>{if(this.args.bubble.hasDraft){this.tracking.fireInteractionEvent("overlay.before_discard_draft")
e.preventDefault();(e||window.event).returnValue=!0
return!0}}))}}_handleInitialFocus(){let e
this.args.bubble.focusInputOnInit&&(e=this.viewData.isConversationWithAdvertiser?this._element.querySelector(".msg-overlay-bubble-header"):this._element.querySelector(this.args.bubble.isInMailCompose?".msg-form__subject input":De)||this._element.querySelector(".msg-overlay-bubble-header__title"))
if(e){e.focus()
this.onActive()}}_handleVisibilityChange(){if(!(0,S.default)()&&this.isPageViewEventPending){this._fireBubblePVE()
this.isPageViewEventPending=!1}}_updateActiveState(e){(0,b.set)(this.args.bubble,"isActive",e)}handlekeyUp(e){e.keyCode===we&&"false"!==e.target.getAttribute("aria-hidden")&&this.handleCloseBubble()}handlekeyDown(e){var t
const n=null===(t=document.querySelector(`#${this.args.bubble.id} .msg-form__send-button`))||void 0===t?void 0:t.disabled,i=document.querySelector(".msg-gai-draft-intents-hoverable-presenter__trigger"),a=this.args.bubble.isInMailCompose&&(document.activeElement.classList.contains("emoji-hoverable-trigger")&&n&&!i||document.activeElement.classList.contains("msg-gai-draft-intents-hoverable-presenter__trigger")&&n||document.activeElement.classList.contains("msg-form__send-button")||document.activeElement.classList.contains("artdeco-button--premium"))
if((0,O.isTabKey)(e)&&(document.activeElement.classList.contains("msg-form__send-toggle")||a)){(0,k.default)(this,`#${this.args.bubble.id}`)
e.preventDefault()}}_focusConversation(){if(f.default&&window.getSelection().toString())return
let e
e=this.viewData.isConversationWithAdvertiser?".msg-overlay-bubble-header":De
const t=this._element.querySelector(e)
t&&t.focus()}_showSuccessToast(e){const t=this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble-feature",e)([])
this.persistentToastManager.success({message:t})}onActive(){this._updateActiveState(!0)
this.msgOverlayManager.markConversationAsRead(this.args.bubble)}handleCloseBubble(){if(this.args.bubble.hasDraft){this.showMessageDiscardModal=!0
this.tracking.firePageViewEvent("flagship3_messaging_compose_exit_new_conversation")}else{this.args.closeBubble()
if(this.conversation){const{conversationUrn:e,inboxType:t,sponsoredCreativeUrn:n}=this.viewData
if(e&&t){let i="OTHER"
"PRIMARY"===t?i="PRIMARY_INBOX":"SECONDARY"===t&&(i="SECONDARY_INBOX")
const a={conversationUrn:e,inboxType:i,origin:"WEB_OVERLAY",conversationEntryTime:this.conversationEntryTime,conversationExitTime:Date.now()}
this.tracking.fireTrackingPayload("ConversationDwellEvent",a)
if((0,R.canShowCsAdMovementToast)(this.msgDataManager,t,n)){const e=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_message_moved_to_other")()
this.persistentToastManager.success({message:e})
this.msgDataManager.removeConversationStarterAdPreview()}}}}(0,d.later)((()=>{var e,t
return null===(e=this.args.bubble.messageActions)||void 0===e||null===(t=e.afterCloseBubble)||void 0===t?void 0:t.call(e)}),1)}toggleJumboSize(){this.msgOverlayManager.resizeBubble(this.args.bubble,Me);(0,b.set)(this.args.bubble,"isJumbo",!this.args.bubble.isJumbo)
this.shouldShowExpandedTypeahead=this.args.bubble.isJumbo&&this.args.bubble.isNew
this.msgOverlayManager.syncCachedConvos()}toggleMinimize(e){var t
if(null===(t=e.target)||void 0===t||!t.closest(".msg-overlay-bubble-header__controls")){this.msgOverlayManager.resizeBubble(this.args.bubble,Se)
this.msgOverlayManager.syncCachedConvos()
if(this.args.bubble.isMinimized){this.args.bubble.hasUnseenMessages&&this.msgOverlayManager.markConversationAsRead(this.args.bubble);(0,g.runTask)(this,(()=>{this._focusConversation()}))
this._fireBubblePVE()}(0,g.runTask)(this,(()=>{(0,b.set)(this.args.bubble,"isMinimized",!this.args.bubble.isMinimized)
this._updateActiveState(!this.args.bubble.isMinimized)}))}}toggleShowRenameConversation(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
if(this.viewData.isGroupChat){this.setFocusToRenameConversationForm=!this.showRenameConversationForm&&e
this.showRenameConversationForm=!this.showRenameConversationForm}}openConversation(e){this.msgDataManager.fetchConversation(e).then((t=>{if(!(0,c.isDestroying)(this)&&t){this.onConversationFetched(t,e,!1);(0,d.scheduleOnce)("afterRender",this,this._handleInitialFocus)}}))}openInMailCompose(e,t,n){(0,P.getProfileById)(this.storeShim,e,"com.linkedin.voyager.dash.deco.identity.profile.MiniProfile").then((e=>{if(!this.isDestroying){(0,b.setProperties)(this.args.bubble,{composeOptionType:"PREMIUM_INMAIL",isInMailCompose:!0,isJumbo:!t,isOpenedFromMsgButton:!0,messageRecipients:e?[e]:void 0,showPremiumUpsell:t,targetUrl:n});(0,d.scheduleOnce)("afterRender",this,this._handleInitialFocus)}}))}composeToNonConnection(e,t){var n,i,a,o
let{composeOption:r={},upsellContextUrn:s}=t
const{composeOptionType:l,composeNavigationContext:c}=r
if(c&&"UPSELL"!==l){this.jet.info(new Error("[MSG-67581] composeToNonConnection fetching composeOptions."),["MSG-67581",l],{shouldRethrow:!1})
this._fetchAndSetComposeContext(c.serialize().recipientUrns,l)}switch(l){case"UPSELL":this.openInMailCompose((0,C.extractEntityInfoFromUrn)(s).id,!0,(null===(n=r.composeNavigationContext)||void 0===n?void 0:n.targetUrl)??r.targetUrl)
break
case"PREMIUM_INMAIL":this.openInMailCompose((0,C.extractEntityInfoFromUrn)(null===(i=r.composeNavigationContext)||void 0===i||null===(a=i.recipientUrns)||void 0===a?void 0:a[0]).id)
break
case"REPLY":this.openConversation((0,C.extractEntityInfoFromUrn)(null===(o=r.composeNavigationContext)||void 0===o?void 0:o.existingConversationUrn).id)
break
default:e()}}toggleConversationMute(){const{conversation:e}=this.args.bubble,t=this.viewData.isMuted,n=this.msgDataManager.toggleConversationMute(this.viewData.conversationUrn,!t),i=t?ve.MUTE:ve.UNMUTE
y.default.fireDetailActionEvent({actionType:i,controlName:fe.OVERLAY.MUTE,conversationObjectUrn:this.viewData.conversationBackendUrn,participantUrns:this.viewData.participantTrackingUrns,participantPresenceStatuses:(0,D.getParticipantPresenceStatuses)(e),trackingService:this.tracking})
return n}didSubmitMessage(e){var t,n,i
this.conversationUrn=e.entityUrn;(0,b.setProperties)(this.args.bubble,{message:"",attachments:[],conversation:e,isNew:!1,isInMailCompose:!1,forwardedEvent:void 0,update:null,smpContent:null})
const a=null===(t=this.args)||void 0===t||null===(n=t.bubble)||void 0===n||null===(i=n.messageActions)||void 0===i?void 0:i.afterSendTracking
if(a){const e=a()
this.tracking.fireTrackingPayload(e.name,e.body)}}onConversationFetched(e,t,n){this.msgDataManager.setConversationAsActive(e)
const i=this.args.bubble.isJumbo
this.conversationUrn=e.entityUrn;(0,b.setProperties)(this.args.bubble,{conversation:e,isInMailCompose:!1,isNew:n,isJumbo:e.groupChat})
const{isJumbo:a}=this.args.bubble
a!==i&&!(!1===a&&void 0===i)&&this.msgOverlayManager.resizeBubble(this.args.bubble,"TOGGLE_JUMBO")}recipientsChanged(e,t){this.contextByRecipients=t;(0,b.setProperties)(this.args.bubble,{messageRecipients:e})
this.msgDataManager.getMailbox().then((t=>t.createDraftConversation(e.map((e=>(0,I.getProfileDashUrn)(e)))))).then((n=>{if(!this.isDestroying){(0,b.setProperties)(this.args.bubble,{conversation:n,messageContext:void 0})
this.conversationUrn=n.clientId
if(1===e.length||null!=t&&t.length){var i,a
const n=null!=t&&null!==(i=t[0])&&void 0!==i&&i.contextEntityUrn.includes("company")?"MESSAGE_REQUEST":"CONNECTION_MESSAGE"
this._fetchAndSetComposeContext(e.map((e=>e.entityUrn)),n,null==t||null===(a=t[0])||void 0===a?void 0:a.contextEntityUrn)}}}))}updateMessageCompose(e){let{body:t}=e
this.updateMessageComposeService.triggerUpdateMessageCompose({bubbleId:this.args.bubble.id,isOverlay:!0,messageText:t})}_fireBubblePVE(){this.args.bubble.isMinimized||this.tracking.firePageViewEvent(Oe.OVERLAY_CONVO)}setHasDraft(e){(0,b.set)(this.args.bubble,"hasDraft",e)}handleSuccessfulDiscardRequest(){var e,t
const{bubble:n}=this.args,i=n.conversation?n.conversation.entityUrn:n.id
this.msgOverlayManager.closeBubbleByConversationUrnOrBubbleId(i)
null===(e=(t=this.args).handleSuccessfulDiscardRequest)||void 0===e||e.call(t,...arguments)}closeDiscardModal(){(0,b.set)(this,"showMessageDiscardModal",!1)
this.tracking.fireInteractionEvent(fe.DISCARD_COMPOSE_MODAL.CANCEL)}closeBubble(){this.tracking.fireInteractionEvent(fe.DISCARD_COMPOSE_MODAL.DISCARD)
this.args.closeBubble()}}),H=(0,o.default)(K.prototype,"i18n",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,o.default)(K.prototype,"lix",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,o.default)(K.prototype,"identityStore",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,o.default)(K.prototype,"msgDataManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,o.default)(K.prototype,"msgOverlayManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,o.default)(K.prototype,"rum",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,o.default)(K.prototype,"jet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,o.default)(K.prototype,"tracking",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,o.default)(K.prototype,"persistentToastManager",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,o.default)(K.prototype,"authenticatedUser",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,o.default)(K.prototype,"presenceAPI",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,o.default)(K.prototype,"updateMessageComposeService",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,o.default)(K.prototype,"storeShim",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,o.default)(K.prototype,"composeViewContext",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,o.default)(K.prototype,"enableReportingSponsoredConversation",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,o.default)(K.prototype,"messageIndexToBeAnchored",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,o.default)(K.prototype,"shouldShowExpandedTypeahead",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,o.default)(K.prototype,"showMessageDiscardModal",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=(0,o.default)(K.prototype,"showRenameConversationForm",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=(0,o.default)(K.prototype,"width",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=(0,o.default)(K.prototype,"contextByRecipients",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=(0,o.default)(K.prototype,"setFocusToRenameConversationForm",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=(0,o.default)(K.prototype,"conversationUrn",[v.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,o.default)(K.prototype,"onConversationUpdate",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"onConversationUpdate"),K.prototype),(0,o.default)(K.prototype,"impressionEventPayload",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"impressionEventPayload"),K.prototype),(0,o.default)(K.prototype,"handleDidInsert",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"handleDidInsert"),K.prototype),(0,o.default)(K.prototype,"handlekeyUp",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"handlekeyUp"),K.prototype),(0,o.default)(K.prototype,"handlekeyDown",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"handlekeyDown"),K.prototype),(0,o.default)(K.prototype,"onActive",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"onActive"),K.prototype),(0,o.default)(K.prototype,"handleCloseBubble",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"handleCloseBubble"),K.prototype),(0,o.default)(K.prototype,"toggleJumboSize",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"toggleJumboSize"),K.prototype),(0,o.default)(K.prototype,"toggleMinimize",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"toggleMinimize"),K.prototype),(0,o.default)(K.prototype,"toggleShowRenameConversation",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"toggleShowRenameConversation"),K.prototype),(0,o.default)(K.prototype,"openConversation",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"openConversation"),K.prototype),(0,o.default)(K.prototype,"composeToNonConnection",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"composeToNonConnection"),K.prototype),(0,o.default)(K.prototype,"toggleConversationMute",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"toggleConversationMute"),K.prototype),(0,o.default)(K.prototype,"didSubmitMessage",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"didSubmitMessage"),K.prototype),(0,o.default)(K.prototype,"onConversationFetched",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"onConversationFetched"),K.prototype),(0,o.default)(K.prototype,"recipientsChanged",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"recipientsChanged"),K.prototype),(0,o.default)(K.prototype,"updateMessageCompose",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"updateMessageCompose"),K.prototype),(0,o.default)(K.prototype,"setHasDraft",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"setHasDraft"),K.prototype),(0,o.default)(K.prototype,"handleSuccessfulDiscardRequest",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"handleSuccessfulDiscardRequest"),K.prototype),(0,o.default)(K.prototype,"closeDiscardModal",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"closeDiscardModal"),K.prototype),(0,o.default)(K.prototype,"closeBubble",[b.action],Object.getOwnPropertyDescriptor(K.prototype,"closeBubble"),K.prototype),K)
e.default=xe;(0,s.setComponentTemplate)(he,xe)}))
define("msg-overlay/components/conversation-bubble-header-controls-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a=(0,n.createTemplateFactory)({id:"DWnXOzzm",block:'[[[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex align-items-center"],[12],[1,"\\n"],[41,[51,[30,1,["isMinimized"]]],[[[41,[30,2,["showDropdownMenu"]],[[[1,"      "],[8,[39,2],null,[["@viewData","@handleSuccessfulDiscardRequest","@showRenameConversationForm","@externalComps","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@addParticipantsPageKey","@isOverlay","@inverse"],[[30,2,["conversationHeaderDropdownMenuViewData"]],[30,3],[28,[37,3],[[30,4],true],null],[28,[37,4],null,[["semaphoreComp"],[[50,"ember-semaphore@ember-semaphore",0,null,null]]]],[30,5],[30,6],[30,7],[30,8],"flagship3_messaging_overlay_participant_detail_screen_displayed",true,[30,9]]],null],[1,"\\n\\n"],[41,[30,10],[[[1,"        "],[8,[39,6],null,[["@bubbleId","@viewData","@ctaSize","@isOverlay","@updateTextarea","@parentRefocusElement","@invertColor"],[[30,1,["id"]],[30,2,["virtualMeetingCtaViewData"]],1,true,[30,11],[28,[37,7],["#",[30,1,["id"]]],null],[30,9]]],null],[1,"\\n"]],[]],null]],[]],null],[1,"    "],[8,[39,8],[[16,"aria-expanded",[52,[30,1,["isJumbo"]],"true","false"]],[4,[38,10],[[52,[30,1,["isJumbo"]],"overlay.shrink_conversation_window","overlay.expand_conversation_window"]],null]],[["@type","@color","@circle","@size","@icon","@class","@click","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],true,1,[52,[30,1,["isJumbo"]],"minimize","maximize"],"msg-overlay-bubble-header__control msg-overlay-conversation-bubble__expand-btn",[30,12],[52,[30,1,["isJumbo"]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_minimize_bubble_new","i18n_minimize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_maximize_bubble_new","i18n_maximize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,8],[[4,[38,10],["overlay.close_conversation_window"],null]],[["@type","@color","@class","@circle","@size","@icon","@click","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],"msg-overlay-bubble-header__control",true,1,"close",[30,13],[28,[37,9],[[52,[30,1,["isNew"]],"a11y_close_convo_new","a11y_close_convo"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[52,[30,2,["conversationName"]],[30,2,["conversationName"]],[28,[37,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]]]]],null],[1,"\\n"],[13]],["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@hasBadge","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],false,["unless","if","msg-shared-modals@conversation-header-dropdown-menu-presenter","fn","hash","component","msg-ui@virtual-meeting-cta-presenter","concat","artdeco-button@artdeco-button","t","ember-cli-pemberly-tracking@track-interaction"]]',moduleName:"msg-overlay/components/conversation-bubble-header-controls-presenter.hbs",isStrictMode:!1})
var o=(0,t.setComponentTemplate)(a,(0,i.default)())
e.default=o}))
define("msg-overlay/components/conversation-bubble-header-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata","@ember/service"],(function(e,t,n,i,a,o,r,s,l,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var u,d,m,p,g,b,h,v,f,y,_,w,C
const M=(0,r.createTemplateFactory)({id:"Sq3QvDFg",block:'[[[11,"header"],[16,0,[29,["msg-overlay-bubble-header msg-overlay-conversation-bubble-header justify-space-between\\n    ",[52,[30,1,["isInMailCompose"]]," premium-accent-bar"]]]],[24,"tabindex","-1"],[4,[38,1],["click",[30,2]],null],[4,[38,2],[[52,[30,1,["isMinimized"]],"overlay.maximize_conversation_window_bar","overlay.minimize_conversation_window_bar"]],null],[12],[1,"\\n"],[1,"  "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n      ",[52,[30,3],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n\\n"],[1,"  "],[8,[39,3],null,[["@containerClass","@renderIf","@delay","@hideClass"],["align-items-center display-flex",[30,1,["isNew"]],132,"msg-overlay-conversation-bubble-header--fade-out"]],[["default"],[[[[1,"\\n    "],[10,0],[14,0,"flex-grow-1"],[12],[1,"\\n      "],[10,"h2"],[15,0,[29,["msg-overlay-bubble-header__title truncate t-14 t-bold\\n          ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n          pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,0,["shouldRenderConsistentMRTitle"]],[[[1,"          "],[1,[30,0,["defaultTitle"]]],[1,"\\n"]],[]],[[[41,[28,[37,4],[[30,1,["messageContext"]],[30,0,["viewData","messageRecipientId"]]],null],[[[1,"            "],[8,[39,5],null,[["@route","@model","@bubbles"],["profile.common.profile",[30,0,["viewData","messageRecipientId"]],false]],[["default"],[[[[1,"\\n              "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,6],null,[["firstName","lastName","type"],[[30,0,["viewData","messageRecipientFirstName"]],[30,0,["viewData","messageRecipientLastName"]],"full"]]]],[1,"\\n              "],[13],[1,"\\n            "]],[]]]]],[1,"\\n"]],[]],[[[1,"            "],[1,[30,0,["defaultTitle"]]],[1,"\\n"]],[]]]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isNew"]]],[[[1,"    "],[10,0],[15,0,[29,[[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble-header--hidden","msg-overlay-conversation-bubble-header--fade-in"],"\\n        display-flex align-items-center flex-grow-1 overflow-hidden"]]],[12],[1,"\\n      "],[8,[39,8],null,[["@classNames","@viewData","@entitySize","@iconSize","@hasParticipants","@isInCoversationBubbleHeader"],["mr1",[30,0,["viewData","conversationEntityViewData"]],1,"small",[30,0,["viewData","hasParticipants"]],true]],null],[1,"\\n\\n"],[1,"      "],[10,0],[14,0,"pl2 flex-grow-1 overflow-hidden"],[12],[1,"\\n        "],[10,"h2"],[15,0,[29,["pl1 msg-overlay-bubble-header__title truncate t-14 t-bold\\n            ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n            pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,0,["viewData","isCompanyRecipient"]],[[[41,[30,1,["isMinimized"]],[[[1,"              "],[1,[28,[35,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]],[[[41,[28,[37,4],[[30,0,["viewData","pageUrl"]],[30,0,["viewData","pageName"]]],null],[[[1,"                "],[8,[39,10],[[24,"target","_self"]],[["@href","@useDefaultLinkBehavior"],[[30,0,["viewData","pageUrl"]],false]],[["default"],[[[[1,"\\n                  "],[10,1],[15,0,[29,["hoverable-link-text\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[28,[35,9],["i18n_page_name","msg-overlay/components/conversation-bubble-header-feature"],[["pageName"],[[30,0,["viewData","pageName"]]]]]],[1,"\\n                  "],[13],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],[[[1,"                "],[8,[39,5],null,[["@route","@model"],["companies.company",[30,0,["viewData","companyRecipientId"]]]],[["default"],[[[[1,"\\n                  "],[10,1],[15,0,[29,["hoverable-link-text\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[28,[35,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                  "],[13],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]]]],[]]]],[]],[[[41,[30,0,["viewData","isGroupChat"]],[[[1,"            "],[1,[52,[30,0,["viewData","conversationName"]],[30,0,["viewData","conversationName"]],[28,[37,9],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNamesWithSelf"]]]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isMinimized"]]],[[[1,"              "],[10,"h3"],[15,0,[29,["t-12 t-normal truncate js-msg-group-participants\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[30,0,["viewData","existingGroupParticipantsTitle"]]],[1,"\\n              "],[13],[1,"\\n"]],[]],null]],[]],[[[41,[30,1,["isMinimized"]],[[[1,"            "],[1,[28,[35,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["shouldRenderStaticName"]],[[[1,"              "],[10,1],[15,0,[29,["t-14 t-bold\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","recipientProfileId"]],[[[1,"              "],[8,[39,5],null,[["@route","@model","@bubbles"],["profile.common.profile",[30,0,["viewData","recipientProfileId"]],false]],[["default"],[[[[1,"\\n                "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                    ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                  "],[1,[28,[35,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "]],[]],null]],[]]],[1,"          "]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n\\n"],[41,[30,4],[[[1,"          "],[10,1],[15,0,[29,["pl1 msg-overlay-conversation-bubble__reaction-header-notification truncate t-12\\n              ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black--light"]]]],[12],[1,"\\n            "],[1,[28,[35,9],["i18n_reaction_notification","msg-overlay/components/conversation-bubble-header-feature"],[["reactorName","emoji"],[[28,[37,6],null,[["firstName","lastName","type"],[[30,0,["viewData","reactorFirstName"]],[30,0,["viewData","reactorLastName"]],"familiar"]]],[30,0,["viewData","reactorEmoji"]]]]]],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","hasPresenceInformation"]],[[[41,[51,[30,1,["isMinimized"]]],[[[41,[30,5,["isOnline"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,9],["i18n_active_now","msg-overlay/components/conversation-bubble-header-feature"],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,5,["isReachable"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[52,[30,5,["lastActiveAt"]],[28,[37,9],["i18n_mobile","msg-overlay/components/conversation-bubble-header-feature"],[["date"],[[28,[37,11],[[30,5,["lastActiveAt"]],"short-ago"],null]]]],[28,[37,9],["i18n_available_on_mobile","msg-overlay/components/conversation-bubble-header-feature"],null]]],[1,"\\n              "],[13],[1,"\\n            "]],[]],null]],[]]]],[]],null],[1,"        "]],[]],null]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,12],null,[["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@hasBadge","@handleCloseBubble","@toggleJumboSize"],[[30,1],[30,0,["viewData","conversationBubbleHeaderControlsViewData"]],[30,6],[30,7],[30,8],[30,9],[30,10],[30,11],[30,12],[30,13],[30,3],[30,14],[30,15]]],null],[1,"\\n\\n"],[13]],["@bubble","@toggleMinimize","@hasBadge","@headerReactionNotification","@presenceStatus","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@handleCloseBubble","@toggleJumboSize"],false,["if","on","ember-cli-pemberly-tracking@track-interaction","msg-ui@delay-remove-from-dom","global-helpers@and","ember-engines@link-to-external","ember-cli-pemberly-i18n@format-name","unless","msg-ui@conversation-entity-presenter","t","app-aware-link@navigation-context-link","global-helpers@time-ago","msg-overlay@conversation-bubble-header-controls-presenter"]]',moduleName:"msg-overlay/components/conversation-bubble-header-feature.hbs",isStrictMode:!1})
let S=(u=(0,c.inject)("i18n"),d=(0,c.inject)("formatter"),m=(0,c.inject)("msg-data@data-manager"),p=(0,c.inject)("authentication@authenticated-user"),g=(0,c.inject)("presence@presence-api-dash"),b=(0,c.inject)("lix"),h=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",v,this);(0,t.default)(this,"formatter",f,this);(0,t.default)(this,"msgDataManager",y,this);(0,t.default)(this,"authenticatedUser",_,this);(0,t.default)(this,"presenceAPI",w,this);(0,t.default)(this,"lix",C,this)}get viewData(){var e
const{conversation:t,messageRecipients:n}=this.args
return new l.default({conversation:t,participantStateMap:this.msgDataManager.mailboxParticipants,messageRecipients:n,headerReactionNotification:this.args.headerReactionNotification,authenticatedUserProfile:null===(e=this.authenticatedUser.miniProfile)||void 0===e?void 0:e.content,msgDataManager:this.msgDataManager,formatter:this.formatter,i18n:this.i18n,presenceAPI:this.presenceAPI})}get shouldRenderStaticName(){const{oneToOneParticipantPublicProfileId:e,creatorProfileViewEnabled:t}=this.viewData
return!(!this.lix.getTreatmentIsEnabled("voyager.web.messaging-project-x")||t)||!!e&&"UNKNOWN"===e}get shouldRenderConsistentMRTitle(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-consistent-MR-title")}get defaultTitle(){const{bubble:e}=this.args
let t="i18n_new_message"
e.isDeprecatedLinkToJoin?t="i18n_join_group_chat":e.isForward?t="i18n_forward_message":e.showGroupEditScreen&&(t="i18n_new_group_conversation")
return t?this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble-header-feature",t)():""}},v=(0,i.default)(h.prototype,"i18n",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,i.default)(h.prototype,"formatter",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,i.default)(h.prototype,"msgDataManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.default)(h.prototype,"authenticatedUser",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,i.default)(h.prototype,"presenceAPI",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,i.default)(h.prototype,"lix",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h)
e.default=S;(0,o.setComponentTemplate)(M,S)}))
define.alias("ember-vector-images/components/custom-image","msg-overlay/components/custom-image")
define.alias("ember-cloud-filepicker/components/dropbox-file-picker","msg-overlay/components/dropbox-file-picker")
define.alias("ember-semaphore/components/ember-semaphore","msg-overlay/components/ember-semaphore")
define.alias("ember-wormhole/components/ember-wormhole","msg-overlay/components/ember-wormhole")
define.alias("ember-cloud-filepicker/components/file-picker","msg-overlay/components/file-picker")
define.alias("ember-finite-scroll/components/finite-scroll","msg-overlay/components/finite-scroll")
define.alias("ember-cloud-filepicker/components/google-drive-file-picker","msg-overlay/components/google-drive-file-picker")
define.alias("ember-highcharts/components/high-charts","msg-overlay/components/high-charts")
define.alias("image-editor/components/image-editor-loader","msg-overlay/components/image-editor-loader")
define.alias("image-editor/components/image-editor","msg-overlay/components/image-editor")
define.alias("ember-finite-scroll/components/item-container","msg-overlay/components/item-container")
define.alias("ember-vector-images/components/lazy-background","msg-overlay/components/lazy-background")
define.alias("ember-vector-images/components/lazy-image","msg-overlay/components/lazy-image")
define.alias("ember-line-clamp/components/line-clamp","msg-overlay/components/line-clamp")
define.alias("artdeco-icons-web/components/linkedin-logo","msg-overlay/components/linkedin-logo")
define("msg-overlay/components/list-bubble-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@ember/runloop","@ember/service","@ember/object","msg-shared/utils/constants","msg-ui/utils/realtime-onboarding","global-utils/utils/is-browser","rsvp","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/get-participant-presence-statuses","ember-lifeline","@glimmer/component","@glimmer/tracking","@ember/object/internals","msg-overlay/viewdata/list-bubble-viewdata","ember-test-waiters","msg-shared/utils/sdk-view-data-helpers","msg-shared/utils/category-filter"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g,b,h,v,f,y,_,w,C,M,S){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var O,k,D,x,I,P,R,E,T,N,A,j,z,B,U,L,F,V,q,Y,K,H,W,G,J,X,$,Q,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue,de,me,pe,ge,be,he,ve,fe,ye,_e,we,Ce,Me,Se,Oe,ke,De,xe,Ie,Pe
const Re=(0,r.createTemplateFactory)({id:"NbM7jiya",block:'[[[11,0],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-list-bubble\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble--is-minimized"],"\\n    ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n    ml4"]]],[4,[38,1],null,null],[4,[38,2],["transitionend",[28,[37,3],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n  "],[10,"header"],[14,0,"msg-overlay-bubble-header"],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n        ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n    "],[8,[39,4],null,null,null],[1,"\\n"],[1,"    "],[11,0],[24,0,"msg-overlay-bubble-header__details flex-row align-items-center ml1"],[4,[38,2],["click",[30,0,["toggleMinimize"]]],null],[4,[38,5],[[30,0,["toggleMinimizeTrackingControlName"]]],null],[12],[1,"\\n      "],[8,[39,6],null,[["@viewData","@size"],[[30,0,["viewData","entityWithPresenceViewData"]],1]],null],[1,"\\n      "],[10,"button"],[14,0,"msg-overlay-bubble-header__button truncate ml2"],[14,4,"button"],[12],[1,"\\n        "],[10,1],[15,0,[29,["truncate t-14 t-bold\\n            ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n          "],[10,1],[14,"aria-hidden","true"],[12],[1,"\\n            "],[1,[28,[35,7],["messaging","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n          "],[13],[1,"\\n          "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n            "],[1,[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n"],[41,[30,0,["hasBadge"]],[[[1,"        "],[10,"mark"],[14,0,"msg-overlay-bubble-header__unread-count"],[14,"aria-hidden","true"],[12],[1,"\\n          "],[10,"abbr"],[15,"title",[28,[37,7],["a11y_unseen_messages","msg-overlay/components/list-bubble-feature"],[["count"],[[30,0,["msgOverlayService","unseenMsgCount"]]]]]],[12],[1,"\\n            "],[1,[30,0,["msgOverlayService","unseenMsgCount"]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["enableRealtimeConnectionStatus"]],[[[1,"        "],[10,0],[15,0,[28,[37,8],["msg-overlay-bubble-header__realtime-indicator ",[30,0,["realtimeStatusClassName"]]],null]],[12],[1,"\\n          "],[8,[39,9],null,[["@type","@size","@name"],["system","medium","flash"]],null],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex"],[12],[1,"\\n"],[1,"      "],[8,[39,10],null,[["@isOpen","@onVisibilityChange","@placement","@justification","@onClick","@shouldTriggerRetainFocus"],[[30,0,["isHeaderDropdownMenuOpen"]],[28,[37,3],[[30,0],"isHeaderDropdownMenuOpen"],null],[30,0,["headerDropdownMenuPlacement"]],"right",[30,0,["stopEvtPropagation"]],false]],[["default"],[[[[1,"\\n        "],[8,[30,1,["dropdown-trigger"]],[[4,[38,5],["overlay.dropdown_menu"],null]],[["@class"],[[29,["artdeco-button artdeco-button--1 artdeco-button--circle ",[52,[30,0,["hasBadge"]],"artdeco-button--primary","artdeco-button--muted artdeco-button--tertiary"]]]]],[["default"],[[[[1,"\\n          "],[8,[39,9],null,[["@a11yText","@type","@size","@name"],[[28,[37,7],["i18n_dropdown_menu_description","msg-overlay/components/list-bubble-feature"],null],"system","small","overflow-web-ios"]],null],[1,"\\n        "]],[]]]]],[1,"\\n        "],[10,0],[14,0,"msg-overlay-bubble-header__dropdown-container"],[12],[1,"\\n          "],[8,[30,1,["dropdown-content"]],null,[["@arrowDir"],["right"]],[["default"],[[[[1,"\\n            "],[10,"ul"],[14,0,"white-space-nowrap"],[12],[1,"\\n"],[41,[30,0,["showManageConversationsButtonInHeaderDropdown"]],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.enter_bulk_selection"],null]],[["@itemSelected","@role"],[[30,0,["enterBulkActionsMode"]],"button"]],[["default"],[[[[1,"\\n                  "],[10,0],[14,0,"display-flex align-items-center"],[12],[1,"\\n                    "],[10,1],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_manage_conversations","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],[[4,[38,5],["overlay.connection_list_settings_from_dropdown"],null]],[["@itemSelected","@role"],[[30,0,["openMessagingSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,7],["i18n_messaging_settings","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n"],[41,[51,[30,0,["enableFocusedInbox"]]],[[[41,[30,0,["showMessageRequestInboxInHeaderDropdown"]],[[[1,"                  "],[8,[39,11],[[4,[38,5],["overlay.overflow_view_message_request_inbox"],null]],[["@itemSelected","@role"],[[30,0,["openMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[35,7],["i18n_message_request_inbox","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n"]],[]],null]],[]],null],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.view_declined_message_requests"],null]],[["@itemSelected","@role"],[[30,0,["openDeclinedMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,7],["i18n_declined_message_requests","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],null,[["@itemSelected","@role"],[[30,0,["openAwayMessageSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[52,[30,0,["msgDataManager","awayMessageSettings","length"]],[28,[37,7],["i18n_update_away_message","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n      "]],[1]]]]],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],["overlay.compose_message"],null]],[["@text","@type","@color","@circle","@size","@icon","@class","@click"],[[28,[37,7],["a11y_compose","msg-overlay/components/list-bubble-feature"],null],[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],true,1,"compose-icon","msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["newConversation"]]]],null],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],[[52,[30,0,["isMinimized"]],"overlay_maximize_inbox","overlay_minimize_inbox"]],null]],[["@type","@color","@text","@circle","@size","@icon","@class","@click"],[[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]],true,1,[52,[30,0,["isMinimized"]],"chevron-up","chevron-down"],"msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["toggleMinimize"]]]],null],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[8,[39,15],null,[["@isOverlay"],[true]],null],[1,"\\n\\n"],[41,[30,0,["shouldRenderContent"]],[[[41,[30,0,["isBulkActionsMode"]],[[[1,"      "],[8,[39,16],null,[["@willExecuteBulkAction","@didExecuteBulkAction","@onExitBulkActionsMode","@isOverlay","@selectedConversationUrns"],[[30,0,["willExecuteBulkAction"]],[30,0,["didExecuteBulkAction"]],[30,0,["onExitBulkActionsMode"]],true,[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"]],[]],null],[1,"\\n    "],[8,[39,17],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange"],[[30,2],[30,3],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]]]],[["default"],[[[[1,"\\n      "],[8,[30,4,["filterSection"]],null,null,[["default"],[[[[1,"\\n        "],[8,[39,18],null,[["@clearFilter","@currentFilter","@trackingPrefix","@disabled","@loadedUnreadConversations"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["loadedUnreadConversations"]]]],null],[1,"\\n      "]],[]]]]],[1,"\\n    "]],[4]]]]],[1,"\\n\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__top-static-area"],[12],[1,"\\n"],[41,[30,0,["showFocusedInboxTabs"]],[[[1,"        "],[8,[39,19],null,[["@currentSelection","@showSecondaryTabBadge","@onPrimaryTabSelect","@onSecondaryTabSelect","@isOverlay"],[[30,0,["inboxType"]],[30,0,["hasUnseenSecondaryConversations"]],[28,[37,20],[[30,0,["switchInboxTab"]],"PRIMARY"],null],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showKindnessReminder"]],[[[1,"        "],[8,[39,21],[[24,0,"msg-overlay-list-bubble__kindness-reminder"]],[["@type","@legoConfig","@text","@primaryActionText","@onImpression","@onDismiss","@onPrimary"],["basic",[30,0,["kindnessReminderLegoConfig"]],[28,[37,7],["i18n_kindness_reminder_text","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_kindness_reminder_learn_more","msg-overlay/components/list-bubble-feature"],null],[30,0,["impressionKindnessReminder"]],[30,0,["onKindnessReminderWidgetDismiss"]],[30,0,["clickKindnessReminder"]]]],null],[1,"\\n"]],[]],null],[1,"\\n      "],[8,[39,22],null,null,null],[1,"\\n\\n"],[41,[51,[30,0,["currentConvosFilter"]]],[[[41,[51,[30,0,["isBulkActionsMode"]]],[[[41,[30,0,["showAwayMessageOnboarding"]],[[[1,"            "],[8,[39,21],null,[["@title","@text","@legoConfig","@onDismiss","@onPrimary","@primaryActionText"],[[28,[37,7],["i18n_away_message_onboarding_title","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_away_message_onboarding_text","msg-overlay/components/list-bubble-feature"],null],[30,0,["awayMessageOnboardingLegoConfig"]],[28,[37,3],[[30,0],"showAwayMessageOnboarding",false],null],[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",true],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[["default"],[[[[1,"\\n              "],[8,[30,5,["leftSection"]],null,null,[["default"],[[[[1,"\\n                "],[8,[39,9],null,[["@type","@size","@name"],["logo","xsmall","linkedin-bug-premium"]],null],[1,"\\n              "]],[]]]]],[1,"\\n            "]],[5]]]]],[1,"\\n"]],[]],null]],[]],null]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[51,[30,0,["showFocusedInboxBanner"]]],[[[1,"      "],[8,[39,23],null,null,null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["inboxDataFetchFailed"]],[[[1,"      "],[10,0],[14,0,"msg-overlay-list-bubble__failed-to-connect-container text-align-center"],[12],[1,"\\n        "],[10,"h3"],[14,0,"t-16 t-black--light t-normal ph3 pb5"],[12],[1,"\\n          "],[1,[28,[35,7],["i18n_failed_connect","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n        "],[13],[1,"\\n        "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@click","@type","@text"],[[30,0,["refetchInboxData"]],"secondary",[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showMarkingAllReadLoader"]],[[[1,"        "],[8,[39,24],[[16,0,[52,[30,0,["currentConvosFilter"]],"full-height justify-center"]]],[["@size","@textPosition","@text","@border"],["xsmall","right",[28,[37,7],["i18n_mark_all_read_progress_text_v2","msg-overlay/components/list-bubble-feature"],null],[52,[28,[37,25],[[30,0,["currentConvosFilter"]]],null],"bottom"]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showInboxLoader"]],[[[1,"        "],[8,[39,24],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["hideConversationsList"]]],[[[1,"        "],[10,"section"],[14,0,"scrollable msg-overlay-list-bubble__content msg-overlay-list-bubble__content--scrollable"],[12],[1,"\\n"],[1,"          "],[11,0],[4,[38,26],null,[["when"],[[30,0,["shouldScrollToTop"]]]]],[12],[13],[1,"\\n"],[1,"          "],[10,0],[14,0,"msg-overlay-list-bubble__default-conversation-container"],[12],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"              "],[8,[39,27],null,[["@trackingKey","@goBack"],["back_to_inbox_from_requests_overlay",[30,0,["backToInboxFromMessageRequestList"]]]],null],[1,"\\n"]],[]],[[[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"              "],[8,[39,27],null,[["@isDeclinedList","@trackingKey","@goBack"],[true,"back_to_message_requests_from_declined_messages_overlay",[30,0,["messageRequestListHeaderOnGoBack"]]]],null],[1,"\\n            "]],[]],null]],[]]],[1,"\\n"],[41,[30,0,["inboxDataLoaded"]],[[[41,[30,0,["shouldShowSecondaryPreviewBanner"]],[[[1,"                "],[10,0],[14,0,"msg-conversation-card msg-ui-focused-inbox-secondary-preview-banner-presenter__secondary-preview-banner-card display-flex"],[12],[1,"\\n                  "],[8,[39,28],null,[["@classNames","@onClicked","@isOverlay"],[[29,["pl2 ",[52,[51,[30,0,["showContextualRecommendations"]]],"mb2"]," mh2 mt2 "]],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showFocusedInboxBanner"]],[[[1,"                "],[8,[39,29],null,[["@isOverlay","@showLoader"],["true",[30,0,["setLoader"]]]],null],[1,"\\n              "]],[]],null]],[]]],[41,[30,0,["showContextualRecommendations"]],[[[1,"                "],[8,[39,30],null,[["@viewData","@openNewConversation","@classNames"],[[30,0,["viewData","contextualRecommendationListViewData"]],[30,2],[29,[[52,[30,0,["shouldShowSecondaryPreviewBanner"]],"mt1","mt2"]," "]]]],null],[1,"\\n"]],[]],null],[1,"\\n              "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                "],[1,[28,[35,7],["i18n_a11y_infinite_scroll","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n              "],[13],[1,"\\n"],[41,[30,0,["showContextualRecommendations"]],[[[41,[51,[30,0,["showMessageRequestBanner"]]],[[[1,"                  "],[10,"header"],[14,0,"msg-overlay-list-bubble__list-header"],[12],[1,"\\n                    "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_messages","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null]],[]],null],[41,[30,0,["showMessageRequestBanner"]],[[[1,"                "],[8,[39,31],null,[["@headingText","@openMessageRequestConversationList","@trackingKey"],[[30,0,["headerText"]],[30,0,["openMessageRequestConversationList"]],"overlay.bundle_view_message_request_inbox"]],null],[1,"\\n"]],[]],null]],[]],null],[1,"\\n            "],[8,[39,32],null,[["@conversations","@showLoadingState","@currentConvosFilter","@hasStrongNetwork","@isBulkActionsMode","@disableBulkActions","@openBubble","@newConversation","@onBulkActionToggle","@selectedConversationUrns","@conversationLength","@showNoMessagesPresenter"],[[30,0,["conversations"]],[30,0,["showLoadingState"]],[30,0,["currentConvosFilter"]],[30,0,["hasStrongNetwork"]],[30,0,["isBulkActionsMode"]],[30,0,["showMessageRequestConversationList"]],[30,0,["openBubbleByConversationUrn"]],[30,0,["newConversation"]],[30,0,["onListBubbleItemClick"]],[30,0,["selectedConversationUrns"]],[30,0,["conversations","length"]],[30,0,["showNoMessagesPresenter"]]]],null],[1,"\\n"],[41,[30,0,["loadMoreError"]],[[[1,"              "],[10,0],[14,0,"p4 mb6"],[12],[1,"\\n                "],[8,[39,33],null,[["@class","@headline","@illustration","@message"],["msg-conversations-container__load-error",[28,[37,7],["i18n_oops","msg-overlay/components/list-bubble-feature"],null],"no-connection-muted",[28,[37,7],["i18n_load_more_error","msg-overlay/components/list-bubble-feature"],null]]],null],[1,"\\n                "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@class","@click","@text","@type"],["js-retry-button block mlA mrA",[30,0,["retryLoadMore"]],[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null],"secondary"]],null],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"              "],[8,[39,34],null,[["@inView","@rootSelector"],[[30,0,["loadMore"]],".msg-overlay-list-bubble__content"]],null],[1,"\\n"]],[]],null],[41,[30,0,["showEndOfInboxPresenter"]],[[[1,"              "],[8,[39,35],null,[["@sectionType"],["INBOX_PYMK_RECOMMENDATION"]],null],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null]],[]]]],[]],null],[1,"\\n"],[41,[30,0,["isMessagingSettingsModalOpen"]],[[[1,"    "],[8,[39,36],null,[["@closeModal"],[[28,[37,3],[[30,0],"isMessagingSettingsModalOpen",false],null]]],null],[1,"\\n"]],[]],null],[41,[30,0,["awayMessageSettingsModalIsOpen"]],[[[1,"    "],[8,[39,37],null,[["@closeModal"],[[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",false],null]]],null],[1,"\\n"]],[]],null],[13]],["dropdown","@newConversation","@openBubble","OverlaySearchFeature","widget"],false,["if","msg-shared@block-scrolling","on","ember-set-helper@set","msg-overlay@presence-onboarding-presenter","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence-presenter","t","concat","hue-web-icons@icon","artdeco-dropdown@artdeco-dropdown","artdeco-dropdown@artdeco-dropdown-item","unless","global-helpers@eq","artdeco-button@artdeco-button","msg-ui@premium-mailboxes","msg-ui@primitives/bulk-actions-panel-presenter","msg-overlay@overlay-search-feature","msg-ui@selected-filter-presenter","msg-ui@focused-inbox-tabs-presenter","fn","msg-ui@kindness-reminder-presenter","msg-ui@away-message-reminder-banner-presenter","msg-ui@harmful-content-detection-presenter","msg-ui@loader","global-helpers@not","global-modifiers@scroll-into-view","msg-ui@message-request-list-header-presenter","msg-ui@focused-inbox-secondary-preview-banner-presenter","msg-ui@focused-inbox-banner-presenter","msg-overlay@contextual-recommendation-list-presenter","msg-ui@inbox-header-with-message-request-presenter","msg-overlay@overlay-conversation-list-feature","artdeco-empty-state@artdeco-empty-state","msg-cross-pillar@visible-beacon","msg-ui@end-of-inbox-presenter","msg-shared-modals@msg-settings-modal-presenter","msg-shared-modals@away-message-settings-modal-presenter"]]',moduleName:"msg-overlay/components/list-bubble-feature.hbs",isStrictMode:!1}),{IMPRESSION_KEYS:{CONVERSATION:Ee},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:Te},MESSAGE_REQUEST_STATUS:{MESSAGE_REQUEST_PENDING:Ne,MESSAGE_REQUEST_DECLINED:Ae},OVERLAY_LS_CONVERSATIONS_FILTER_KEY:je,OVERLAY:{QUALITY_MEMBER_CONNECTIONS_THRESHOLD:ze},OVERLAY_FILTERS_INTERACTION_EVENTS:Be,PAGEVIEW_KEYS:Ue,KINDNESS_REMINDER_LEGO:Le,AWAY_MESSAGE_ONBOARDING_LEGO:Fe,INBOX_TYPES:Ve,MESSAGE_COLLECTION_TYPES:qe}=d.default,Ye=(0,C.buildWaiter)("msg-overlay:list-bubble-feature:load-more")
let Ke=(O=(0,c.inject)("authentication@authenticated-user"),k=(0,c.inject)("global-nav-shared@badge"),D=(0,c.inject)("global-services@clipboard"),x=(0,c.inject)("lix"),I=(0,c.inject)("tracking"),P=(0,c.inject)("i18n"),R=(0,c.inject)("global-services@window"),E=(0,c.inject)("global-services@a11y-notification"),T=(0,c.inject)("heathrow@heathrow"),N=(0,c.inject)("msg-overlay-manager@msg-overlay-manager"),A=(0,c.inject)("global-services@common-time"),j=(0,c.inject)("store-shim"),z=(0,c.inject)("global-services@local-storage"),B=(0,c.inject)("lego@resolver"),U=(0,c.inject)("lego@tracking"),L=(0,c.inject)("msg-shared@messaging-user-settings"),F=(0,c.inject)("msg-data@data-manager"),V=(0,c.inject)("formatter"),q=(0,c.inject)("rum"),Y=class extends f.default{get isMinimized(){return this.msgOverlayService.listBubbleIsMinimized}get shouldRenderContent(){return!this.isMinimized||this.isInMinimizeTransition}get showMessageRequestConversationList(){return this.currentConvosFilter===Ne||this.currentConvosFilter===Ae}get showSearchInput(){return!this.isBulkActionsMode&&(!this.showMessageRequestConversationList||this.enableFocusedInbox)}get showFocusedInboxTabs(){return this.enableFocusedInbox&&(!this.currentConvosFilter||this.currentConvosFilter===Ne||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter)}get showMessageRequestInboxInHeaderDropdown(){return!this.showMessageRequestConversationList}get showManageConversationsButtonInHeaderDropdown(){return!this.showMessageRequestConversationList}get showContextualRecommendations(){return("PRIMARY_INBOX"===this.currentConvosFilter||!this.currentConvosFilter)&&this.msgOverlayService.suggestedRecipients}get toggleMinimizeTrackingControlName(){return this.isMinimized?"overlay.maximize_connection_list_bar":"overlay.minimize_connection_list_bar"}get hideConversationsList(){return"UNREAD"===this.currentConvosFilter&&this.showMarkingAllReadLoader||this.showInboxLoader}get hasBadge(){return this.msgOverlayService.unseenMsgCount>0&&(!this.msgOverlayService.forcedMinimizedAtRoute||this.args.realtimeMsgNotAutoOpened)}get hasStrongNetwork(){return this.numConnections>ze}get showMessageRequestBanner(){return!this.enableFocusedInbox&&this.unreadPendingMessageRequestCount>0&&!this.currentConvosFilter}get headerText(){return this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_message_request_count")([{count:this.unreadPendingMessageRequestCount}])}get unreadPendingMessageRequestCount(){var e
return null===(e=this.msgDataManager.getMailboxState())||void 0===e?void 0:e.unreadCounts[qe.MESSAGE_REQUEST_PENDING]}get showFocusedInboxBanner(){return this.enableFocusedInboxLix&&(!this.currentConvosFilter||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter)&&!this.isBulkActionsMode}get showKindnessReminder(){return!this.kindnessReminderShown&&!this.currentConvosFilter&&!this.isBulkActionsMode}get realtimeStatusClassName(){var e
return(null===(e=this.commonTime.getCommonTimeClient())||void 0===e?void 0:e.connected)?"msg-overlay-bubble-header__realtime-indicator--online":"msg-overlay-bubble-header__realtime-indicator--offline"}get headerDropdownMenuPlacement(){return this.isMinimized?"top":"bottom"}get shouldLoadMoreConversations(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!!e&&(!e.status.loading&&!e.status.fullyLoaded&&!this.loadMoreError)}get showMarkingAllReadLoader(){return this.msgDataManager.progressIndicatorState.markAllReadIndicator&&(!this.currentConvosFilter||"UNREAD"===this.currentConvosFilter)}get conversations(){const e=this.msgDataManager.getTrackedConversations(this.mailboxName)
if(this.lix.getTreatmentIsEnabled("voyager.web.messaging-conversation-starter-ads")){const t=(0,M.getConversationStarterAdPreview)(this.msgDataManager)
return(0,M.generateConversationListWithConversationStarterAdPreview)({conversationStarterAdPreview:t,conversations:e,mailboxName:this.mailboxName,inboxType:this.inboxType})}return e}get loadedUnreadConversations(){var e
return(null===(e=this.conversations)||void 0===e?void 0:e.filter((e=>!e.read)))??[]}get enableRealtimeConnectionStatus(){return this.lix.getTreatmentIsEnabled("voyager.messaging.web.show-realtime-connection-status")}get isCompanyUser(){return this.lix.getTreatmentIsEnabled("voyager.client.staff")}get enableFocusedInboxLix(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-focused-inbox-experience")}get enableFocusedInbox(){return!!this.lix.getTreatmentIsEnabled("voyager.web.messaging-focused-inbox-experience")&&(!this.lix.getTreatmentIsEnabled("voyager.web.messaging-focused-inbox-opt-in")||!!this.msgUserSettings.focusedInboxEnabled)}get hasUnseenSecondaryConversations(){return!!this.enableFocusedInbox&&null!==this.msgDataManager.inboxManager.secondaryPreviewBannerData}get shouldShowSecondaryPreviewBanner(){return this.hasUnseenSecondaryConversations&&this.showFocusedInboxTabs&&"PRIMARY"===this.inboxType}get showLoadingState(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!e||e.status.loading}get viewData(){var e,t
const n=null===(e=this.msgOverlayService)||void 0===e||null===(t=e.suggestedRecipients)||void 0===t?void 0:t.map((e=>e.content||e))
return new w.default({lix:this.lix,suggestedRecipients:n,formatter:this.formatter,authenticatedUserProfile:this.authenticatedUser.miniProfile.content})}get shouldScrollToTop(){const e=this.currentConvosFilter!==this._previousConvosFilter
this._previousConvosFilter=this.currentConvosFilter
return e}get defaultConvosFilter(){let e=this.args.filterFromDeeplink??null
e||(e=this.localStorage.getItem(je))
!e&&this.enableFocusedInbox&&(e="PRIMARY_INBOX")
return e}get currentConvosFilter(){return this.localConvosFilter??this.defaultConvosFilter}get showNoMessagesPresenter(){const e=!this.enableFocusedInbox||this.inboxType===Ve.PRIMARY||this.inboxType===Ve.SECONDARY,t=!this.currentConvosFilter||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter
return e&&t}get showEndOfInboxPresenter(){var e
if(this.showLoadingState||!this.inboxDataLoaded)return!1
if((null===(e=this.conversations)||void 0===e?void 0:e.length)>0)return!1
const t=!this.enableFocusedInbox||this.inboxType===Ve.PRIMARY,n=!this.currentConvosFilter||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter
return t&&n&&this.msgDataManager.isEndOfInboxPYMKEnabled}constructor(){var e
super(...arguments);(0,n.default)(this,"listBubbleId",`list-bubble-${(0,_.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",K,this);(0,t.default)(this,"badging",H,this);(0,t.default)(this,"clipboard",W,this);(0,t.default)(this,"lix",G,this);(0,t.default)(this,"tracking",J,this);(0,t.default)(this,"i18n",X,this);(0,t.default)(this,"windowService",$,this);(0,t.default)(this,"a11yNotification",Q,this);(0,t.default)(this,"heathrow",Z,this);(0,t.default)(this,"msgOverlayService",ee,this);(0,t.default)(this,"commonTime",te,this);(0,t.default)(this,"storeShim",ne,this);(0,t.default)(this,"localStorage",ie,this);(0,t.default)(this,"legoResolver",ae,this);(0,t.default)(this,"legoTracking",oe,this);(0,t.default)(this,"msgUserSettings",re,this);(0,t.default)(this,"msgDataManager",se,this);(0,t.default)(this,"formatter",le,this);(0,t.default)(this,"rum",ce,this);(0,t.default)(this,"mailboxName",ue,this);(0,t.default)(this,"isHeaderDropdownMenuOpen",de,this);(0,t.default)(this,"isMessagingSettingsModalOpen",me,this);(0,t.default)(this,"inboxDataFetchInProgress",pe,this);(0,t.default)(this,"inboxDataLoaded",ge,this);(0,t.default)(this,"inboxDataFetchFailed",be,this);(0,t.default)(this,"loadMoreError",he,this);(0,t.default)(this,"loadMoreInProgress",ve,this);(0,t.default)(this,"numConnections",fe,this);(0,t.default)(this,"awayMessageSettingsModalIsOpen",ye,this);(0,t.default)(this,"selectedConversations",_e,this);(0,t.default)(this,"selectedConversationUrns",we,this);(0,t.default)(this,"isBulkActionsMode",Ce,this);(0,t.default)(this,"searchTerm",Me,this);(0,t.default)(this,"inboxType",Se,this);(0,t.default)(this,"isInMinimizeTransition",Oe,this);(0,t.default)(this,"showAwayMessageOnboarding",ke,this);(0,t.default)(this,"showInboxLoader",De,this);(0,t.default)(this,"upsellCard",xe,this);(0,n.default)(this,"bubblePageKey","d_flagship3_messaging_overlay_connections.page");(0,n.default)(this,"bubbleMinimizeProperty","isMinimized");(0,n.default)(this,"kindnessReminderLegoConfig",Le);(0,n.default)(this,"kindnessReminderHelpCenterLink","/legal/professional-community-policies");(0,n.default)(this,"awayMessageOnboardingLegoConfig",Fe);(0,t.default)(this,"kindnessReminderShown",Ie,this);(0,n.default)(this,"_previousConvosFilter",null);(0,t.default)(this,"localConvosFilter",Pe,this)
new m.default(this.legoResolver,this.legoTracking,this.msgUserSettings,this.storeShim,this.tracking,this.lix).run()
this.mailboxName=this.enableFocusedInbox?"PRIMARY_INBOX":"INBOX"
this.initialConversationLength=null===(e=this.msgDataManager.getMailboxState(this.mailboxName))||void 0===e?void 0:e.conversations.map((e=>e)).length
this.msgUserSettings.onFocusedInboxOptOut(this.refreshSettings)
this.msgDataManager.fetchMessagingPremiumUpsellCard().then((e=>{this.isDestroying||(this.upsellCard=e)}))
this._fetchInboxData(this.defaultConvosFilter)
this.msgDataManager.fetchPremiumFeatureAccess("CAN_ACCESS_AWAY_MESSAGES").then((e=>{this.isDestroying||(this.showAwayMessageOnboarding=e)}))}_fetchInboxData(e){this.inboxDataFetchInProgress=!0
this.inboxDataLoaded=!1
const t=this._loadConversations(e)
return(0,g.hashSettled)({conversations:t}).then((e=>{var t,n
if(this.isDestroying)return
if("rejected"===e.conversations.state){this.inboxDataFetchFailed=!0
this.tracking.firePageViewEvent(Ue.OVERLAY_FAILED_TO_CONNECT)
return(0,g.resolve)()}null===(t=(n=this.args).afterInboxDataFetch)||void 0===t||t.call(n,this.conversations)
return(0,g.resolve)(e)})).then((()=>{if((0,s.isDestroying)(this))return
this.lix.getTreatmentIsEnabled("voyager.web.messaging-conversation-starter-ads")&&this.msgDataManager.fetchConversationStarterAdPreview()
const e=[this.msgDataManager.inboxManager.fetchSecondaryInboxData(),this.msgDataManager.nudgingDataManager.fetchConversationNudges()]
return Promise.all(e)})).finally((()=>{if(!this.isDestroying){this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!0}}))}_loadConversations(e){return e?this.loadConversationsByFilter(e).then((t=>{if(this.isDestroying)return
const n=Ue.OVERLAY_CONVERSATION_FILTERED_LIST[e]
n&&this.tracking.firePageViewEvent(n)
return t})):this.msgDataManager.getMailbox()}switchInboxTab(e){this.inboxType=e
this.isBulkActionsMode=!1
"SECONDARY"===e&&this.msgDataManager.inboxManager.markSecondaryInboxAsSeen()
this.loadConversationsByFilter(`${this.inboxType}_INBOX`)
const t="PRIMARY"===e?"flagship3_messaging_overlay_primary_tab":"flagship3_messaging_overlay_secondary_tab"
this.tracking.firePageViewEvent(t)}refreshSettings(){this.mailboxName="INBOX"
this.refetchInboxData()}loadConversationsByFilter(e){this.isBulkActionsMode=!1
this.inboxDataLoaded=!1
this.inboxDataFetchInProgress=!0
this.localConvosFilter=e
const{mailboxFilter:t,mailboxName:n}=(0,S.default)(e)
this.mailboxName=n
return this.msgDataManager.getMailbox(this.mailboxName,t).then((async e=>{if(!(0,s.isDestroying)(this)){if(0===e.state.conversations.length&&!e.state.status.loading){await e.loadOlderConversations()
if((0,s.isDestroying)(this))return}return(0,g.resolve)(this.msgDataManager.enableDecoratedParticipants?this.msgDataManager.getTrackedConversations(n):e.state.conversations)}})).finally((()=>{if(!this.isDestroying){this.inboxDataLoaded=!0
this.inboxDataFetchInProgress=!1}}))}refetchInboxData(){this.inboxDataFetchFailed=!1
this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!1
this._fetchInboxData("")}_updateMinimizedState(e){(0,v.runTask)(this,(()=>this.msgOverlayService.updateListBubbleMinimizeState(e)))}loadMore(){var e
if(this.loadMoreInProgress)return(0,g.resolve)()
if(0===(null===(e=this.conversations)||void 0===e?void 0:e.length))return(0,g.resolve)()
this.loadMoreInProgress=!0
this.loadMoreError=!1
const t=new g.Promise(((e,t)=>{this.msgDataManager.getMailbox(this.mailboxName).then((e=>e.loadOlderConversations())).then((t=>{(0,s.isDestroying)(this)||e(t)})).catch((e=>{if((0,s.isDestroying)(this))throw e
t(e)}))})),n=Ye.beginAsync()
return t.then((e=>{if((0,s.isDestroying)(this))return
const t=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_a11y_infinite_scroll_conversations")
this.a11yNotification.setTextInLiveRegion(t([{newRecordCount:e}]))
return e})).catch((e=>{if(!this.isDestroying){this.loadMoreError=!0
throw e}})).finally((()=>{Ye.endAsync(n)
this.isDestroying||(this.loadMoreInProgress=!1)}))}newConversation(e,t){var n,i
e&&e.stopPropagation()
null===(n=(i=this.args).newConversation)||void 0===n||n.call(i,t)}retryLoadMore(){this.loadMore()}stopEvtPropagation(e){e&&e.stopPropagation()}toggleMinimize(e){var t
null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)
this.isInMinimizeTransition=!0
if(this.isMinimized){this.badging.getBadgeCount("messaging")>0&&this.badging.fireBadgeInteractionEvent(document.getElementById(this.listBubbleId),"msg-overlay-list-bubble-header","messaging")
this.msgOverlayService.markAllAsSeen()}this.msgOverlayService.toggleListBubbleMinimized()
this.isMinimized||this.tracking.firePageViewEvent(this.bubblePageKey)}openMessageRequestConversationList(){this.loadConversationsByFilter(Ne)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_pending_request_inbox")}backToInboxFromMessageRequestList(){this.loadConversationsByFilter("")
this.tracking.fireInteractionEvent("overlay.back_to_inbox_from_requests")}openDeclinedMessageRequestConversationList(){this.loadConversationsByFilter(Ae)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_declined_request_inbox")}openAwayMessageSettingsModal(e){null==e||e.stopPropagation()
this.awayMessageSettingsModalIsOpen=!0}openMessagingSettingsModal(e){e&&e.stopPropagation()
this.isMessagingSettingsModalOpen=!0}onListBubbleItemClick(e){var t
if(!this.conversations.find((t=>t.entityUrn===e)))return
this._toggleConversationSelected(e)
this.selectedConversations=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>this.selectedConversationUrns.includes(e.entityUrn)))
!this.isBulkActionsMode&&this.selectedConversations.length>0?this.isBulkActionsMode=!0:0===this.selectedConversations.length&&(this.isBulkActionsMode=!1)
const n=this.selectedConversationUrns.includes(e)?"overlay.bulk_select_conversation":"overlay.bulk_unselect_conversation"
this.tracking.fireInteractionEvent(n)}_toggleConversationSelected(e){if(0===this.selectedConversationUrns.length)this.selectedConversationUrns=[e]
else{const t=this.selectedConversationUrns.includes(e)
this.selectedConversationUrns=t?this.selectedConversationUrns.filter((t=>t!==e)):this.selectedConversationUrns.concat(e)}}enterBulkActionsMode(e){e&&e.stopPropagation()
this.isMinimized&&this.toggleMinimize()
this.isBulkActionsMode=!0
this.isHeaderDropdownMenuOpen=!1}onExitBulkActionsMode(){this.selectedConversationUrns=[]
this.selectedConversations=[]
this.isBulkActionsMode=!1}willExecuteBulkAction(){this.isBulkActionsMode=!1}didExecuteBulkAction(e){"delete"===e&&this.selectedConversations.forEach((e=>{this.msgOverlayService.closeBubbleByConversationUrnOrBubbleId(e.entityUrn)}))}applyFilter(e){e?this.localStorage.setItem(je,e):this.localStorage.removeItem(je)
this.loadConversationsByFilter(e).then((()=>{(0,s.isDestroying)(this)||this.tracking.firePageViewEvent(Ue.OVERLAY_CONVERSATION_FILTERED_LIST[e||"ALL"])}))
this.tracking.fireInteractionEvent(Be.SELECT[e||"ALL"],"SHORT_PRESS")}clearFilters(){this.localStorage.removeItem(je)
this.tracking.fireInteractionEvent(Be.DISMISS[this.currentConvosFilter],"SHORT_PRESS")
this.loadConversationsByFilter("")}impressionKindnessReminder(){this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_kindness_banner")}clickKindnessReminder(){this.tracking.fireInteractionEvent("overlay.open_kindness_banner")
if(p.default){const e=this.kindnessReminderHelpCenterLink
if(!e)return
this.windowService.open(e,"_blank")}}onSearchTermChange(e){this.searchTerm=e}createListBubbleItemImpressionEvent(e){return this.isDestroying||this.isDestroyed?[]:{name:Ee,body:{moduleKey:Te,conversations:[{objectUrn:e.backendUrn,trackingId:(0,b.generateTrackingId)()}],participantPresenceStatuses:(0,h.getParticipantPresenceStatuses)(e)}}}onKindnessReminderWidgetDismiss(){this.kindnessReminderShown=!0
this.tracking.fireInteractionEvent("overlay.dismiss_kindness_banner")}messageRequestListHeaderOnGoBack(){this.loadConversationsByFilter(Ne)
this.tracking.fireInteractionEvent("overlay.back_to_message_requests_from_declined_messages")}openBubbleByConversationUrn(e){const t=this.conversations.find((t=>t.entityUrn===e))
t&&this.args.openBubble(t)}setLoader(){this.showInboxLoader=!0;(0,l.later)((()=>{this.showInboxLoader=!1}),500)}},K=(0,i.default)(Y.prototype,"authenticatedUser",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,i.default)(Y.prototype,"badging",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,i.default)(Y.prototype,"clipboard",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(Y.prototype,"lix",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(Y.prototype,"tracking",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(Y.prototype,"i18n",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(Y.prototype,"windowService",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,i.default)(Y.prototype,"a11yNotification",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,i.default)(Y.prototype,"heathrow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,i.default)(Y.prototype,"msgOverlayService",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,i.default)(Y.prototype,"commonTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,i.default)(Y.prototype,"storeShim",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,i.default)(Y.prototype,"localStorage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,i.default)(Y.prototype,"legoResolver",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,i.default)(Y.prototype,"legoTracking",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,i.default)(Y.prototype,"msgUserSettings",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,i.default)(Y.prototype,"msgDataManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,i.default)(Y.prototype,"formatter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,i.default)(Y.prototype,"rum",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,i.default)(Y.prototype,"mailboxName",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),de=(0,i.default)(Y.prototype,"isHeaderDropdownMenuOpen",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=(0,i.default)(Y.prototype,"isMessagingSettingsModalOpen",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=(0,i.default)(Y.prototype,"inboxDataFetchInProgress",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=(0,i.default)(Y.prototype,"inboxDataLoaded",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=(0,i.default)(Y.prototype,"inboxDataFetchFailed",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=(0,i.default)(Y.prototype,"loadMoreError",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=(0,i.default)(Y.prototype,"loadMoreInProgress",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fe=(0,i.default)(Y.prototype,"numConnections",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=(0,i.default)(Y.prototype,"awayMessageSettingsModalIsOpen",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=(0,i.default)(Y.prototype,"selectedConversations",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=(0,i.default)(Y.prototype,"selectedConversationUrns",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=(0,i.default)(Y.prototype,"isBulkActionsMode",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=(0,i.default)(Y.prototype,"searchTerm",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,i.default)(Y.prototype,"inboxType",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve.PRIMARY}}),Oe=(0,i.default)(Y.prototype,"isInMinimizeTransition",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=(0,i.default)(Y.prototype,"showAwayMessageOnboarding",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De=(0,i.default)(Y.prototype,"showInboxLoader",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe=(0,i.default)(Y.prototype,"upsellCard",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=(0,i.default)(Y.prototype,"kindnessReminderShown",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=(0,i.default)(Y.prototype,"localConvosFilter",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,i.default)(Y.prototype,"switchInboxTab",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"switchInboxTab"),Y.prototype),(0,i.default)(Y.prototype,"refreshSettings",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"refreshSettings"),Y.prototype),(0,i.default)(Y.prototype,"loadConversationsByFilter",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"loadConversationsByFilter"),Y.prototype),(0,i.default)(Y.prototype,"refetchInboxData",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"refetchInboxData"),Y.prototype),(0,i.default)(Y.prototype,"loadMore",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"loadMore"),Y.prototype),(0,i.default)(Y.prototype,"newConversation",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"newConversation"),Y.prototype),(0,i.default)(Y.prototype,"retryLoadMore",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"retryLoadMore"),Y.prototype),(0,i.default)(Y.prototype,"stopEvtPropagation",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"stopEvtPropagation"),Y.prototype),(0,i.default)(Y.prototype,"toggleMinimize",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"toggleMinimize"),Y.prototype),(0,i.default)(Y.prototype,"openMessageRequestConversationList",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"openMessageRequestConversationList"),Y.prototype),(0,i.default)(Y.prototype,"backToInboxFromMessageRequestList",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"backToInboxFromMessageRequestList"),Y.prototype),(0,i.default)(Y.prototype,"openDeclinedMessageRequestConversationList",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"openDeclinedMessageRequestConversationList"),Y.prototype),(0,i.default)(Y.prototype,"openAwayMessageSettingsModal",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"openAwayMessageSettingsModal"),Y.prototype),(0,i.default)(Y.prototype,"openMessagingSettingsModal",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"openMessagingSettingsModal"),Y.prototype),(0,i.default)(Y.prototype,"onListBubbleItemClick",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"onListBubbleItemClick"),Y.prototype),(0,i.default)(Y.prototype,"enterBulkActionsMode",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"enterBulkActionsMode"),Y.prototype),(0,i.default)(Y.prototype,"onExitBulkActionsMode",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"onExitBulkActionsMode"),Y.prototype),(0,i.default)(Y.prototype,"willExecuteBulkAction",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"willExecuteBulkAction"),Y.prototype),(0,i.default)(Y.prototype,"didExecuteBulkAction",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"didExecuteBulkAction"),Y.prototype),(0,i.default)(Y.prototype,"applyFilter",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"applyFilter"),Y.prototype),(0,i.default)(Y.prototype,"clearFilters",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"clearFilters"),Y.prototype),(0,i.default)(Y.prototype,"impressionKindnessReminder",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"impressionKindnessReminder"),Y.prototype),(0,i.default)(Y.prototype,"clickKindnessReminder",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"clickKindnessReminder"),Y.prototype),(0,i.default)(Y.prototype,"onSearchTermChange",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"onSearchTermChange"),Y.prototype),(0,i.default)(Y.prototype,"createListBubbleItemImpressionEvent",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"createListBubbleItemImpressionEvent"),Y.prototype),(0,i.default)(Y.prototype,"onKindnessReminderWidgetDismiss",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"onKindnessReminderWidgetDismiss"),Y.prototype),(0,i.default)(Y.prototype,"messageRequestListHeaderOnGoBack",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"messageRequestListHeaderOnGoBack"),Y.prototype),(0,i.default)(Y.prototype,"openBubbleByConversationUrn",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"openBubbleByConversationUrn"),Y.prototype),(0,i.default)(Y.prototype,"setLoader",[u.action],Object.getOwnPropertyDescriptor(Y.prototype,"setLoader"),Y.prototype),Y)
e.default=Ke;(0,o.setComponentTemplate)(Re,Ke)}))
define.alias("ember-cloud-filepicker/components/local-file-input","msg-overlay/components/local-file-input")
define.alias("ember-media-player/components/media-player","msg-overlay/components/media-player")
define("msg-overlay/components/messaging-overlay-container",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/classPrivateMethodGet","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@ember/array","@ember/object","@ember/service","@glimmer/component","@glimmer/tracking","ember","ember-lifeline","global-utils/utils/is-browser","msg-shared/helpers/is-message-request-conversation","msg-shared/helpers/is-sponsored-conversation","msg-shared/utils/constants","msg-shared/utils/document-is-hidden","msg-shared/utils/sdk-view-data-helpers","msg-shared/utils/view-data-helpers","ember-cli-pemberly-tracking/utils/tracking","rsvp","data-layer/utils/profile/get-profile","ember-test-waiters"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g,b,h,v,f,y,_,w,C,M,S,O,k){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var D,x,I,P,R,E,T,N,A,j,z,B,U,L,F,V,q,Y,K,H,W,G,J,X,$,Q,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue,de,me
const pe=(0,s.createTemplateFactory)({id:"M20u6pDj",block:'[[[41,[30,0,["focusedMessagingMode"]],[[[1,"  "],[10,1],[14,0,"msg-overlay-container__dimmed-background"],[12],[13],[1,"\\n"]],[]],null],[11,"aside"],[24,1,"msg-overlay"],[16,0,[29,["msg-overlay-container msg-overlay-container-reflow\\n    ",[52,[30,0,["isMaximizedMode"]],"msg-overlay-container--full-screen"]]]],[4,[38,1],[[30,0,["onDidInsert"]]],null],[12],[1,"\\n  "],[8,[39,2],null,[["@filterFromDeeplink","@realtimeMsgNotAutoOpened","@newConversation","@openBubble","@afterInboxDataFetch"],[[30,0,["filterFromDeeplink"]],[30,0,["realtimeMsgNotAutoOpened"]],[30,0,["newConversation"]],[30,0,["openConversation"]],[30,0,["afterInboxDataFetch"]]]],null],[1,"\\n\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["msgOverlayManager","avBubbles"]]],null]],null],null,[[[41,[30,1,["isLiveBroadcast"]],[[[1,"      "],[8,[39,5],null,[["@bundle"],["rooms"]],[["default"],[[[[1,"\\n"],[41,[30,2,["state","fulfilled"]],[[[1,"          "],[8,[39,6],null,[["@bubble","@bubbleId","@closeBubble","@hideAudioBubbleAtMdBreakPoint","@isMinimized","@isMaximized","@toggleMinimize"],[[30,1],[28,[37,7],[[30,0,["msgOverlayManager","avBubbleIds"]],[30,1]],null],[28,[37,8],[[30,0,["closeAVBubble"]],[30,1]],null],[30,0,["hideAudioBubbleAtMdBreakPoint"]],[30,0,["isAudioBubbleMinimized"]],[30,0,["isAVBubbleMaximized"]],[30,0,["toggleAudioBubbleMinimized"]]]],null],[1,"\\n"]],[]],null],[1,"      "]],[2]]]]],[1,"\\n"]],[]],[[[1,"      "],[8,[39,9],null,[["@bubble","@bubbleId","@closeBubble","@hideAudioBubbleAtMdBreakPoint","@isMinimized","@toggleMinimize"],[[30,1],[28,[37,7],[[30,0,["msgOverlayManager","avBubbleIds"]],[30,1]],null],[28,[37,8],[[30,0,["closeAVBubble"]],[30,1]],null],[30,0,["hideAudioBubbleAtMdBreakPoint"]],[30,0,["isAudioBubbleMinimized"]],[30,0,["toggleAudioBubbleMinimized"]]]],null],[1,"\\n"]],[]]]],[1]],null],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["msgOverlayManager","openBubbles"]]],null]],null],null,[[[1,"    "],[8,[39,10],null,[["@bubble","@closeBubble","@handleSuccessfulDiscardRequest","@overlayLixes","@messageComposeFlowTrackingId"],[[30,3],[28,[37,8],[[30,0,["closeBubble"]],[30,3]],null],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["overlayLixes"]],[30,3,["entryPointData","messageComposeFlowTrackingId"]]]],null],[1,"\\n"]],[3]],null],[1,"\\n"],[1,"  "],[10,0],[14,1,"msg-overlay__emoji-hoverable-outlet"],[12],[13],[1,"\\n\\n  "],[10,0],[14,1,"msg-overlay__reactor-list-outlet"],[12],[13],[1,"\\n"],[13]],["bubble","assetLoader","bubble"],false,["if","did-insert","msg-overlay@list-bubble-feature","each","-track-array","asset-loader@deferred-asset-loader","rooms@av-bubble","global-helpers@map-get","fn","msg-overlay@audio-bubble","msg-overlay@conversation-bubble-feature"]]',moduleName:"msg-overlay/components/messaging-overlay-container.hbs",isStrictMode:!1}),{CONTROL_NAMES:{OVERLAY:ge}}=y.default,be=/^messaging/,he=(0,k.buildWaiter)("msg-data:data-manager:refresh-convo-bundle")
let ve=(D=(0,d.inject)("i18n"),x=(0,d.inject)("global-nav-shared@badge"),I=(0,d.inject)("lix"),P=(0,d.inject)("router"),R=(0,d.inject)("tracking"),E=(0,d.inject)("msg-overlay-manager@msg-overlay-manager"),T=(0,d.inject)("msg-shared@first-message"),N=(0,d.inject)("msg-data@data-manager"),A=(0,d.inject)("msg-shared@component-context"),j=(0,d.inject)("msg-shared@messaging-user-settings"),z=(0,d.inject)("store-shim"),B=(Z=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=new WeakSet,ie=new WeakSet,ae=new WeakSet,oe=new WeakSet,re=new WeakSet,se=new WeakSet,le=new WeakSet,ce=new WeakSet,ue=new WeakSet,de=new WeakSet,me=new WeakSet,class extends m.default{get isMessagingRoute(){var e
return null===(e=this.router.currentRouteName)||void 0===e?void 0:e.match(be)}get isMaximizedMode(){return this.msgOverlayManager.maximizedMode}get hideAudioBubbleAtMdBreakPoint(){return this.msgOverlayManager.hideAudioBubbleAtMdBreakPoint}get isAudioBubbleMinimized(){return this.msgOverlayManager.avBubbleIsMinimized}get isAVBubbleMaximized(){return this.msgOverlayManager.avBubbleIsMaximized}get isSponsoredInmailAutoOpenDisabled(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-disable-spin-auto-open")}constructor(){var e,a
super(...arguments)
me.add(this)
de.add(this)
ue.add(this)
ce.add(this)
le.add(this)
se.add(this)
re.add(this)
oe.add(this)
ae.add(this)
ie.add(this)
ne.add(this)
te.add(this)
ee.add(this)
Z.add(this);(0,n.default)(this,"rumComponentId","msg-overlay");(0,n.default)(this,"overlayLixes",{});(0,t.default)(this,"i18n",U,this);(0,t.default)(this,"badgeService",L,this);(0,t.default)(this,"lix",F,this);(0,t.default)(this,"router",V,this);(0,t.default)(this,"tracking",q,this);(0,t.default)(this,"msgOverlayManager",Y,this);(0,t.default)(this,"firstMessage",K,this);(0,t.default)(this,"msgDataManager",H,this);(0,t.default)(this,"msgComponentContextService",W,this);(0,t.default)(this,"msgUserSettings",G,this);(0,t.default)(this,"storeShim",J,this);(0,t.default)(this,"filterFromDeeplink",X,this);(0,t.default)(this,"focusedMessagingMode",$,this);(0,t.default)(this,"realtimeMsgNotAutoOpened",Q,this)
this.msgComponentContextService.setTo("overlay")
const o=null===(e=this.router)||void 0===e||null===(a=e.currentRoute)||void 0===a?void 0:a.queryParams
"true"===(null==o?void 0:o.msgOverlay)&&(0,i.default)(this,Z,fe).call(this,o)}willDestroy(){super.willDestroy(...arguments)
this.msgOverlayManager.off("newConversation",this,this.newConversation)}afterInboxDataFetch(e){if(!(0,l.isDestroying)(this)){this.conversationDataFetched=!0
if(this.shouldOpenMostRecentConversation){e.length&&(0,i.default)(this,te,_e).call(this,e[0])
this.shouldOpenMostRecentConversation=!1}}}async _chainedSync(){const e=await this.msgDataManager.getMailbox()
if((0,l.isDestroying)(this))return
if(e.state.status.loading)return(0,S.resolve)()
const t=he.beginAsync()
return e.syncConversations({pageInstance:this.tracking.getCurrentPageInstance()}).finally((()=>{he.endAsync(t)}))}async onDidInsert(){var e,t;(0,i.default)(this,me,Re).call(this);(0,i.default)(this,ne,we).call(this)
this.msgOverlayManager.setUnseenConvoCountFromBadge()
this.msgOverlayManager.setOverlayHasLoaded()
await this.msgUserSettings.syncUserSettings()
if((0,l.isDestroying)(this))return
const n=null===(e=this.router)||void 0===e||null===(t=e.currentRoute)||void 0===t?void 0:t.queryParams
"true"===(null==n?void 0:n.msgOverlay)||this.msgOverlayManager.restoreCachedOverlayData(this.msgUserSettings.messagingOverlayPopups)}openConversation(e){this.realtimeMsgNotAutoOpened=!1
const t=(0,w.isInMailConversation)(e),n={conversation:e,isInMail:t,isMinimized:!1,focusInputOnInit:!0},a=this.msgOverlayManager.getOpenBubbleFromConversation(e)
if(a)this.msgOverlayManager.unminimizeAndReadConversation(a)
else{n.isJumbo=e.groupChat||t;(0,i.default)(this,de,Pe).call(this,n)}t&&this.tracking.fireInteractionEvent(ge.OPEN_INMAIL)}async newConversation(){let{composeOptionType:e,contextualTrackingInfo:t,attachments:n=[],forwardedEvent:a,groupConversationName:o,inMailComposeViewContext:r,invitationUrn:s,is1on1Compose:u=!1,isInMailCompose:d=!1,isJumbo:m=!1,isOpenedFromMsgButton:p=!1,entryPointData:g={messageComposeFlowTrackingId:(0,M.generateBase64UUID)()},message:b="",messageActions:h={},messageContext:v,messageRecipients:f=[],recipients:y,msgAdapterOptions:_,placeholderText:w,previewKey:S="",showGroupEditScreen:O,isDeprecatedLinkToJoin:k=!1,smpContent:D=null,subject:x="",trackingObject:I,update:P=null,uiSenderContext:R=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=y??f;(0,c.isArray)(E)||(E=[E])
const T=this.msgOverlayManager.getOpenBubbleByRecipients(E)
if(T){if(!b)return
this.closeBubble(T)}const N=!s&&d,A=m||N,j=await this.msgDataManager.getMailbox()
if((0,l.isDestroying)(this))return
const z=await j.createDraftConversation(E.map((e=>(0,C.getProfileDashUrn)(e))));(0,l.isDestroying)(this)||(0,i.default)(this,de,Pe).call(this,{attachments:n,composeOptionType:e,contextualTrackingInfo:t,conversationId:z.entityUrn??z.clientId,conversation:z,entryPointData:g,focusInputOnInit:!0,forwardedEvent:a,groupConversationName:o,hasUnseenMessages:!1,inMailComposeViewContext:r,invitationUrn:s,is1on1Compose:u,isInMailCompose:N,isJumbo:A,isMinimized:!1,isNew:!0,isOpenedFromMsgButton:p,message:b,messageActions:h,messageContext:v,messageRecipients:E,msgAdapterOptions:_,placeholderText:w,previewKey:S,showGroupEditScreen:O,isDeprecatedLinkToJoin:k,smpContent:D,subject:x,trackingObject:I,update:P,uiSenderContext:R})}handleSuccessfulDiscardRequest(e){(0,i.default)(this,le,De).call(this,e)}closeBubble(e){this.focusedMessagingMode=!1
const{clientId:t}=e.conversation;(0,i.default)(this,ce,xe).call(this,t)}closeAVBubble(e){this.msgOverlayManager.closeAVBubble(e)}toggleAudioBubbleMinimized(){this.msgOverlayManager.toggleAudioBubbleMinimized()}}),U=(0,a.default)(B.prototype,"i18n",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.default)(B.prototype,"badgeService",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,a.default)(B.prototype,"lix",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,a.default)(B.prototype,"router",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,a.default)(B.prototype,"tracking",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,a.default)(B.prototype,"msgOverlayManager",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=(0,a.default)(B.prototype,"firstMessage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,a.default)(B.prototype,"msgDataManager",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,a.default)(B.prototype,"msgComponentContextService",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,a.default)(B.prototype,"msgUserSettings",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,a.default)(B.prototype,"storeShim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,a.default)(B.prototype,"filterFromDeeplink",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,a.default)(B.prototype,"focusedMessagingMode",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,a.default)(B.prototype,"realtimeMsgNotAutoOpened",[p.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(B.prototype,"afterInboxDataFetch",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"afterInboxDataFetch"),B.prototype),(0,a.default)(B.prototype,"onDidInsert",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"onDidInsert"),B.prototype),(0,a.default)(B.prototype,"openConversation",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"openConversation"),B.prototype),(0,a.default)(B.prototype,"newConversation",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"newConversation"),B.prototype),(0,a.default)(B.prototype,"handleSuccessfulDiscardRequest",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"handleSuccessfulDiscardRequest"),B.prototype),(0,a.default)(B.prototype,"closeBubble",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"closeBubble"),B.prototype),(0,a.default)(B.prototype,"closeAVBubble",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"closeAVBubble"),B.prototype),(0,a.default)(B.prototype,"toggleAudioBubbleMinimized",[u.action],Object.getOwnPropertyDescriptor(B.prototype,"toggleAudioBubbleMinimized"),B.prototype),B)
e.default=ve
async function fe(e){const{chatId:t,msgConversationId:n,msgRecipientId:a,msgCompose:o,msgRecent:r,msgFilter:s,msgControlName:c}=e
this.filterFromDeeplink=s
if("true"===o){let e
if(a){e=await(0,O.getProfileById)(this.storeShim,a,"com.linkedin.voyager.dash.deco.identity.profile.MiniProfile")
if((0,l.isDestroying)(this))return}this.newConversation({isMinimized:!1,isJumbo:!0,isNew:!0,messageRecipients:e?[e]:void 0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this.focusedMessagingMode=!0}else if(n){const e=await this.msgDataManager.fetchConversation(n)
if((0,l.isDestroying)(this)||!e)return;(0,i.default)(this,te,_e).call(this,e,c)}else t?(0,i.default)(this,ee,ye).call(this,{previewKey:t,focusMode:!0}):r&&(this.shouldOpenMostRecentConversation=!0)}function ye(e){let{previewKey:t,focusMode:n=!1}=e
this.newConversation({previewKey:t,isDeprecatedLinkToJoin:!0,isMinimized:!1,isJumbo:!0,focusInputOnInit:!0})
this.focusedMessagingMode=n}function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,i.default)(this,de,Pe).call(this,{conversation:e,inmailReplyDeepLink:t,isMinimized:!1,isJumbo:!0,hasUnseenMessages:!e.read,focusInputOnInit:!0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this.focusedMessagingMode=!0}function we(){var e=this
if(h.default){(0,b.addEventListener)(this,window,"blur",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,oe,Se).call(e,...n)}));(0,b.addEventListener)(this,document,"click",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,ie,Ce).call(e,...n)}));(0,b.addEventListener)(this,window,"visibilitychange",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,re,Oe).call(e,...n)}))
this.msgOverlayManager.on("newConversation",this,this.newConversation)
this.msgOverlayManager.on("conversationPreview",this,(0,i.default)(this,ee,ye))
this.msgDataManager.onNewMessageInConversation((function(){if(!(0,l.isDestroying)(e)){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(0,i.default)(e,se,ke).call(e,...n)}}))
this.msgDataManager.onConversationDeleted((function(){if(!(0,l.isDestroying)(e)){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(0,i.default)(e,le,De).call(e,...n)}}))}}function Ce(e){let{target:t}=e
t.classList&&t.classList.contains("msg-overlay-container__dimmed-background")&&(this.focusedMessagingMode=!1)}function Me(){if(h.default){const e=document.activeElement&&document.activeElement.classList
return e&&e.contains("msg-messaging-form__message")}return!1}function Se(){(0,i.default)(this,ae,Me).call(this)&&document.activeElement.blur()}function Oe(){(0,_.default)()?(0,i.default)(this,ae,Me).call(this)&&document.activeElement.blur():(0,b.throttleTask)(this,"_chainedSync",g.default.testing?1e3:18e5)}function ke(){let{entityUrn:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
const t=this.msgDataManager.getTrackedConversation(e)
if((0,i.default)(this,ue,Ie).call(this,t))return
this.msgOverlayManager.playSound()
const n=h.default&&document.hasFocus()&&!(0,_.default)()
n||this.msgOverlayManager.updateDocumentTitle(t)
const a=this.msgOverlayManager.getOpenBubbleFromConversation(t),o=a&&a.isActive&&!a.isMinimized&&n
if(!this.isMessagingRoute&&!o){this.badgeService.incrementBadge("messaging")
this.msgOverlayManager.setUnseenConvoCountFromBadge()}if(a){(0,u.set)(a,"hasUnseenMessages",!o)
o&&this.msgOverlayManager.markConversationAsRead(a)}else if(!(this.isMessagingRoute||(0,v.isMessageRequestConversation)(t)||(0,f.isSponsoredConversation)(t)&&this.isSponsoredInmailAutoOpenDisabled)){const e=(0,w.isInMailConversation)(t);(0,i.default)(this,de,Pe).call(this,{conversation:t,focusInputOnInit:!1,hasUnseenMessages:!0,isJumbo:t.groupChat||e,isMinimized:!this.msgUserSettings.messagingOverlayPopups,isTriggeredByRealtime:!0})}}function De(e){this.msgOverlayManager.closeBubbleByConversationUrnOrBubbleId(e)
this.msgOverlayManager.syncCachedConvos()}function xe(e){this.msgOverlayManager.closeBubbleByConversationclientId(e)
this.msgOverlayManager.syncCachedConvos()}function Ie(e){return 0===e.unreadCount||"MUTE"===e.notificationStatus}async function Pe(e){g.default.testing&&e.isTriggeredByRealtime&&console.log("attempting to create conversation bubble from realtime")
const t=await this.msgOverlayManager.createConversationBubble(e)
if((0,l.isDestroying)(this))return!1
g.default.testing&&e.isTriggeredByRealtime&&console.log("conversation bubble created from realtime",t)
!t&&e.isTriggeredByRealtime&&(this.realtimeMsgNotAutoOpened=!0)
return t}function Re(){const{i18n:e,firstMessage:t}=this,{inviter:n}=t.getMessageInfo()||{}
n&&this.newConversation({messageRecipients:n,message:e.lookupTranslation("components/msg-overlay@messaging-overlay-container","i18n_first_message_prompt_doing_well")()})}(0,r.setComponentTemplate)(pe,ve)}))
define.alias("ember-cloud-filepicker/components/onedrive-file-picker","msg-overlay/components/onedrive-file-picker")
define("msg-overlay/components/overlay-conversation-list-feature",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a=(0,n.createTemplateFactory)({id:"e6ILlR1H",block:'[[[10,0],[14,0,"msg-overlay-list-bubble__conversations-list"],[12],[1,"\\n"],[41,[28,[37,1],[[28,[37,2],[[30,1,["length"]],0],null],[28,[37,3],[[30,2]],null]],null],[[[41,[30,3],[[[1,"      "],[8,[39,4],null,[["@isOverlay","@newConversation"],[true,[30,4]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,0],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble__no-results-image"],[12],[13],[1,"\\n"],[41,[28,[37,2],[[30,5],"CONNECTIONS"],null],[[[1,"          "],[10,"h4"],[14,0,"t-16 t-black t-bold ph text-align-center ph6"],[12],[1,"\\n            "],[1,[28,[35,5],["i18n_no_messages_from_connections","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"        "],[10,2],[14,0,"text-align-center mb4"],[12],[1,"\\n"],[41,[28,[37,2],[[30,5],"BLOCKED"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_spam_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,2],[[30,5],"UNREAD"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_unread_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,2],[[30,5],"INMAIL"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_inmail_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,2],[[30,5],"MESSAGE_REQUEST_PENDING"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,2],[[30,5],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_declined_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,2],[[30,5],"CONNECTIONS"],null],[[[1,"            "],[1,[28,[35,5],["i18n_reach_out_message","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[1,"            "],[1,[28,[35,5],["i18n_no_results_found","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n          "]],[]]]],[]]]],[]]]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n"],[41,[28,[37,2],[[30,5],"CONNECTIONS"],null],[[[1,"          "],[10,0],[14,0,"full-width display-flex justify-center"],[12],[1,"\\n            "],[8,[39,6],[[24,0,"ph0"]],[["@click","@text","@type"],[[30,4],[28,[37,5],["i18n_create_new_message","msg-overlay/components/overlay-conversation-list-feature"],null],"tertiary"]],null],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n"]],[]]]],[]],[[[42,[28,[37,8],[[28,[37,8],[[30,1]],null]],null],"@index",[[[41,[30,6,["isConversationStarterAdPreview"]],[[[1,"        "],[8,[39,9],null,[["@component","@openBubble","@index"],[[30,6],[30,8],[30,7]]],null],[1,"\\n"]],[]],[[[1,"        "],[8,[39,10],[[24,"data-feedback-redacted",""]],[["@conversation","@convoIndex","@openBubble","@disableBulkActions","@isBulkActionsMode","@handleBulkActionToggle","@selectedConversationUrns","@conversationLength"],[[30,6],[30,7],[30,8],[30,9],[30,10],[28,[37,11],[[30,11],[30,6,["entityUrn"]]],null],[30,12],[30,13]]],null],[1,"\\n"]],[]]]],[6,7]],null]],[]]],[13],[1,"\\n\\n"],[41,[30,2],[[[1,"  "],[8,[39,12],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]],null]],["@conversations","@showLoadingState","@showNoMessagesPresenter","@newConversation","@currentConvosFilter","conversation","index","@openBubble","@disableBulkActions","@isBulkActionsMode","@onBulkActionToggle","@selectedConversationUrns","@conversationLength"],false,["if","global-helpers@and","global-helpers@eq","global-helpers@not","msg-ui@no-messages-presenter","t","artdeco-button@artdeco-button","each","-track-array","msg-overlay@overlay-interactive-messaging-component-presenter","msg-overlay@overlay-conversation-list-item-feature","fn","msg-ui@loader"]]',moduleName:"msg-overlay/components/overlay-conversation-list-feature.hbs",isStrictMode:!1})
var o=(0,t.setComponentTemplate)(a,(0,i.default)())
e.default=o}))
define("msg-overlay/components/overlay-conversation-list-item-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","@ember/object","tracked-toolbox","@ember/service","msg-shared/utils/constants","ember-cli-pemberly-tracking/utils/tracking","@ember/object/internals","msg-ui/viewdata/sdk-conversation-list-item-viewdata"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var b,h,v,f,y,_,w,C,M,S,O,k,D,x,I,P,R
const E=(0,r.createTemplateFactory)({id:"RHtHOP/1",block:'[[[11,0],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item"],[24,"tabindex","0"],[24,"role","button"],[16,1,[30,0,["conversationCardId"]]],[17,1],[4,[38,0],["click",[30,0,["onClick"]]],null],[4,[38,0],["keydown",[30,0,["onKeyDown"]]],null],[4,[38,0],["mousemove",[30,0,["onMouseMove"]]],null],[4,[38,1],[[30,0,["impressionEventPayload"]]],[["routeName","currentRoute"],[[28,[37,2],[[53,"outletState"],"render.name"],null],[28,[37,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-container"],[12],[1,"\\n    "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card display-flex"],[12],[1,"\\n      "],[8,[39,4],null,[["@viewData","@onCheckboxClick","@checkboxOnly","@checked","@disableSelectability","@entitySize","@iconSize"],[[30,0,["viewData","conversationEntityViewData"]],[30,0,["handleCheckboxClick"]],[30,2],[30,0,["isChecked"]],[30,3],3,"small"]],null],[1,"\\n\\n      "],[10,0],[14,0,"overflow-hidden pl2 msg-overlay-list-bubble__convo-card-content"],[12],[1,"\\n"],[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__row align-items-center display-flex"],[12],[1,"\\n            "],[10,"h3"],[15,0,[29,["msg-conversation-listitem__participant-names msg-conversation-card__participant-names truncate t-14 t-black\\n                ",[52,[30,0,["viewData","isRead"]],"t-normal","t-bold"]]]],[12],[1,"\\n              "],[1,[30,0,["viewData","title"]]],[1,"\\n            "],[13],[1,"\\n            "],[10,0],[15,0,[29,["msg-conversation-card__mute-icon-holder\\n                ",[52,[30,0,["showInboxShortcutsButton"]],"msg-conversation-card__mute-icon-holder--inbox-shortcuts"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","isMute"]],[[[1,"                "],[10,0],[14,0,"msg-conversation-card__mute-icon"],[12],[1,"\\n                  "],[8,[39,6],[[24,0,"v-align-top"]],[["@a11yText","@name","@type","@size"],[[28,[37,7],["i18n_convo_is_muted","msg-overlay/components/overlay-conversation-list-item-feature"],[["names"],[[30,0,["viewData","title"]]]]],"volume-mute","system","medium"]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n"],[41,[30,0,["viewData","timestampText"]],[[[1,"              "],[10,"time"],[15,0,[29,["msg-overlay-list-bubble-item__time-stamp t-12\\n                  ",[52,[30,0,["showInboxShortcutsButton"]],"msg-overlay-list-bubble-item__time-stamp--inbox-shortcuts"],"\\n                  ",[52,[30,0,["viewData","isRead"]],"t-normal t-black--light","t-bold t-black"]]]],[12],[1,"\\n                "],[1,[30,0,["viewData","timestampText"]]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[41,[30,0,["showInboxShortcutsButton"]],[[[1,"              "],[10,0],[14,0,"msg-overlay-list-bubble__inbox-shortcuts-container"],[12],[1,"\\n                "],[10,0],[14,0,"msg-overlay-list-bubble__inbox-shortcuts"],[12],[1,"\\n                  "],[8,[39,8],null,[["@viewData","@showRenameConversationForm","@toggleConversationMute","@isInboxShortcuts","@isOverlay","@actionTrackingPrefix"],[[30,0,["viewData","conversationHeaderDropdownMenuViewData"]],[30,0,["handleDropdownRenameForm"]],[30,0,["toggleConversationMute"]],true,true,[30,0,["actionTrackingPrefix"]]]],null],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row justify-space-between"],[12],[1,"\\n            "],[10,0],[15,0,[52,[30,0,["twoLineMessageSnippetLayout"]],"msg-overlay-list-bubble__message-snippet-container--narrow-two-line","truncate"]],[12],[1,"\\n"],[41,[30,0,["viewData","messageRequestContext"]],[[[1,"                "],[10,2],[14,0,"display-flex align-items-center overflow-hidden t-12 t-bold"],[12],[1,"\\n                  "],[10,1],[14,0,"truncate flex-1"],[12],[1,"\\n                    "],[1,[28,[35,9],[[30,0,["viewData","messageRequestContext"]]],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"              "],[10,2],[15,0,[29,[[52,[28,[37,10],[[30,0,["viewData","messageRequestContext"]],[30,0,["viewData","nudgeText"]]],null],"msg-overlay-list-bubble__message-snippet truncate","msg-overlay-list-bubble__message-snippet--v2"],"\\n                  ",[52,[30,0,["viewData","isStarred"]],"msg-overlay-list-bubble__message-snippet--starred"],"\\n                  m0 t-12\\n                  ",[52,[30,0,["viewData","isRead"]],"t-black--light","t-black msg-overlay-list-bubble__message-snippet--unread"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","messageSnippetIcon"]],[[[1,"                  "],[8,[39,6],[[24,0,"msg-conversation-card__message-snippet-icon"]],[["@name","@type","@size"],[[30,0,["viewData","messageSnippetIcon"]],"system","small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["viewData","messageSnippetPillText"]],[[[1,"                  "],[10,1],[15,0,[29,["msg-conversation-card__pill t-14\\n                      ",[52,[28,[37,11],[[30,0,["shouldDisplayGrayMessageSnippetPillText"]]],null]," t-black "],"\\n                      t-bold pr1"]]],[12],[1,"\\n                    "],[1,[30,0,["viewData","messageSnippetPillText"]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"                "],[1,[30,0,["viewData","messageSnippetText"]]],[1,"\\n              "],[13],[1,"\\n"],[41,[30,0,["viewData","nudgeText"]],[[[1,"                "],[11,2],[16,0,[29,[[52,[28,[37,12],null,null],"msg-conversation-card__nudge-text--small","msg-conversation-card__nudge-text--large"],"\\n                    msg-conversation-card__nudge-text"]]],[4,[38,1],null,[["registerOnImpression","routeName","currentRoute"],[[30,0,["onNudgeImpression"]],[28,[37,2],[[53,"outletState"],"render.name"],null],[28,[37,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[1,[30,0,["viewData","nudgeText"]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n            "],[10,0],[14,0,"display-flex"],[12],[1,"\\n              "],[10,0],[15,0,[29,["msg-conversation-card__conversation-status msg-conversation-card__star-icon\\n                  ",[52,[30,0,["viewData","isStarred"]],"msg-conversation-card__star-icon--starred"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","isStarred"]],[[[1,"                  "],[8,[39,6],null,[["@name","@type","@size"],["star-fill","system","small"]],null],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n"],[41,[28,[37,11],[[30,0,["viewData","isRead"]]],null],[[[1,"                "],[10,0],[14,0,"msg-conversation-card__conversation-status align-items-center flex-grow-1"],[12],[1,"\\n                  "],[8,[39,13],[[24,0,"msg-conversation-card__unread-count msg-conversation-card__unread-count--inbox-shortcuts artdeco-notification-badge--new text-align-center"],[16,"aria-label",[52,[30,0,["viewData","isRead"]],"",[28,[37,7],["aria_unread_count","msg-overlay/components/overlay-conversation-list-item-feature"],[["unreadCount"],[[30,0,["viewData","conversationUnreadCount"]]]]]]]],[["@number","@showCount"],[[30,0,["viewData","conversationUnreadCount"]],true]],[["default"],[[[[1,"\\n"],[1,"                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["&attrs","@isBulkActionsMode","@disableBulkActions"],false,["on","ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","msg-ui@selectable-entity-presenter","if","hue-web-icons@icon","t","msg-shared-modals@conversation-header-dropdown-menu-presenter","text-view-model@text-view-model","global-helpers@or","global-helpers@not","msg-shared@is-in-overlay","artdeco-notification-badge@artdeco-notification-badge"]]',moduleName:"msg-overlay/components/overlay-conversation-list-item-feature.hbs",isStrictMode:!1}),{CONTROL_NAMES:T,IMPRESSION_KEYS:{CONVERSATION:N},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:A},KEYCODES:{ENTER:j,SPACEBAR:z}}=d.default
let B=(b=(0,u.inject)("authentication@authenticated-user"),h=(0,u.inject)("formatter"),v=(0,u.inject)("i18n"),f=(0,u.inject)("msg-data@data-manager"),y=(0,u.inject)("date"),_=(0,u.inject)("lix"),w=(0,u.inject)("presence@presence-api-dash"),C=(0,u.inject)("tracking"),M=class extends s.default{constructor(){super(...arguments);(0,n.default)(this,"conversationCardId",`overlay-conversation-card-${(0,p.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",S,this);(0,t.default)(this,"formatter",O,this);(0,t.default)(this,"i18n",k,this);(0,t.default)(this,"msgDataManager",D,this);(0,t.default)(this,"dateService",x,this);(0,t.default)(this,"lix",I,this);(0,t.default)(this,"presenceAPI",P,this);(0,t.default)(this,"tracking",R,this);(0,n.default)(this,"actionTrackingPrefix",T.OVERLAY_PREFIX)}get controlInteractionEventName(){return`overlay.${this.viewData.controlName}`}get isChecked(){var e
return null===(e=this.args.selectedConversationUrns)||void 0===e?void 0:e.includes(this.viewData.entityUrn)}get showInboxShortcutsButton(){return!this.args.isBulkActionsMode&&!this.args.isOverlaySearch}get twoLineMessageSnippetLayout(){return!this.viewData.messageRequestContext}get shouldDisplaySubjectForConversationAd(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-conversation-ad-subject")}get shouldDisplayGrayMessageSnippetPillText(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sponsored-labels-gray")&&this.viewData.isConversationWithAdvertiser}get viewData(){const{conversation:e}=this.args
return new g.default({conversation:this.msgDataManager.getTrackedConversation(e.entityUrn),authenticatedUserMiniProfile:this.authenticatedUser.miniProfile.content,msgDataManager:this.msgDataManager,nowTimestamp:this.dateService.now(),formatter:this.formatter,i18n:this.i18n,presenceAPI:this.presenceAPI,shouldDisplaySubjectForConversationAd:this.shouldDisplaySubjectForConversationAd})}onKeyDown(e){if(e.keyCode===j||e.keyCode===z){if(null!==e.target.closest(".msg-overlay-list-bubble__inbox-shortcuts"))return
e.preventDefault()
if(document.getElementById(this.conversationCardId).querySelector(".msg-selectable-entity__input")===document.activeElement)return
if(this.args.isBulkActionsMode)this.args.handleBulkActionToggle()
else{this.args.openBubble(this.viewData.entityUrn)
this.tracking.fireInteractionEvent(this.controlInteractionEventName)}}}onMouseMove(e){var t,n
null===(t=(n=this.args).onMouseMove)||void 0===t||t.call(n,e)}onClick(e){if(this.args.isBulkActionsMode)this.args.handleBulkActionToggle()
else{if(null!==e.target.closest(".msg-overlay-list-bubble__inbox-shortcuts"))return
this.args.openBubble(this.viewData.entityUrn)
this.tracking.fireInteractionEvent(this.controlInteractionEventName)
this.msgDataManager.nudgingDataManager.fireClickTracking(this.viewData.id)}}toggleStarState(e){if(e.keyCode===j||e.keyCode===z||"click"===e.type){e.stopPropagation()
e.preventDefault()
const{entityUrn:t,isStarred:n}=this.viewData
this.msgDataManager.toggleConversationStar(t,!n)
const i=document.getElementById(this.conversationCardId).querySelector(".msg-overlay-list-bubble__star-icon")
null==i||i.blur()}}toggleConversationMute(){const{entityUrn:e,isMute:t}=this.viewData
return this.msgDataManager.toggleConversationMute(e,!t)}handleDropdownRenameForm(e){e.stopPropagation()
e.preventDefault()}onNudgeImpression(){const{convoIndex:e}=this.args,{id:t,conversationBackendUrn:n}=this.viewData
return()=>this.msgDataManager.nudgingDataManager.onImpression(t,n,e+1,"overlay-conversation-list-item")}impressionEventPayload(){if(this.isDestroying||this.isDestroyed)return[]
const{conversationBackendUrn:e,participantPresenceStatuses:t}=this.viewData
return{name:N,body:{moduleKey:A,conversations:[{objectUrn:e,trackingId:(0,m.generateTrackingId)()}],participantPresenceStatuses:t}}}handleCheckboxClick(){this.args.handleBulkActionToggle&&this.args.handleBulkActionToggle(this.viewData.id)}},S=(0,i.default)(M.prototype,"authenticatedUser",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,i.default)(M.prototype,"formatter",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,i.default)(M.prototype,"i18n",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.default)(M.prototype,"msgDataManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,i.default)(M.prototype,"dateService",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,i.default)(M.prototype,"lix",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,i.default)(M.prototype,"presenceAPI",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,i.default)(M.prototype,"tracking",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(M.prototype,"viewData",[c.cached],Object.getOwnPropertyDescriptor(M.prototype,"viewData"),M.prototype),(0,i.default)(M.prototype,"onKeyDown",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"onKeyDown"),M.prototype),(0,i.default)(M.prototype,"onMouseMove",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"onMouseMove"),M.prototype),(0,i.default)(M.prototype,"onClick",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"onClick"),M.prototype),(0,i.default)(M.prototype,"toggleStarState",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"toggleStarState"),M.prototype),(0,i.default)(M.prototype,"toggleConversationMute",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"toggleConversationMute"),M.prototype),(0,i.default)(M.prototype,"handleDropdownRenameForm",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"handleDropdownRenameForm"),M.prototype),(0,i.default)(M.prototype,"onNudgeImpression",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"onNudgeImpression"),M.prototype),(0,i.default)(M.prototype,"impressionEventPayload",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"impressionEventPayload"),M.prototype),(0,i.default)(M.prototype,"handleCheckboxClick",[l.action],Object.getOwnPropertyDescriptor(M.prototype,"handleCheckboxClick"),M.prototype),M)
e.default=B;(0,o.setComponentTemplate)(E,B)}))
define("msg-overlay/components/overlay-interactive-messaging-component-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@glimmer/component","@ember/object","tracked-toolbox","@ember/service","msg-shared/utils/constants","@ember/object/internals","msg-ui/viewdata/sdk-interactive-messaging-component-viewdata","urn-utils","ember-lifeline"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g,b,h){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var v,f,y,_,w,C,M,S,O,k,D,x,I,P,R,E,T,N,A
const j=(0,r.createTemplateFactory)({id:"TofOYIDf",block:'[[[1,"\\n"],[11,0],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item"],[24,"tabindex","0"],[24,"role","button"],[16,1,[30,0,["conversationCardId"]]],[17,1],[4,[38,0],["click",[30,0,["onClick"]]],null],[4,[38,0],["keydown",[30,0,["onKeyDown"]]],null],[4,[38,1],[[30,0,["getImpressionEvent"]]],[["eager","routeName","currentRoute"],[true,[28,[37,2],[[53,"outletState"],"render.name"],null],[28,[37,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-container"],[12],[1,"\\n    "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card display-flex"],[12],[1,"\\n      "],[10,0],[14,0,"display-flex align-items-center justify-center"],[12],[1,"\\n"],[41,[30,0,["viewData","images"]],[[[1,"          "],[8,[39,5],[[24,0,"msg-facepile-grid msg-facepile-grid--no-facepile msg-facepile-grid--3"]],[["@images","@entitySize","@imgWidth","@imgClasses"],[[30,0,["viewData","images"]],3,200,"display-flex align-items-center justify-center msg-facepile-grid__img"]],null],[1,"\\n"]],[]],[[[1,"          "],[10,0],[14,0,"msg-selectable-entity"],[12],[1,"\\n            "],[8,[39,6],[[24,0,"EntityPhoto-circle-3"]],[["@desiredWidth","@ghostType"],[200,"person"]],null],[1,"\\n          "],[13],[1,"\\n"]],[]]],[1,"      "],[13],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content overflow-hidden pl2"],[12],[1,"\\n"],[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__row display-flex"],[12],[1,"\\n            "],[10,"h3"],[14,0,"msg-conversation-listitem__participant-names msg-conversation-card__participant-names truncate t-14 t-black t-bold"],[12],[1,"\\n"],[41,[30,0,["viewData","title"]],[[[1,"                "],[8,[39,7],null,[["@tvm"],[[30,0,["viewData","title"]]]],null],[1,"\\n"]],[]],[[[1,"                "],[1,[28,[35,8],["i18n_title_placeholder","msg-overlay/components/overlay-interactive-messaging-component-presenter"],null]],[1,"\\n"]],[]]],[1,"            "],[13],[1,"\\n            "],[10,0],[14,0,"msg-overlay-interactive-messaging-component__inbox-shortcuts-container"],[12],[1,"\\n              "],[10,0],[14,0,"msg-overlay-interactive-messaging-component__inbox-shortcuts"],[12],[1,"\\n                "],[8,[39,9],null,[["@viewData","@isInboxShortcuts","@isOverlay","@onDismiss","@interactiveMessagingComponent","@isInteractiveMessagingComponent","@handleSuccessfulDiscardRequest","@reportSuccessToastMessage"],[[30,0,["viewData","conversationHeaderDropdownMenuViewData"]],true,true,[30,0,["onDismiss"]],[30,2],true,[30,0,["onDismiss"]],"i18n_cs_ads_semaphore_success"]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row justify-space-between"],[12],[1,"\\n            "],[10,0],[14,0,"msg-overlay-list-bubble__message-snippet-container--narrow-two-line"],[12],[1,"\\n\\n              "],[10,2],[14,0,"msg-overlay-list-bubble__message-snippet--v2 m0 t-black t-12 t-bold"],[12],[1,"\\n"],[41,[30,0,["viewData","shortText"]],[[[1,"                  "],[10,1],[14,0,"msg-conversation-card__pill t-14 t-black t-bold pr1"],[12],[1,"\\n                    "],[8,[39,7],null,[["@tvm"],[[30,0,["viewData","shortText"]]]],null],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[41,[30,0,["viewData","contextText"]],[[[1,"                  "],[10,1],[12],[1,"\\n                    "],[1,[30,0,["viewData","contextText"]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["&attrs","@component"],false,["on","ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","if","image-view-model@image-view-model","ember-vector-images@lazy-image","text-view-model@text-view-model-v2","t","msg-shared-modals@conversation-header-dropdown-menu-presenter"]]',moduleName:"msg-overlay/components/overlay-interactive-messaging-component-presenter.hbs",isStrictMode:!1}),{CONTROL_NAMES:z,KEYCODES:{ENTER:B,SPACEBAR:U},SPONSORED_CONVERSATION_SOURCE_TYPE:L,SPONSORED_TRACKING:F}=m.default
let V=(v=(0,d.inject)("authentication@authenticated-user"),f=(0,d.inject)("formatter"),y=(0,d.inject)("i18n"),_=(0,d.inject)("msg-data@data-manager"),w=(0,d.inject)("msg-overlay-manager@msg-overlay-manager"),C=(0,d.inject)("presence@presence-api-dash"),M=(0,d.inject)("tracking"),S=(0,d.inject)("msg-spinmail-data@sponsored-action-tracking"),O=(0,d.inject)("client-sensor-web@client-sensor"),k=class extends l.default{constructor(){super(...arguments);(0,n.default)(this,"conversationCardId",`overlay-conversation-card-${(0,p.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",D,this);(0,t.default)(this,"formatter",x,this);(0,t.default)(this,"i18n",I,this);(0,t.default)(this,"msgDataManager",P,this);(0,t.default)(this,"msgOverlayManager",R,this);(0,t.default)(this,"presenceAPI",E,this);(0,t.default)(this,"tracking",T,this);(0,t.default)(this,"sponsoredActionTracking",N,this);(0,t.default)(this,"clientSensor",A,this);(0,n.default)(this,"actionTrackingPrefix",z.OVERLAY_PREFIX)}get controlInteractionEventName(){return"overlay.view_conversation_ads"}getImpressionEvent(){var e
const{component:t,index:n}=this.args,i=(null===(e=t.renderContent)||void 0===e?void 0:e.conversationStarterAd).sponsoredTracking
return this.isDestroying||this.isDestroyed||!i?[]:{name:"SponsoredMessagingImpressionEvent",body:{impressionType:"VIEWABLE",impressionDuration:0,listPosition:{index:n+1},sponsoredEventHeader:{encryptedTrackingData:(null==i?void 0:i.adTrackingCode)||""}}}}get viewData(){return new g.default({authenticatedUserMiniProfile:this.authenticatedUser.miniProfile.content,msgDataManager:this.msgDataManager,formatter:this.formatter,i18n:this.i18n,presenceAPI:this.presenceAPI,model:this.args.component})}onKeyDown(e){if(e.keyCode===B||e.keyCode===U){if(null!==e.target.closest(".msg-overlay-interactive-messaging-component__inbox-shortcuts"))return
e.preventDefault()
if(document.getElementById(this.conversationCardId).querySelector(".msg-selectable-entity__input")===document.activeElement)return
this.onClick(e)}}async _handleOnClick(e){var t
this.clientSensor.incrementMetricCounter({metricName:"messaging-cs-ad-preview-click",groupName:"messaging"})
if(null!==e.target.closest(".msg-overlay-interactive-messaging-component__inbox-shortcuts"))return
const{component:n}=this.args,i=null===(t=n.renderContent)||void 0===t?void 0:t.conversationStarterAd,a=i.sponsoredTracking
a&&this.sponsoredActionTracking.fireCSAdsTracking(F.ACTIONS.CONVERSATION_PREVIEW_CLICK,`overlay.${F.ACTIONS_CONTROL_NAMES.CONVERSATION_PREVIEW_CLICK}`,a)
try{var o
const e=await this.msgDataManager.createSponsoredConversation({participantsList:[i.creativeUrn],sponsoredConversationSourceType:L.MESSAGING_INBOX_PREVIEW_CLICK,adTrackingCode:null===(o=i.sponsoredTracking)||void 0===o?void 0:o.adTrackingCode})
if((0,s.isDestroying)(this))return
this.clientSensor.incrementMetricCounter({metricName:"messaging-cs-ad-conversation-creation-success",groupName:"messaging"})
const t=await this.msgDataManager.fetchConversation((0,b.extractEntityInfoFromUrn)(e.data.value.conversationUrn).id)
if((0,s.isDestroying)(this))return
this.msgDataManager.setC2mOrCsAdOpenData(e.data.value)
this.msgDataManager.setCsAdCooldownPeriod()
await this.msgOverlayManager.createConversationBubble({conversation:t,isMinimized:!1,isJumbo:!0,hasUnseenMessages:!t.read,focusInputOnInit:!0,isOpenedFromMsgButton:!1})
if((0,s.isDestroying)(this))return
this.tracking.fireInteractionEvent(this.controlInteractionEventName)
this.msgDataManager.enableFocusedInbox||this.msgDataManager.removeConversationStarterAdPreview()}catch(e){if((0,s.isDestroying)(this))throw e
this.clientSensor.incrementMetricCounter({metricName:"messaging-cs-ad-conversation-creation-failure",groupName:"messaging"})
throw e}}onClick(e){(0,h.debounceTask)(this,"_handleOnClick",e,500,!0)}onDismiss(){var e,t
this.clientSensor.incrementMetricCounter({metricName:"messaging-cs-ad-preview-dismiss",groupName:"messaging"})
this.msgDataManager.removeConversationStarterAdPreview()
const{component:n}=this.args,i=null===(e=n.renderContent)||void 0===e||null===(t=e.conversationStarterAd)||void 0===t?void 0:t.sponsoredTracking
i&&this.sponsoredActionTracking.fireCSAdsTracking(F.ACTIONS.CONVERSATION_PREVIEW_CLICK_DISMISS,`overlay.${F.ACTIONS_CONTROL_NAMES.CONVERSATION_PREVIEW_CLICK_DISMISS}`,i)}},D=(0,i.default)(k.prototype,"authenticatedUser",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,i.default)(k.prototype,"formatter",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,i.default)(k.prototype,"i18n",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,i.default)(k.prototype,"msgDataManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,i.default)(k.prototype,"msgOverlayManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.default)(k.prototype,"presenceAPI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(k.prototype,"tracking",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(k.prototype,"sponsoredActionTracking",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(k.prototype,"clientSensor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(k.prototype,"getImpressionEvent",[c.action],Object.getOwnPropertyDescriptor(k.prototype,"getImpressionEvent"),k.prototype),(0,i.default)(k.prototype,"viewData",[u.cached],Object.getOwnPropertyDescriptor(k.prototype,"viewData"),k.prototype),(0,i.default)(k.prototype,"onKeyDown",[c.action],Object.getOwnPropertyDescriptor(k.prototype,"onKeyDown"),k.prototype),(0,i.default)(k.prototype,"onClick",[c.action],Object.getOwnPropertyDescriptor(k.prototype,"onClick"),k.prototype),(0,i.default)(k.prototype,"onDismiss",[c.action],Object.getOwnPropertyDescriptor(k.prototype,"onDismiss"),k.prototype),k)
e.default=V;(0,o.setComponentTemplate)(j,V)}))
define("msg-overlay/components/overlay-search-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","ember","@ember/service","rsvp","@ember/object","tracked-toolbox","msg-shared/utils/scroll-blocker-helper","msg-shared/utils/constants","ember-batcher","global-helpers/helpers/name","ember-lifeline","@glimmer/component","@glimmer/tracking","msg-overlay/viewdata/graphql-overlay-search-viewdata"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p,g,b,h,v,f,y,_){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var w,C,M,S,O,k,D,x,I,P,R,E,T,N,A,j,z,B,U,L,F,V,q,Y,K,H,W,G,J,X
const $=(0,r.createTemplateFactory)({id:"9ZRO1GqX",block:'[[[11,0],[16,0,[29,["msg-overlay-list-bubble-search\\n    ",[52,[30,0,["shouldShowSearchContent"]]," msg-overlay-list-bubble-search--search-content-visible"]]]],[4,[38,1],[[30,0,["onElementInsert"]]],null],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n"],[41,[30,1],[[[1,"    "],[10,0],[14,0,"msg-overlay-list-bubble-search__input-container"],[12],[1,"\\n"],[1,"      "],[10,"label"],[14,0,"a11y-text"],[14,"for","msg-overlay-list-bubble-search__search-typeahead-input"],[12],[1,"\\n        "],[1,[28,[35,5],["i18n_a11y_search_hint_text","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,1],[14,0,"msg-overlay-list-search__search-icon display-flex"],[12],[1,"\\n        "],[8,[39,6],null,[["@type","@size","@name"],["system","small","search"]],null],[1,"\\n      "],[13],[1,"\\n      "],[8,[39,7],[[24,1,"msg-overlay-list-bubble-search__search-typeahead-input"],[24,0,"msg-overlay-list-bubble-search__search-typeahead-input"],[16,"placeholder",[28,[37,5],["i18n_find_a_connection","msg-overlay/components/overlay-search-feature"],null]],[24,"autocomplete","off"],[4,[38,8],["input",[30,0,["onInputChange"]]],null],[4,[38,8],["focusin",[30,0,["onInputFocusIn"]]],null],[4,[38,8],["focusout",[30,0,["onInputFocusOut"]]],null],[4,[38,8],["keyup",[30,0,["onKeyUp"]]],null]],[["@value","@insert-newline"],[[30,0,["searchTerm"]],[30,0,["onInputEnterKeyRelease"]]]],null],[1,"\\n      "],[8,[39,9],null,[["@class","@placement","@justification","@isOpen","@onVisibilityChange"],["msg-overlay-list-bubble__filters-dropdown","bottom","right",[30,0,["isConvoFiltersDropdownOpen"]],[30,0,["toggleConvoFilters"]]]],[["default"],[[[[1,"\\n        "],[8,[30,2,["dropdown-trigger"]],null,[["@class","@tabindex"],["msg-overlay-list-bubble__filters-btn","0"]],[["default"],[[[[1,"\\n          "],[1,[28,[35,10],null,[["type","size","a11y-text"],["filter-icon","small",[28,[37,5],["i18n_filter_messages_by","msg-overlay/components/overlay-search-feature"],null]]]]],[1,"\\n        "]],[]]]]],[1,"\\n        "],[8,[30,2,["dropdown-content"]],null,[["@classNames","@arrowDir"],["msg-overlay-list-bubble__filters-dropdown-content","right"]],[["default"],[[[[1,"\\n          "],[10,"ul"],[12],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"ARCHIVED"],null],[28,[37,13],[[30,0,["applyFilter"]],"ARCHIVED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_archived","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"CONNECTIONS"],null],[28,[37,13],[[30,0,["applyFilter"]],"CONNECTIONS"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_connections","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"STARRED"],null],[28,[37,13],[[30,0,["applyFilter"]],"STARRED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_starred","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"UNREAD"],null],[28,[37,13],[[30,0,["applyFilter"]],"UNREAD"],null],"button"]],[["default"],[[[[1,"\\n                "],[10,0],[14,0,"display-flex align-items-center justify-space-between"],[12],[1,"\\n                  "],[10,1],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_unread","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"INMAIL"],null],[28,[37,13],[[30,0,["applyFilter"]],"INMAIL"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_inmail","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,11],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"BLOCKED"],null],[28,[37,13],[[30,0,["applyFilter"]],"BLOCKED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_spam","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[2]]]]],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldShowSelectedFilter"]],[[[1,"    "],[18,9,[[28,[37,15],null,[["filterSection"],[[50,"dummy-yield-wrapper@dummy-yield-wrapper",0,null,null]]]]]],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasActiveSearch"]],[[[1,"    "],[8,[39,17],null,[["@icon","@size","@circle","@class","@text","@type","@click"],["close","small",true,"msg-search-form__cancel-search",[28,[37,5],["i18n_cancel_search","msg-overlay/components/overlay-search-feature"],null],"tertiary",[30,4]]],null],[1,"\\n"]],[]],null],[1,"  "],[10,0],[15,0,[29,["relative display-flex justify-center flex-column overflow-hidden\\n      ",[52,[51,[30,0,["shouldShowSearchContent"]]]," hidden"]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble-search-content"],[12],[1,"\\n"],[41,[30,0,["searchPerformed"]],[[[41,[30,0,["shouldShowSearchLoadingView"]],[[[1,"          "],[8,[39,19],null,[["@size","@class"],["small","msg-overlay-list-bubble-search__loading-state"]],null],[1,"\\n"]],[]],[[[1,"          "],[11,0],[24,0,"msg-overlay-list-bubble-search__search-result-container"],[4,[38,8],["mousedown",[30,0,["noOp"]]],null],[12],[1,"\\n"],[41,[30,0,["shouldShowNoResultView"]],[[[1,"              "],[11,0],[24,0,"msg-overlay-list-bubble-search__no-result-container text-align-center"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_no_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__no-result-illustration"],[12],[13],[1,"\\n                "],[10,2],[14,0,"ph2 t-14 t-black t-normal"],[12],[1,"\\n                  "],[1,[28,[35,5],["i18n_we_did_not_find_anything","msg-overlay/components/overlay-search-feature"],[["searchTerm"],[[30,0,["searchTerm"]]]]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["displayedConnections","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_typeahead_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_connections_matched","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n                "],[10,"ul"],[14,0,"msg-overlay-list-bubble-search__connection-search-result-list"],[12],[1,"\\n"],[42,[28,[37,21],[[28,[37,21],[[30,0,["viewData","connectionSearchResultViewDataElements"]]],null]],null],null,[[[1,"                    "],[10,"li"],[15,0,[29,["msg-overlay-list-bubble-search__list-item display-flex align-items-center pv2 ph3\\n                        ",[52,[28,[37,22],[[28,[37,12],[[30,6],[30,0,["highlightedItemIndex"]]],null],[30,0,["selectedWithKeyboard"]]],null],"msg-overlay-list-bubble-search__list-item--highlighted"]]]],[12],[1,"\\n                      "],[8,[39,23],null,[["@itemIndex","@viewData","@caption","@onClick","@onMouseMove"],[[30,6],[30,5],[28,[37,24],[[30,5,["subtext"]],[30,5,["caption"]]],null],[28,[37,13],[[30,0,["onConnectionSearchResultSelect"]],[30,5,["profileAPIModel"]]],null],[28,[37,13],[[30,0,["onListItemMouseMove"]],[30,6],false],null]]],null],[1,"\\n                    "],[13],[1,"\\n"]],[5,6]],null],[1,"                "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["matchedConversations","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_conversation_history","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n"],[1,"                "],[10,0],[14,0,"msg-overlay-list-bubble-search__content-search-result-list"],[12],[1,"\\n"],[42,[28,[37,21],[[28,[37,21],[[30,0,["matchedConversations"]]],null]],null],null,[[[1,"                    "],[8,[39,25],[[16,0,[52,[28,[37,22],[[28,[37,12],[[30,8],[30,0,["highlightedConversationResultIndex"]]],null],[30,0,["selectedWithKeyboard"]]],null],"msg-overlay-list-bubble-search__list-item--highlighted"]]],[["@conversation","@convoIndex","@openBubble","@onMouseMove","@disableBulkActions","@isOverlaySearch"],[[30,7],[30,8],[30,0,["onContentSearchResultSelect"]],[28,[37,13],[[30,0,["onListItemMouseMove"]],[30,8],true],null],true,true]],null],[1,"\\n"]],[7,8]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                    "],[8,[39,19],null,[["@size"],["small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"                    "],[8,[39,26],null,[["@inView","@rootSelector"],[[30,0,["infiniteScroll"]],".msg-overlay-list-bubble-search-content"]],null],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n"]],[]],null]],[]]],[1,"          "],[13],[1,"\\n"]],[]]]],[]],[[[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble-search__history-placeholder-container text-align-center"],[12],[1,"\\n          "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__history-placeholder-illustration"],[12],[13],[1,"\\n          "],[10,2],[14,0,"t-14 t-black t-normal ph2"],[12],[1,"\\n            "],[1,[28,[35,5],["i18n_search_your_messages","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@showSearchInput","dropdown","@currentConvosFilter","@clearActiveSearch","connection","index","conversation","index","&default"],false,["if","did-insert","ember-cli-pemberly-tracking@track-render","get","-get-dynamic-var","t","hue-web-icons@icon","input","on","artdeco-dropdown@artdeco-dropdown","artdeco-icons-web@li-icon","artdeco-dropdown@artdeco-dropdown-item","global-helpers@eq","fn","yield","hash","component","artdeco-button@artdeco-button","unless","artdeco-loader@artdeco-loader","each","-track-array","global-helpers@and","msg-overlay@connection-search-result-item-presenter","global-helpers@or","msg-overlay@overlay-conversation-list-item-feature","msg-cross-pillar@visible-beacon"]]',moduleName:"msg-overlay/components/overlay-search-feature.hbs",isStrictMode:!1}),{KEYCODES:Q,CONTROL_INTERACTION_KEYS:Z,SDK_FILTER_NAME_MAP:ee}=g.default,te=".msg-overlay-list-bubble-search__search-typeahead-input",ne=".msg-overlay-list-bubble-search-content",ie=".msg-overlay-list-bubble-search__list-item",ae=new Set(["ARCHIVED","CONNECTIONS","STARRED","UNREAD","INMAIL","BLOCKED"])
let oe=(w=(0,c.inject)("lix"),C=(0,c.inject)("i18n"),M=(0,c.inject)("tracking"),S=(0,c.inject)("global-services@a11y-notification"),O=(0,c.inject)("msg-data@data-manager"),k=(0,c.inject)("authentication@authenticated-user"),D=(0,c.inject)("date"),x=(0,c.inject)("formatter"),I=class extends f.default{constructor(){super(...arguments);(0,t.default)(this,"lix",P,this);(0,t.default)(this,"i18n",R,this);(0,t.default)(this,"tracking",E,this);(0,t.default)(this,"a11yNotification",T,this);(0,t.default)(this,"msgDataManager",N,this);(0,t.default)(this,"authenticatedUser",A,this);(0,t.default)(this,"dateService",j,this);(0,t.default)(this,"formatter",z,this);(0,t.default)(this,"connectionSearchPerformed",B,this);(0,t.default)(this,"contentSearchPerformed",U,this);(0,t.default)(this,"inputHasFocus",L,this);(0,t.default)(this,"matchedConnections",F,this);(0,t.default)(this,"_matchedConversations",V,this);(0,t.default)(this,"mailboxName",q,this);(0,t.default)(this,"isSearchLoading",Y,this);(0,t.default)(this,"collection",K,this);(0,t.default)(this,"highlightedItemIndex",H,this);(0,t.default)(this,"searchTerm",W,this);(0,t.default)(this,"isConvoFiltersDropdownOpen",G,this);(0,t.default)(this,"loadMoreInProgress",J,this);(0,t.default)(this,"selectedWithKeyboard",X,this);(0,n.default)(this,"collectionName",void 0);(0,n.default)(this,"searchField",void 0);(0,n.default)(this,"scrollSection",void 0)}get matchedMailboxConversations(){var e
return null===(e=this.msgDataManager.getMailboxState(this.mailboxName).conversations)||void 0===e?void 0:e.map((e=>e))}get matchedConversations(){return this.matchedMailboxConversations}get searchPerformed(){return this.connectionSearchPerformed||this.contentSearchPerformed}get shouldShowSelectedFilter(){const{currentConvosFilter:e}=this.args
return e&&ae.has(e)}get shouldShowSearchContent(){return this.inputHasFocus}get displayedConnections(){return this.matchedConnections.slice(0,3)}get shouldShowNoResultView(){return 0===this.displayedResultsLength&&this.connectionSearchPerformed&&this.contentSearchPerformed}get displayedResultsLength(){return this.displayedConnections.length+this.matchedConversations.length}get listItemCount(){return this.searchPerformed&&this.displayedResultsLength}get highlightedConversationResultIndex(){return this.highlightedItemIndex-this.displayedConnections.length}get shouldShowSearchLoadingView(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!e||(this.isSearchLoading||e.status.loading&&!this.loadMoreInProgress)}onElementInsert(e){this.currentElement=e
this.searchField=e.querySelector(te)
this.scrollSection=e.querySelector(ne);(0,p.default)(this,this.scrollSection)}_performSearch(e){this.isSearchLoading=!0
const t=(new Date).getTime()
this.lastRequestTime=t
const n=[this.msgDataManager.fetchTypeaheadResults(e).then((e=>this._handleConnectionSearchResults(e,t)))],{currentConvosFilter:i}=this.args
this.mailboxName=`${e}-${Date.now()}`
const a={kind:"search",keywords:e,firstDegreeConnections:!1}
if("CONNECTIONS"===i){a.categories=["INBOX","SPAM","ARCHIVE"]
a.firstDegreeConnections=!0}else if("UNREAD"===i){a.categories=["INBOX","SPAM","ARCHIVE"]
a.read=!1}else ae.has(i)?a.categories=[ee[i]]:a.categories=["INBOX","SPAM","ARCHIVE"]
const o=this.msgDataManager.getMailbox(this.mailboxName,a).then((e=>{(0,s.isDestroying)(this)||this._handleConversationSearchResults(this.msgDataManager.enableDecoratedParticipants?this.msgDataManager.getTrackedConversations(this.mailboxName):e.state.conversations,t)}))
n.push(o);(0,u.all)(n).then((()=>{if(!this.isDestroying){this.isSearchLoading=!1
0!==this.displayedResultsLength&&this.a11yNotify("i18n_a11y_navigate_search_results")}}))}_handleSearchTermChange(e){var t,n
const i=e?e.trim():"",a=i.length>0
this.highlightedItemIndex=-1
a?(0,v.debounceTask)(this,"_performSearch",i,500):this._clearSearchResults()
null===(t=(n=this.args).onSearchTermChange)||void 0===t||t.call(n,i)}_handleConversationSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,u.reject)()
this.contentSearchPerformed=!0
this._matchedConversations=e
this.a11yNotify("i18n_a11y_conversation_results_found",{resultsLength:e.length})
return(0,u.resolve)()}_handleConnectionSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,u.reject)()
this.connectionSearchPerformed=!0
this.matchedConnections=e
this.a11yNotify("i18n_a11y_connection_results_found",{resultsLength:e.length})
return(0,u.resolve)()}_clearSearchResults(){this.connectionSearchPerformed=!1
this.matchedConnections=[]
this.contentSearchPerformed=!1
this._matchedConversations=[]}_clearInputField(){this.searchTerm=""
this._handleSearchTermChange("")}_moveSelectedItem(e){const t=this.listItemCount
if(0===t)return
this.selectedWithKeyboard=!0
const n=this.highlightedItemIndex
let i
i=-1===n?1===e?0:t-1:(n+e+t)%t
l.default.testing&&console.log("[MSG-56428] logging for unstable search interaction test: ","currIndex: ",n," newIndex: ",i)
this.highlightedItemIndex=i
this._a11yNotifyItemSelectionChange();(0,b.mutateDOM)((()=>{if(!this.isDestroying)if(0===i)this.scrollSection.scrollTop=0
else{const e=this.currentElement.querySelectorAll(ie)[i]
if(e){const t=e.offsetTop,n=t+e.offsetHeight
n>this.scrollSection.offsetHeight+this.scrollSection.scrollTop?this.scrollSection.scrollTop=n-this.scrollSection.offsetHeight:t<this.scrollSection.scrollTop&&(this.scrollSection.scrollTop=t)}}}))}_a11yNotifyItemSelectionChange(){this.searchPerformed&&this.highlightedItemIndex<this.displayedConnections.length&&this.a11yNotify("i18n_a11y_search_result_connection_fullname",{connectionName:(0,h.getName)(this.displayedConnections[this.highlightedItemIndex].miniProfile)})}_openConnectionSearchResult(e){this._clearInputField()
this.args.openNewConversation({recipients:[e]})
this.tracking.fireInteractionEvent(Z.SELECT_CONNECTION_SEARCH_RESULT)}_openContentSearchResult(e){this._clearInputField()
this.args.openBubble(e)
this.tracking.fireInteractionEvent(Z.SELECT_CONTENT_SEARCH_RESULT)}onKeyUp(e){if(this.inputHasFocus)switch(e.keyCode){case Q.UP_ARROW:this._moveSelectedItem(-1)
e.preventDefault()
break
case Q.DOWN_ARROW:this._moveSelectedItem(1)
e.preventDefault()
break
case Q.ESC:this._clearInputField()}}infiniteScroll(){if(!this.shouldLoadMoreConversations)return(0,u.resolve)(!1)
this.loadMoreInProgress=!0
return this.msgDataManager.getMailbox(this.mailboxName).then((e=>e.loadOlderConversations())).finally((()=>{(0,s.isDestroying)(this)||(this.loadMoreInProgress=!1)}))}get shouldLoadMoreConversations(){if(!this.matchedConversations||0===this.matchedConversations.length)return!1
const e=this.msgDataManager.getMailboxState(this.mailboxName),{fullyLoaded:t}=e.status
return!t&&!this.loadMoreInProgress}get viewData(){const{formatter:e,displayedConnections:t}=this
return new _.default({formatter:e,matchedConnections:t})}a11yNotify(e,t){const n=this.i18n.lookupTranslation("components/msg-overlay@overlay-search-feature",e)
this.a11yNotification.setTextInLiveRegion(n([t]))}toggleConvoFilters(e){this.isConvoFiltersDropdownOpen=e
this.tracking.fireInteractionEvent("overlay.filter_messages_by","SHORT_PRESS")}applyFilter(e){this.isConvoFiltersDropdownOpen=!1
if(this.args.currentConvosFilter!==e){this.args.onFilterApply(e)
this._handleSearchTermChange(this.searchTerm)}}clearFilters(){this.args.onClearFilters()
this._handleSearchTermChange(this.searchTerm)}onInputFocusIn(){this.inputHasFocus=!0
this.highlightedItemIndex=-1;(0,b.mutateDOM)((()=>{this.isDestroying||(this.scrollSection.scrollTop=0)}))
this.tracking.fireInteractionEvent(Z.FOCUS_SEARCH_BOX)}onInputFocusOut(){this.inputHasFocus=!1}onInputEnterKeyRelease(){if(-1!==this.highlightedItemIndex&&this.searchPerformed){const e=this.viewData.connectionSearchResultViewDataElements.length
if(this.highlightedItemIndex<e){const e=this.viewData.connectionSearchResultViewDataElements[this.highlightedItemIndex]
this._openConnectionSearchResult(e.profileAPIModel)}else this._openContentSearchResult(this.matchedConversations[this.highlightedConversationResultIndex])}}clearInputField(){this._clearInputField()
this.tracking.fireInteractionEvent(Z.CANCEL_SEARCH)}onConnectionSearchResultSelect(e){this._openConnectionSearchResult(e)}onContentSearchResultSelect(e){const t=this.matchedConversations.find((t=>t.entityUrn===e))
this._openContentSearchResult(t)}onInputChange(e){this.searchTerm=e.target.value
this._handleSearchTermChange(this.searchTerm)}onListItemMouseMove(e,t,n){if(this.lastX!==n.screenX||this.lastY!==n.screenY){this.selectedWithKeyboard=!1
this.highlightedItemIndex=t?e+this.displayedConnections.length:e
this.lastX=n.screenX
this.lastY=n.screenY}}noOp(e){e.preventDefault()}},P=(0,i.default)(I.prototype,"lix",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,i.default)(I.prototype,"i18n",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.default)(I.prototype,"tracking",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(I.prototype,"a11yNotification",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(I.prototype,"msgDataManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(I.prototype,"authenticatedUser",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,i.default)(I.prototype,"dateService",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,i.default)(I.prototype,"formatter",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(I.prototype,"connectionSearchPerformed",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=(0,i.default)(I.prototype,"contentSearchPerformed",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=(0,i.default)(I.prototype,"inputHasFocus",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=(0,i.default)(I.prototype,"matchedConnections",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=(0,i.default)(I.prototype,"_matchedConversations",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=(0,i.default)(I.prototype,"mailboxName",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,i.default)(I.prototype,"isSearchLoading",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=(0,i.default)(I.prototype,"collection",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,i.default)(I.prototype,"highlightedItemIndex",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),W=(0,i.default)(I.prototype,"searchTerm",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(I.prototype,"isConvoFiltersDropdownOpen",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=(0,i.default)(I.prototype,"loadMoreInProgress",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=(0,i.default)(I.prototype,"selectedWithKeyboard",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(I.prototype,"matchedMailboxConversations",[m.cached],Object.getOwnPropertyDescriptor(I.prototype,"matchedMailboxConversations"),I.prototype),(0,i.default)(I.prototype,"onElementInsert",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onElementInsert"),I.prototype),(0,i.default)(I.prototype,"onKeyUp",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onKeyUp"),I.prototype),(0,i.default)(I.prototype,"infiniteScroll",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"infiniteScroll"),I.prototype),(0,i.default)(I.prototype,"toggleConvoFilters",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"toggleConvoFilters"),I.prototype),(0,i.default)(I.prototype,"applyFilter",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"applyFilter"),I.prototype),(0,i.default)(I.prototype,"clearFilters",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"clearFilters"),I.prototype),(0,i.default)(I.prototype,"onInputFocusIn",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onInputFocusIn"),I.prototype),(0,i.default)(I.prototype,"onInputFocusOut",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onInputFocusOut"),I.prototype),(0,i.default)(I.prototype,"onInputEnterKeyRelease",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onInputEnterKeyRelease"),I.prototype),(0,i.default)(I.prototype,"clearInputField",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"clearInputField"),I.prototype),(0,i.default)(I.prototype,"onConnectionSearchResultSelect",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onConnectionSearchResultSelect"),I.prototype),(0,i.default)(I.prototype,"onContentSearchResultSelect",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onContentSearchResultSelect"),I.prototype),(0,i.default)(I.prototype,"onInputChange",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onInputChange"),I.prototype),(0,i.default)(I.prototype,"onListItemMouseMove",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"onListItemMouseMove"),I.prototype),(0,i.default)(I.prototype,"noOp",[d.action],Object.getOwnPropertyDescriptor(I.prototype,"noOp"),I.prototype),I)
e.default=oe;(0,o.setComponentTemplate)($,oe)}))
define("msg-overlay/components/presence-onboarding-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@ember/object","@ember/service","@glimmer/component","@glimmer/tracking","global-utils/utils/get-csrf-token","rsvp"],(function(e,t,n,i,a,o,r,s,l,c,u,d,m,p){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var g,b,h,v,f,y,_,w,C,M,S,O,k,D,x,I
const P=(0,r.createTemplateFactory)({id:"+prOoktX",block:'[[[41,[30,0,["showPresenceOnboardingPresenter"]],[[[1,"  "],[11,0],[24,0,"msg-overlay-presence-onboarding-presenter"],[4,[38,1],["click",[30,0,["stopPropagation"]]],null],[12],[1,"\\n    "],[10,2],[14,0,"t-14"],[12],[1,"\\n      "],[1,[28,[35,2],["i18n_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "],[10,3],[14,6,"/help/linkedin/answer/84123"],[14,"target","_blank"],[14,"rel","noopener noreferrer"],[14,0,"t-black link-without-visited-state"],[12],[1,"\\n        "],[1,[28,[35,2],["i18n_learn_more","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"display-flex justify-flex-end mt2"],[12],[1,"\\n      "],[8,[39,3],[[16,"aria-label",[28,[37,2],["a11y_manage_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[38,1],["click",[30,0,["manageActiveStatus"]]],null],[4,[38,4],["active_status_onboarding_manage"],null]],[["@class","@size","@type","@color"],["mr2","1","tertiary","muted"]],[["default"],[[[[1,"\\n        "],[1,[28,[35,2],["i18n_manage","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "]],[]]]]],[1,"\\n      "],[8,[39,3],[[16,"aria-label",[28,[37,2],["a11y_enable_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[38,1],["click",[30,0,["enableActiveStatus"]]],null],[4,[38,4],["active_status_onboarding_enable"],null]],[["@size"],["1"]],[["default"],[[[[1,"\\n        "],[1,[28,[35,2],["i18n_got_it","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],null]],[],false,["if","on","t","artdeco-button@artdeco-button","ember-cli-pemberly-tracking@track-interaction"]]',moduleName:"msg-overlay/components/presence-onboarding-presenter.hbs",isStrictMode:!1})
let R=(g=(0,c.inject)("global-services@a11y-notification"),b=(0,c.inject)("i18n"),h=(0,c.inject)("lego@resolver"),v=(0,c.inject)("lego@tracking"),f=(0,c.inject)("store-shim"),y=(0,c.inject)("tracking"),_=(0,c.inject)("global-services@window"),w=class extends u.default{constructor(){super(...arguments);(0,t.default)(this,"a11yNotification",C,this);(0,t.default)(this,"i18n",M,this);(0,t.default)(this,"legoResolver",S,this);(0,t.default)(this,"legoTracking",O,this);(0,t.default)(this,"storeShim",k,this);(0,t.default)(this,"tracking",D,this);(0,t.default)(this,"windowService",x,this);(0,t.default)(this,"showPresenceOnboardingPresenter",I,this);(0,n.default)(this,"_legoWidgetTrackingToken",void 0)
this._fetchLegoWidget().then((()=>this._fetchActiveStatusSetting())).then((e=>{this.isDestroying||("HIDDEN"===e?this._showPresenceOnboardingPresenter():this._dismissLegoWidget())}))}stopPropagation(e){e.stopPropagation()}_showPresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!0
this.tracking.firePageViewEvent("flagship3_messaging_active_status_onboarding")
const e=this.i18n.lookupTranslation("components/msg-overlay@presence-onboarding-presenter","i18n_active_status")()
this.a11yNotification.setTextInLiveRegion(e)}_completePresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!1
return this._enableActiveStatusSetting().then((()=>this._dismissLegoWidget()))}_fetchLegoWidget(){return this.legoResolver.fireLegoCall({pageKey:"messaging_presence",slotId:"onboarding",groupId:"onboarding_group",widgetId:"presence_onboarding"},!0).then((e=>{if(!(0,s.isDestroying)(this)){if(!e)return(0,p.reject)()
this._legoWidgetTrackingToken=e.trackingToken
return e}}))}_dismissLegoWidget(){this.legoTracking.sendLegoAction(this._legoWidgetTrackingToken,this.legoTracking.LEGO_ACTION_DISMISS,1)}_fetchActiveStatusSetting(){return this.storeShim.adapterFor("-ember-m3").ajax("/psettings/presence","get",{data:{asJson:!0}}).then((e=>{var t,n
if((0,s.isDestroying)(this))return
const i=null===(t=e.map)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.visibility
if(!i)throw new Error("failed to get active status setting")
return i}))}_enableActiveStatusSetting(){return this.storeShim.adapterFor("-ember-m3").ajax("/psettings/presence/update-presence-settings","post",{data:{visibility:"CONNECTIONS",csrfToken:(0,m.default)()},headers:{"x-requested-with":"XMLHttpRequest"}}).then((e=>{var t
if((0,s.isDestroying)(this))return
const n=null===(t=e.result)||void 0===t?void 0:t.responseCode
if(200!==n)throw new Error(`failed to set active status setting, responseCode: ${n}`)}))}enableActiveStatus(){this._completePresenceOnboardingPresenter()}manageActiveStatus(){this._completePresenceOnboardingPresenter().then((()=>this.windowService.open("/psettings/presence","_blank")))}},C=(0,i.default)(w.prototype,"a11yNotification",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,i.default)(w.prototype,"i18n",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,i.default)(w.prototype,"legoResolver",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,i.default)(w.prototype,"legoTracking",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,i.default)(w.prototype,"storeShim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=(0,i.default)(w.prototype,"tracking",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,i.default)(w.prototype,"windowService",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,i.default)(w.prototype,"showPresenceOnboardingPresenter",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(w.prototype,"enableActiveStatus",[l.action],Object.getOwnPropertyDescriptor(w.prototype,"enableActiveStatus"),w.prototype),(0,i.default)(w.prototype,"manageActiveStatus",[l.action],Object.getOwnPropertyDescriptor(w.prototype,"manageActiveStatus"),w.prototype),w)
e.default=R;(0,o.setComponentTemplate)(P,R)}))
define("msg-overlay/components/recommendation-card-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/service","@glimmer/component"],(function(e,t,n,i,a,o,r,s,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var c,u,d
const m=(0,r.createTemplateFactory)({id:"hRxJv9kh",block:'[[[11,"li"],[24,0,"msg-overlay-list-bubble__convo-item msg-overlay-list-bubble__profile-item"],[4,[38,0],[[30,1]],[["routeName","currentRoute"],[[28,[37,1],[[53,"outletState"],"render.name"],null],[28,[37,1],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[11,"button"],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item-link"],[24,"tabindex","0"],[24,4,"button"],[4,[38,3],["click",[30,2]],null],[4,[38,3],["keyup",[30,2]],[["preventDefault"],[true]]],[4,[38,4],["overlay_message_recommendation"],[["onInteract"],[[30,3]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card"],[12],[1,"\\n      "],[10,0],[14,0,"msg-conversation-card__presence-entity-container"],[12],[1,"\\n        "],[8,[39,5],[[24,0,"msg-conversation-card__presence-entity"]],[["@viewData","@size"],[[30,4,["EntityWithPresenceViewData"]],3]],null],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content msg-overlay-list-bubble__contextual-convo-card-content"],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"truncate t-14 t-black"],[12],[1,"\\n              "],[1,[30,4,["suggestedRecipientName"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__message-snippet m0 t-12 t-black--light t-normal block truncate"],[12],[1,"\\n              "],[1,[30,4,["suggestedRecipientOccupation"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n"],[41,[30,0,["reasonTextFromRenderModel"]],[[[1,"              "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                "],[1,[30,0,["reasonTextFromRenderModel"]]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[28,[37,7],[[30,5]],null],[[[41,[30,4,["suggestionReasons"]],[[[1,"                "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                  "],[1,[52,[30,4,["isCurrentEmployee"]],[28,[37,8],["works_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isPreviousEmployee"]],[28,[37,8],["has_worked_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isConnectingMember"]],[28,[37,8],["knows_people_at","msg-overlay/components/recommendation-card-presenter"],[["connectionCount","actor"],[[30,4,["numSecondDegreeMembers"]],[30,6]]]]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "]],[]],null]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@impressionTrackingHandler","@messageRecommendation","@interactionTrackingHandler","@viewData","@isFeedContext","@actor"],false,["ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","on","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence-presenter","if","global-helpers@not","t"]]',moduleName:"msg-overlay/components/recommendation-card-presenter.hbs",isStrictMode:!1})
let p=(c=(0,s.inject)("i18n"),u=class extends l.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",d,this)}get reasonTextFromRenderModel(){const{reasonText:e}=this.args.viewData
if(e)return this.i18n.parseRawString(e)({name:this.args.actor})}},d=(0,i.default)(u.prototype,"i18n",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u)
e.default=p;(0,o.setComponentTemplate)(m,p)}))
define.alias("ember-finite-scroll/components/sentinel","msg-overlay/components/sentinel")
define.alias("ember-cloud-filepicker/components/slideshare-file-picker","msg-overlay/components/slideshare-file-picker")
define("msg-overlay/config/environment",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-overlay/config/environment",n=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(n))}catch(e){t={sparkPlaceholders:{includeHashes:["assets/media-player.amd.js"]}}}var n=t
e.default=n}))
define("msg-overlay/engine",["exports","voyager-web/resolver","ember-engines/engine","ember-load-initializers"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a="msg-overlay",o=n.default.extend({Resolver:t.default,modulePrefix:a});(0,i.default)(o,a)
var r=o
e.default=r}))
define.alias("ember-number-formatting/helpers/abbreviate-number","msg-overlay/helpers/abbreviate-number")
define.alias("ember-truth-helpers/helpers/and","msg-overlay/helpers/and")
define.alias("artdeco-datepicker/helpers/artdeco-adjust-date-for-timezone","msg-overlay/helpers/artdeco-adjust-date-for-timezone")
define.alias("artdeco-datepicker/helpers/artdeco-is-between-dates","msg-overlay/helpers/artdeco-is-between-dates")
define.alias("ember-media-player/helpers/autoplay-media","msg-overlay/helpers/autoplay-media")
define.alias("artdeco-datepicker/helpers/cal-dates-equal","msg-overlay/helpers/cal-dates-equal")
define.alias("ember-element-helper/helpers/element","msg-overlay/helpers/element")
define.alias("ember-holy-futuristic-template-namespacing-batman/helpers/-translate-dynamic-2","msg-overlay/helpers/ember-holy-futuristic-template-namespacing-batman-translate-dynamic-2")
define("msg-overlay/helpers/ensure-safe-component",["exports","@embroider/util"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.EnsureSafeComponentHelper}})}))
define.alias("ember-truth-helpers/helpers/eq","msg-overlay/helpers/eq")
define.alias("ember-media-player/helpers/format-autoplay","msg-overlay/helpers/format-autoplay")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-overlay/helpers/format-number")
define.alias("ember-semaphore/helpers/format-title","msg-overlay/helpers/format-title")
define.alias("hue-web-icons/helpers/get-asset-url","msg-overlay/helpers/get-asset-url")
define.alias("ember-truth-helpers/helpers/gt","msg-overlay/helpers/gt")
define.alias("ember-truth-helpers/helpers/gte","msg-overlay/helpers/gte")
define.alias("ember-truth-helpers/helpers/is-array","msg-overlay/helpers/is-array")
define.alias("ember-truth-helpers/helpers/is-empty","msg-overlay/helpers/is-empty")
define.alias("ember-truth-helpers/helpers/is-equal","msg-overlay/helpers/is-equal")
define.alias("artdeco-icons-web/helpers/li-icon","msg-overlay/helpers/li-icon")
define.alias("ember-async-data/helpers/load","msg-overlay/helpers/load")
define.alias("ember-number-formatting/helpers/localized-format-currency","msg-overlay/helpers/localized-format-currency")
define.alias("ember-number-formatting/helpers/localized-format-number","msg-overlay/helpers/localized-format-number")
define.alias("ember-truth-helpers/helpers/lt","msg-overlay/helpers/lt")
define.alias("ember-truth-helpers/helpers/lte","msg-overlay/helpers/lte")
define.alias("ember-truth-helpers/helpers/not-eq","msg-overlay/helpers/not-eq")
define.alias("ember-truth-helpers/helpers/not","msg-overlay/helpers/not")
define.alias("ember-truth-helpers/helpers/or","msg-overlay/helpers/or")
define("msg-overlay/helpers/ref-to",["exports","ember-ref-bucket/helpers/ref-to"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"refTo",{enumerable:!0,get:function(){return t.default}})}))
define.alias("ember-app-scheduler/helpers/route-idle","msg-overlay/helpers/route-idle")
define.alias("ember-media-player/helpers/seek-media","msg-overlay/helpers/seek-media")
define.alias("ember-set-helper/helpers/set","msg-overlay/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-overlay/helpers/t")
define.alias("ember-number-formatting/helpers/trim-fractional-numbers","msg-overlay/helpers/trim-fractional-numbers")
define.alias("ember-truth-helpers/helpers/xor","msg-overlay/helpers/xor")
define.alias("ember-uuid","msg-overlay/index")
define("msg-overlay/initializers/icons",["exports","artdeco-icons-web/src/icons","msg-overlay/config/environment"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
function i(e){throw e}var a={name:"icons",initialize:function(){const{environment:e,APP:a}=n.default
let o,r
a&&({artdecoCustomSpriteUrl:o,artdecoCustomSpriteName:r}=a)
const s="test"!==e
t.default.load(s,o,r).catch(i)}}
e.default=a}))
define.alias("ember-cli-pemberly-lix/initializers/lix","msg-overlay/initializers/lix")
define.alias("ember-m3/initializers/m3-store","msg-overlay/initializers/m3-store")
define.alias("video/instance-initializers/media-plugins","msg-overlay/instance-initializers/media-plugins")
define.alias("artdeco-datepicker/modifiers/artdeco-calendar-click-watcher","msg-overlay/modifiers/artdeco-calendar-click-watcher")
define.alias("ember-ref-bucket/modifiers/create-ref","msg-overlay/modifiers/create-ref")
define.alias("ember-css-transitions/modifiers/css-transition","msg-overlay/modifiers/css-transition")
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-overlay/modifiers/did-insert")
define.alias("ember-scroll-modifiers/modifiers/did-intersect","msg-overlay/modifiers/did-intersect")
define.alias("ember-resize-modifier/modifiers/did-resize","msg-overlay/modifiers/did-resize")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-overlay/modifiers/did-update")
define.alias("ember-finite-scroll/modifiers/ember-finite-scroll/focus","msg-overlay/modifiers/ember-finite-scroll/focus")
define.alias("image-editor/modifiers/fabric","msg-overlay/modifiers/fabric")
define.alias("ember-prop-modifier","msg-overlay/modifiers/prop")
define.alias("ember-scroll-modifiers/modifiers/scroll-into-view","msg-overlay/modifiers/scroll-into-view")
define.alias("ember-sortable/modifiers/sortable-group","msg-overlay/modifiers/sortable-group")
define.alias("ember-sortable/modifiers/sortable-handle","msg-overlay/modifiers/sortable-handle")
define.alias("ember-sortable/modifiers/sortable-item","msg-overlay/modifiers/sortable-item")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-overlay/modifiers/will-destroy")
define.alias("ember-cloud-filepicker/providers/base-provider","msg-overlay/providers/base-provider")
define.alias("ember-cloud-filepicker/providers/dropbox-provider","msg-overlay/providers/dropbox-provider")
define.alias("ember-cloud-filepicker/providers/onedrive-provider","msg-overlay/providers/onedrive-provider")
define("msg-overlay/providers/slideshare-provider",["exports","ember-cloud-filepicker/providers/slideshare-provider"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define.alias("@embroider/util/services/ensure-registered","msg-overlay/services/-ensure-registered")
define.alias("artdeco-hoverables/services/artdeco-hoverable","msg-overlay/services/artdeco-hoverable")
define.alias("artdeco-modal/services/artdeco-modal","msg-overlay/services/artdeco-modal")
define.alias("artdeco-toast/services/artdeco-toast","msg-overlay/services/artdeco-toast")
define.alias("client-sensor-web/services/client-sensor","msg-overlay/services/client-sensor")
define.alias("ember-date-service/services/date","msg-overlay/services/date")
define.alias("@linkedin/ember-restli-graphql/services/graphql","msg-overlay/services/graphql")
define.alias("image-editor/services/image-editor-loader","msg-overlay/services/image-editor-loader")
define.alias("@linkedin/ember-pem/services/internal-event-utils","msg-overlay/services/internal-event-utils")
define.alias("@linkedin/ember-pem/services/internal-pem-tracking","msg-overlay/services/internal-pem-tracking")
define.alias("ember-cli-pemberly-lix/services/lix","msg-overlay/services/lix")
define.alias("ember-m3/services/m3-schema-manager","msg-overlay/services/m3-schema-manager")
define.alias("ember-media-player/services/media-player","msg-overlay/services/media-player")
define.alias("ember-number-formatting/services/number-formatter","msg-overlay/services/number-formatter")
define.alias("ember-number-formatting/services/number-locale","msg-overlay/services/number-locale")
define.alias("@linkedin/ember-pem/services/pem-response-metadata","msg-overlay/services/pem-response-metadata")
define.alias("@linkedin/ember-pem/services/pem-tracking","msg-overlay/services/pem-tracking")
define.alias("persistent-toast-manager/services/persistent-toast-manager","msg-overlay/services/persistent-toast-manager")
define.alias("@linkedin/ember-qualtrics/services/qualtrics-surveys","msg-overlay/services/qualtrics-surveys")
define.alias("ember-media-player/services/static-asset-loader","msg-overlay/services/static-asset-loader")
define.alias("ember-cli-pemberly-m3/services/store","msg-overlay/services/store")
define.alias("ember-cli-pemberly-litms/services/tag-manager","msg-overlay/services/tag-manager")
define.alias("@linkedin/ember-pem/services/tracer","msg-overlay/services/tracer")
define.alias("ember-cli-pemberly-litms/services/tracking-adapter-for-tag-manager","msg-overlay/services/tracking-adapter-for-tag-manager")
define.alias("ember-singularity/services/unified-event-handler","msg-overlay/services/unified-event-handler")
define("msg-overlay/templates/application",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n=(0,t.createTemplateFactory)({id:"A72Ni7se",block:'[[[8,[39,0],null,null,null]],[],false,["msg-overlay@messaging-overlay-container"]]',moduleName:"msg-overlay/templates/application.hbs",isStrictMode:!1})
e.default=n}))
define.alias("artdeco-datepicker/templates/components/artdeco-calendar","msg-overlay/templates/components/artdeco-calendar")
define.alias("artdeco-datepicker/templates/components/artdeco-datepicker-embedded-cal","msg-overlay/templates/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/templates/components/artdeco-datepicker","msg-overlay/templates/components/artdeco-datepicker")
define.alias("artdeco-datepicker/templates/components/artdeco-daterange-embedded-cal","msg-overlay/templates/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/templates/components/artdeco-daterange","msg-overlay/templates/components/artdeco-daterange")
define.alias("ember-async-data/tracked-async-data","msg-overlay/tracked-async-data")
define("msg-overlay/utils/asset-utils",["exports","ember-cloud-filepicker/utils/asset-utils"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define.alias("ember-highcharts/utils/build-options","msg-overlay/utils/build-options")
define("msg-overlay/utils/file-error",["exports","ember-cloud-filepicker/utils/file-error"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define("msg-overlay/utils/file-result",["exports","ember-cloud-filepicker/utils/file-result"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define("msg-overlay/utils/get-app-config",["exports","ember-cloud-filepicker/utils/get-app-config"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define.alias("ember-cli-artdeco-tabs/utils/get-box-model-width","msg-overlay/utils/get-box-model-width")
define.alias("client-sensor-web/utils/helpers","msg-overlay/utils/helpers")
define("msg-overlay/utils/mime-type-utils",["exports","ember-cloud-filepicker/utils/mime-type-utils"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define("msg-overlay/utils/recommendation-helpers",["exports","msg-shared/utils/constants"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.USECASE_PARTIAL_LOOKUP=void 0
e.normalizeUsecase=function(e,t){return`${r[e]}_${t?"FULL":"SHORT"}`}
const{CONTEXT_TYPES:{FEED_CONTEXT:n,JOB_CONTEXT:i,COMPANY_CONTEXT:a,PROFILE_CONTEXT:o}}=t.OVERLAY,r={[n]:"ARTICLE_SHARE_OVERLAY",[i]:"OVERLAY_JOB",[a]:"OVERLAY_COMPANY",[o]:"OVERLAY_PROFILE"}
e.USECASE_PARTIAL_LOOKUP=r}))
define("msg-overlay/utils/uuid-generator",["exports","ember-uuid/utils/uuid-generator"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}})
Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})
Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}})
Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}})}))
define("msg-overlay/utils/validation-helpers",["exports","ember-cloud-filepicker/utils/validation-helpers"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define.alias("ember-vector-images/utils/vector-url","msg-overlay/utils/vector-url")
define("msg-overlay/utils/window-helpers",["exports","ember-cloud-filepicker/utils/window-helpers"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n={}
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.keys(t).forEach((function(i){"default"!==i&&"__esModule"!==i&&(Object.prototype.hasOwnProperty.call(n,i)||i in e&&e[i]===t[i]||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}}))}))}))
define("msg-overlay/viewdata/graphql-contextual-recommendation-list-viewdata",["exports","msg-overlay/viewdata/graphql-recommendation-card-viewdata","msg-facepile-grid/viewdata/graphql-contextual-recommendation-facepile-viewdata","msg-data/viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class a extends i.default{get requiredProps(){return["suggestedRecipients","formatter"]}get suggestedRecipientsLength(){var e
return null===(e=this.props.suggestedRecipients)||void 0===e?void 0:e.length}get recommendationCardViewDataItems(){return this.props.suggestedRecipients.map((e=>new t.default({suggestion:e,formatter:this.props.formatter})))}_previewMutualConnections(){const e=[],{suggestedRecipients:t}=this.props
if(t.length){var n,i
e.push(null===(n=t[0].recipientEntityViewModel)||void 0===n||null===(i=n.entity)||void 0===i?void 0:i.profile)}if(t.length>1){var a,o
e.push(null===(a=t[1].recipientEntityViewModel)||void 0===a||null===(o=a.entity)||void 0===o?void 0:o.profile)}return e}get mutualConnectionNames(){return this._previewMutualConnections().map((e=>({firstName:e.firstName,lastName:e.lastName})))}get hasMoreSuggestedRecipients(){return this.suggestedRecipientsLength>2}get firstMutualConnectionName(){return this.mutualConnectionNames[0]}get secondMutualConnectionName(){return this.mutualConnectionNames[1]}get facepileViewData(){return new n.default({participants:this._previewMutualConnections(),isGroupChat:!1,formatter:this.props.formatter})}}e.default=a}))
define("msg-overlay/viewdata/graphql-overlay-search-viewdata",["exports","@babel/runtime/helpers/esm/applyDecoratedDescriptor","msg-data/viewdata","msg-typeahead/viewdata/graphql-possible-recipient-viewdata","tracked-toolbox"],(function(e,t,n,i,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var o
let r=(o=class extends n.default{get requiredProps(){return["matchedConnections","formatter"]}get connectionSearchResultViewDataElements(){const{formatter:e,matchedConnections:t}=this.props
return t.map((t=>new i.default({possibleRecipient:t,formatter:e})))}},(0,t.default)(o.prototype,"connectionSearchResultViewDataElements",[a.cached],Object.getOwnPropertyDescriptor(o.prototype,"connectionSearchResultViewDataElements"),o.prototype),o)
e.default=r}))
define("msg-overlay/viewdata/graphql-recommendation-card-viewdata",["exports","msg-data/viewdata","presence/viewdata/host-entity-with-presence-viewdata"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class i extends t.default{get requiredProps(){return["suggestion","formatter"]}get recipientProfile(){var e,t
const n=null===(e=this.props.suggestion.recipientEntityViewModel)||void 0===e||null===(t=e.entity)||void 0===t?void 0:t.profile
return{entityUrn:n.entityUrn,dashEntityUrn:n.entityUrn,objectUrn:n.objectUrn,firstName:n.firstName,lastName:n.lastName,occupation:n.headline,profilePicture:n.profilePicture}}get suggestedRecipientName(){return this.props.formatter.formatName(this.recipientProfile,"full")}get EntityWithPresenceViewData(){return new n.default({altText:this.suggestedRecipientName,profile:this.recipientProfile})}get suggestedRecipientOccupation(){return this.recipientProfile.occupation}get reasonText(){var e
return null===(e=this.props.suggestion.reasonText)||void 0===e?void 0:e.text}get trackingId(){return this.props.suggestion.trackingId}get profileObjectUrn(){const{recipientProfile:e}=this
return e&&e.objectUrn}}e.default=i}))
define("msg-overlay/viewdata/list-bubble-viewdata",["exports","msg-data/viewdata","msg-overlay/viewdata/graphql-contextual-recommendation-list-viewdata","presence/viewdata/host-entity-with-presence-viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class a extends t.default{get requiredProps(){return["lix","suggestedRecipients","formatter","authenticatedUserProfile"]}get contextualRecommendationListViewData(){return new n.default({suggestedRecipients:this.props.suggestedRecipients,formatter:this.props.formatter})}get entityWithPresenceViewData(){const{authenticatedUserProfile:e,formatter:t}=this.props
return new i.default({profile:e,altText:t.formatName(e,"full")})}}e.default=a}))
define("msg-overlay/viewdata/recommendation-card-viewdata",["exports","msg-data/viewdata","presence/viewdata/host-entity-with-presence-viewdata"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class i extends t.default{get requiredProps(){return["suggestion","formatter"]}get recipientProfile(){var e
return null===(e=this.props.suggestion.suggestedRecipientProfile)||void 0===e?void 0:e.miniProfile}get suggestedRecipientName(){return this.props.formatter.formatName(this.recipientProfile,"full")}get EntityWithPresenceViewData(){return new n.default({altText:this.suggestedRecipientName,profile:this.recipientProfile})}get suggestedRecipientOccupation(){const{recipientProfile:e}=this
return e&&e.occupation}get suggestionReasons(){return this.props.suggestion.reasons}get reasonType(){var e
return null===(e=this.suggestionReasons[0])||void 0===e?void 0:e.$type}get isCurrentEmployee(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.CurrentEmployee"===this.reasonType}get isPreviousEmployee(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.PreviousEmployee"===this.reasonType}get isConnectingMember(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.ConnectingMember"===this.reasonType}get numSecondDegreeMembers(){var e
return null===(e=this.suggestionReasons[0])||void 0===e?void 0:e.numSecondDegreeMembers}get trackingId(){return this.props.suggestion.trackingId}get profileObjectUrn(){const{recipientProfile:e}=this
return e&&e.objectUrn}}e.default=i}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata",["exports","msg-data/viewdata","msg-shared-modals/viewdata/sdk-conversation-header-dropdown-menu-viewdata","msg-ui/viewdata/sdk-virtual-meeting-cta-viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a=["conversation","participants","msgDataManager","i18n","formatter","authenticatedUserProfile","presenceAPI"]
class o extends t.default{get requiredProps(){return a}get conversationName(){return this.props.conversation.title}get participantNames(){return this.props.participants.map((e=>({firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName})))}get showDropdownMenu(){var e
return!(null===(e=this.props.conversation)||void 0===e||!e.entityUrn)}get virtualMeetingCtaViewData(){const{conversation:e,authenticatedUserProfile:t,msgDataManager:n,participants:a}=this.props
return new i.default({conversation:e,authenticatedUserProfile:t,msgDataManager:n,participants:a})}get conversationHeaderDropdownMenuViewData(){return new n.default({conversation:this.props.conversation,authenticatedUserProfile:this.props.authenticatedUserProfile,participants:this.props.participants,i18n:this.props.i18n,formatter:this.props.formatter,presenceAPI:this.props.presenceAPI,isInteractiveMessagingComponent:!1})}}e.default=o}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata",["exports","global-helpers/helpers/urn-to-id","msg-data/viewdata","msg-shared/helpers/is-company-profile","msg-shared/utils/sdk-view-data-helpers","urn-utils","msg-ui/viewdata/sdk-conversation-entity-viewdata","msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata"],(function(e,t,n,i,a,o,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const l=["conversation","participantStateMap","messageRecipients","headerReactionNotification","authenticatedUserProfile","formatter","i18n","msgDataManager","presenceAPI"],c="components/msg-overlay@conversation-bubble-header-feature"
class u extends n.default{get requiredProps(){return l}get shouldShowHeader(){const{conversation:e}=this.props
return void 0!==e}get participants(){const{conversation:e}=this.props
return null!=e&&e.participants?e.participants.map((e=>this.props.participantStateMap[e])).filter((e=>!!e)):[]}get hasParticipants(){return!!this.participants.length}get isGroupChat(){const{conversation:e}=this.props
return!!e&&e.groupChat}get conversationName(){const{conversation:e}=this.props
return e?e.title:null}get latestEvent(){const{conversation:e,msgDataManager:t}=this.props
return e&&(0,a.getLatestMessage)(e,t)}get messageRecipient(){const{messageRecipients:e}=this.props
return e?e[0]:void 0}get messageRecipientId(){const{messageRecipient:e}=this
return e?e.publicIdentifier:""}get messageRecipientFirstName(){const{messageRecipient:e}=this
return e?e.firstName:null}get messageRecipientLastName(){const{messageRecipient:e}=this
return e?e.lastName:null}get oneToOneParticipantPublicProfileId(){var e,t
const n=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return n.length?(null===(e=n[0])||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.url)??"UNKNOWN":"UNKNOWN"}get pageUrl(){var e
return null===(e=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)[0])||void 0===e?void 0:e.pageUrl}get pageName(){var e,t
return null===(e=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)[0])||void 0===e||null===(t=e.name)||void 0===t?void 0:t.text}get isCompanyRecipient(){var e
const{messageRecipient:t}=this,n=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return 0!==n.length&&(!!(t&&(0,i.isCompanyProfile)(t)||(null===(e=n[0])||void 0===e?void 0:e.kind)===a.PARTICIPANT_TYPES.ORGANIZATION)||!!(0,a.isConversationWithAdvertiser)(this.props.conversation))}get participantNames(){const{conversation:e}=this.props
if(e){let t
t=(0,a.isConversationWithAdvertiser)(e)?(0,a.getParticipantsForConversationsWithAdvertisers)(this.participants,this.props.authenticatedUserProfile):(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return t.map((e=>{var t
return"MEMBER"===e.kind?{firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName}:{firstName:(null===(t=e.name)||void 0===t?void 0:t.text)??"",lastName:""}}))}}get participantNamesWithSelf(){return(0,a.participantNamesWithSelf)(this.participants,this.props.authenticatedUserProfile,!0,this.props.i18n)}get recipientProfileId(){var e
const t=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return t?(0,o.extractEntityInfoFromUrn)(null===(e=t[0])||void 0===e?void 0:e.hostIdentityUrn).id:null}get companyRecipientId(){var e
const{participants:n}=this
return n&&void 0!==(null===(e=n[0])||void 0===e?void 0:e.entityUrn)?(0,t.urnToId)(n[0].entityUrn):null}get reactorFirstName(){const{headerReactionNotification:e}=this.props,{reactor:t}=e
return t?null==t?void 0:t.firstName:null}get reactorLastName(){const{headerReactionNotification:e}=this.props,{reactor:t}=e
return t?null==t?void 0:t.lastName:null}get reactorEmoji(){const{headerReactionNotification:e}=this.props
return e.emoji}get hasPresenceInformation(){return(0,a.shouldShowPresenceInformationForConversation)(this.props.conversation,this.props.msgDataManager,this.props.authenticatedUserProfile,this.participants)}get existingGroupParticipantsTitle(){const{conversation:e,i18n:t}=this.props
if(!e)return null
const{participants:n}=this
let i
i=e.title?1===n.length?t.lookupTranslation(c,"i18n_just_you")():t.lookupTranslation(c,"i18n_participant_familiar")([{names:this.participantNamesWithSelf}]):t.lookupTranslation(c,"i18n_num_participants_in_group_conversation")([{count:this.participants.length}])
return i}get creatorProfileViewEnabled(){const{conversation:e}=this.props
return(0,a.isConversationFeatureSupported)(e,"VIEW_CREATOR_PROFILE")}get conversationEntityViewData(){const{conversation:e,formatter:t,authenticatedUserProfile:n,msgDataManager:i}=this.props
return new r.default({conversation:e,participants:this.participants,latestMessage:this.latestEvent,authenticatedUserMiniProfile:n,msgDataManager:i,formatter:t})}get conversationBubbleHeaderControlsViewData(){return new s.default({conversation:this.props.conversation,participants:this.participants,msgDataManager:this.msgDataManager,i18n:this.props.i18n,formatter:this.props.formatter,authenticatedUserProfile:this.props.authenticatedUserProfile,presenceAPI:this.props.presenceAPI})}}e.default=u}))
define("msg-overlay/viewdata/sdk-conversation-bubble-viewdata",["exports","msg-data/viewdata","msg-shared/utils/sdk-view-data-helpers","msg-data/utils/urn-id-helpers","msg-spinmail/viewdata/sdk-sponsored-conversation-thread-viewdata","msg-spinmail-data/utils/sponsored-conversation-properties","msg-spinmail/viewdata/sdk-spinmail-thread-viewdata","msg-shared/utils/custom-tracking","msg-shared/utils/view-data-helpers"],(function(e,t,n,i,a,o,r,s,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const c=["conversation","msgDataManager","authenticatedUserProfile","presenceAPI","messageRecipients","lix"]
class u extends t.default{get requiredProps(){return c}get participants(){const{mailboxParticipants:e,enableDecoratedParticipants:t}=this.props.msgDataManager
return t?this.props.conversation.decoratedParticipants:this.props.conversation.participants.map((t=>e[t]))}get latestMessage(){var e
return null===(e=this.props.conversation.messages)||void 0===e?void 0:e.last()}get isUnread(){return!this.props.conversation.read}get isCompanyProfile(){return(0,n.isConversationWithCompany)(this.props.conversation,this.props.msgDataManager,this.props.authenticatedUserProfile)}get conversationUrn(){return this.props.conversation.entityUrn}get hostConversationUrn(){return`urn:li:fs_conversation:${(0,i.extractMailboxAndConversationId)(this.conversationUrn).conversationId}`}get conversationId(){const{conversation:e}=this.props
return e&&e.entityUrn?(0,i.extractMailboxAndConversationId)(e.entityUrn).conversationId:null}get isVideoMeetingEnabled(){return this.props.conversation&&(0,n.isConversationFeatureSupported)(this.props.conversation,"REPLY")}get isConversationWithAdvertiser(){return this.props.conversation&&(0,n.isConversationWithAdvertiser)(this.props.conversation)}get isInMailOrInMailReply(){return this.props.conversation&&(0,n.isInMailConversation)(this.props.conversation)}get isSponsoredConversation(){return this.props.conversation&&(0,n.isSponsoredConversation)(this.props.conversation)}get isSponsoredInMail(){return this.props.conversation&&(0,n.isSponsoredInMail)(this.props.conversation)}get enableReportingSponsoredConversation(){const{conversation:e}=this.props
return!!e&&((0,o.enableReportingSponsoredMessage)(e)||(0,o.enableReportingSponsoredInMail)(e))}get participantUrn(){return this.participantUrns.filter((e=>e!==this.props.authenticatedUserProfile.dashEntityUrn))[0]}get participantUrns(){var e
return null===(e=this.props.conversation)||void 0===e?void 0:e.participants}get hasInitialFetch(){return!!this.props.conversation.messages.length}get isGroupChat(){return this.props.conversation.groupChat}get isMuted(){return"MUTE"===this.props.conversation.notificationStatus}get conversationBackendUrn(){return this.props.conversation.backendUrn}get participantTrackingUrns(){const{participants:e}=this
return e?(0,s.getParticipantTrackingUrns)(e,!0):[]}get recipientObjectUrns(){var e
return null===(e=this.props.messageRecipients)||void 0===e?void 0:e.filter((e=>e.objectUrn)).map((e=>e.objectUrn))}get recipientUrns(){var e
return null===(e=this.props.messageRecipients)||void 0===e?void 0:e.map((e=>(0,l.getProfileDashUrn)(e)))}get sponsoredCreativeUrn(){var e,t,n,i
return null===(e=this.props.conversation)||void 0===e||null===(t=e.contentMetadata)||void 0===t||null===(n=t.conversationAdContent)||void 0===n||null===(i=n.creativeAdsReportingInfo)||void 0===i?void 0:i.sponsoredCreativeUrn}get inboxType(){var e,t
const{conversation:n}=this.props
return n?null!==(e=n.categories)&&void 0!==e&&e.includes("PRIMARY_INBOX")?"PRIMARY":null!==(t=n.categories)&&void 0!==t&&t.includes("SECONDARY_INBOX")?"SECONDARY":null:null}get spinmailThreadViewData(){return new r.default({conversation:this.props.conversation,msgDataManager:this.props.msgDataManager,authenticatedUserProfile:this.props.authenticatedUserProfile,presenceAPI:this.props.presenceAPI})}get sponsoredConversationThreadViewData(){const{conversation:e,msgDataManager:t,presenceAPI:n}=this.props
return new a.default({conversation:e,msgDataManager:t,presenceAPI:n})}}e.default=u}))

//# sourceMappingURL=engine.map